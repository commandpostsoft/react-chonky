{"version":3,"file":"chonky.cjs.development.js","sources":["../src/util/hooks-helpers.ts","../src/util/logger.ts","../src/util/file-helper.ts","../src/redux/files-transforms.ts","../src/action-definitions/option-ids.ts","../src/types/sort.types.ts","../src/redux/selectors.ts","../src/types/icons.types.ts","../src/redux/thunks/file-actions.thunks.ts","../src/redux/thunks/dispatchers.thunks.ts","../src/types/file-view.types.ts","../src/util/helpers.ts","../src/redux/thunks/index.ts","../src/action-definitions/essential.ts","../src/action-definitions/default.ts","../src/action-definitions/extra.ts","../src/action-definitions/index.ts","../src/redux/state.ts","../src/redux/reducers.ts","../src/redux/watchers.ts","../src/redux/store.ts","../src/components/internal/ChonkyIconPlaceholder.tsx","../src/util/default-config.ts","../src/util/i18n.ts","../src/util/icon-helper.ts","../src/util/styles.ts","../src/util/file-browser-handle.ts","../src/components/internal/ChonkyBusinessLogic.tsx","../src/util/dnd-fallback.ts","../src/components/external/FileContextMenu-hooks.ts","../src/types/dnd.types.ts","../src/components/file-list/DnDFileListDragLayer.tsx","../src/components/internal/HotkeyListener.tsx","../src/components/internal/ChonkyPresentationLayer.tsx","../src/components/external/FileBrowser.tsx","../src/components/external/FileNavbar-hooks.ts","../src/util/dnd.ts","../src/components/external/TextPlaceholder.tsx","../src/components/file-list/FileEntry-hooks.tsx","../src/types/action.types.ts","../src/util/file-actions.ts","../src/components/external/ToolbarButton.tsx","../src/components/external/FolderChainButton.tsx","../src/components/external/FileNavbar.tsx","../src/components/external/ToolbarDropdownButton.tsx","../src/components/external/ToolbarDropdown.tsx","../src/components/external/ToolbarInfo.tsx","../src/components/external/ToolbarSearch.tsx","../src/components/external/FileToolbar.tsx","../src/components/file-list/FileListEmpty.tsx","../src/components/internal/ClickableWrapper-hooks.tsx","../src/components/internal/ClickableWrapper.tsx","../src/components/file-list/FileEntryName.tsx","../src/components/file-list/CompactEntry.tsx","../src/components/file-list/DnDFileEntry.tsx","../src/components/file-list/FileThumbnail.tsx","../src/components/file-list/GridEntryDndIndicator.tsx","../src/components/file-list/GridEntryPreview.tsx","../src/components/file-list/GridEntry.tsx","../src/components/file-list/ListEntry.tsx","../src/components/file-list/FileEntry.tsx","../src/components/file-list/GridContainer.tsx","../src/components/file-list/ListContainer.tsx","../src/components/file-list/FileList.tsx","../src/components/external/FileContextMenu.tsx","../src/components/external/FullFileBrowser.tsx","../src/extensions/file-map.ts"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\n\nexport const useDebounce = <T>(value: T, delay: number): [T, React.Dispatch<React.SetStateAction<T>>] => {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n\n  return [debouncedValue, setDebouncedValue];\n};\n\nconst UNINITIALIZED_SENTINEL = {};\nexport const useStaticValue = <T>(factory: () => T): T => {\n  const valueRef = useRef<T>(UNINITIALIZED_SENTINEL as T);\n  if (valueRef.current === UNINITIALIZED_SENTINEL) valueRef.current = factory();\n  return valueRef.current;\n};\n\nexport const useInstanceVariable = <T>(value: T) => {\n  const ref = useRef(value);\n  useEffect(() => {\n    ref.current = value;\n  }, [ref, value]);\n  return ref;\n};\n","export class Logger {\n  public static error(...args: any[]): void {\n    // eslint-disable-next-line no-console\n    console.error('[Chonky runtime error]', ...args);\n  }\n\n  public static warn(...args: any[]): void {\n    // eslint-disable-next-line no-console\n    console.warn('[Chonky runtime warning]', ...args);\n  }\n\n  public static debug(...args: any[]): void {\n    // eslint-disable-next-line no-console\n    console.debug('[Chonky runtime debug]', ...args);\n  }\n\n  public static formatBullets(bullets: string[]): string {\n    return `\\n- ${bullets.join('\\n- ')}`;\n  }\n}\n","import { Nullable } from 'tsdef';\n\nimport { FileData } from '../types/file.types';\nimport { Logger } from './logger';\n\nexport class FileHelper {\n  public static isDirectory(file: Nullable<FileData>): file is FileData {\n    // Not a directory by default\n    return !!file && file.isDir === true;\n  }\n\n  public static isHidden(file: Nullable<FileData>): file is FileData {\n    // Not hidden by default\n    return !!file && file.isHidden === true;\n  }\n\n  public static isSymlink(file: Nullable<FileData>): file is FileData {\n    // Not a symlink by default\n    return !!file && file.isSymlink === true;\n  }\n\n  public static isEncrypted(file: Nullable<FileData>): file is FileData {\n    // Not encrypted by default\n    return !!file && file.isEncrypted === true;\n  }\n\n  public static isClickable(file: Nullable<FileData>): file is FileData {\n    // Clickable by default\n    return !!file;\n  }\n\n  public static isOpenable(file: Nullable<FileData>): file is FileData {\n    // Openable by default\n    return !!file && file.openable !== false;\n  }\n\n  public static isSelectable(file: Nullable<FileData>): file is FileData {\n    // Selectable by default\n    return !!file && file.selectable !== false;\n  }\n\n  public static isDraggable(file: Nullable<FileData>): file is FileData {\n    // File & folders are draggable by default, `null` is not\n    return !!file && file.draggable !== false;\n  }\n\n  public static isDroppable(file: Nullable<FileData>): file is FileData {\n    // Folders are droppable by default, files are not\n    if (!file) return false;\n    if (file.isDir && file.droppable !== false) return true;\n    return file.droppable === true;\n  }\n\n  public static isDndOpenable(file: Nullable<FileData>): file is FileData {\n    // Folders are DnD openable by default, files are not\n    if (!FileHelper.isOpenable(file)) return false;\n    if (file.isDir && file.dndOpenable !== false) return true;\n    return file.dndOpenable === true;\n  }\n\n  public static getModDate(file: Nullable<FileData>): Nullable<Date> {\n    if (!file || file.modDate === null || file.modDate === undefined) return null;\n    return FileHelper.parseDate(file.modDate);\n  }\n\n  public static parseDate(maybeDate: Date | string | any): Nullable<Date> {\n    if (typeof maybeDate === 'string' || typeof maybeDate === 'number') {\n      // We allow users to provide string and numerical representations of dates.\n      try {\n        return new Date(maybeDate);\n      } catch (error) {\n        const err = error as Error;\n        Logger.error(\n          `Could not convert provided string/number into a date: ${err.message} `,\n          'Invalid value:',\n          maybeDate,\n        );\n      }\n    }\n    if (maybeDate instanceof Date && !isNaN(maybeDate.getTime())) {\n      // We only allow valid dates objects\n      return maybeDate;\n    }\n\n    // If we have an invalid date representation, we just return null.\n    Logger.warn('Unsupported date representation:', maybeDate);\n    return null;\n  }\n\n  public static getChildrenCount(file: Nullable<FileData>): Nullable<number> {\n    if (!file || typeof file.childrenCount !== 'number') return null;\n\n    return file.childrenCount;\n  }\n}\n","import { Nullable } from 'tsdef';\n\nimport { FileAction } from '../types/action.types';\nimport { FileArray } from '../types/file.types';\nimport { Logger } from '../util/logger';\n\ninterface SanitizeFiles {\n  (mode: 'files', rawArray: FileArray | any): {\n    sanitizedArray: FileArray;\n    errorMessages: string[];\n  };\n  (mode: 'folderChain', rawArray: Nullable<FileArray> | any): {\n    sanitizedArray: FileArray;\n    errorMessages: string[];\n  };\n  (mode: 'fileActions', rawArray: FileAction[] | any): {\n    sanitizedArray: FileAction[];\n    errorMessages: string[];\n  };\n}\n\nexport const sanitizeInputArray: SanitizeFiles = (mode: string, rawArray: any[]) => {\n  const sanitizedFiles = [];\n  const errorMessages: string[] = [];\n\n  if ((mode === 'folderChain' || mode === 'fileActions') && !rawArray) {\n    // Do nothing, we allow folder chain to be null.\n  } else if (!Array.isArray(rawArray)) {\n    errorMessages.push(`Expected \"${mode}\" prop to be an array, got \"${typeof rawArray}\" instead.`);\n  } else {\n    let nonObjectFileCount = 0;\n    let missingFieldFileCount = 0;\n    const seenIds = new Set<string>();\n    const duplicateIds = new Set<string>();\n\n    for (let i = 0; i < rawArray.length; ++i) {\n      const item = rawArray[i];\n      if (!item) {\n        if (mode === 'fileActions') nonObjectFileCount++;\n        else sanitizedFiles.push(null);\n      } else if (typeof item !== 'object') {\n        nonObjectFileCount++;\n      } else {\n        if (!item.id || (mode !== 'fileActions' && !item.name)) {\n          missingFieldFileCount++;\n        } else if (seenIds.has(item.id)) {\n          duplicateIds.add(item.id);\n        } else {\n          seenIds.add(item.id);\n          sanitizedFiles.push(item);\n        }\n      }\n    }\n\n    if (nonObjectFileCount) {\n      errorMessages.push(\n        `Detected ${nonObjectFileCount} file(s) of invalid type. Remember ` +\n          `that \"files\" array should contain either objects or nulls.`,\n      );\n    }\n    if (missingFieldFileCount) {\n      errorMessages.push(\n        `Detected ${missingFieldFileCount} file(s) that are missing the ` +\n          `required fields. Remember that file object should define an ` +\n          `\"id\" and a \"name\".`,\n      );\n    }\n    if (duplicateIds.size > 0) {\n      const repeatedIdsString = '\"' + Array.from(duplicateIds).join('\", \"') + '\"';\n      errorMessages.push(\n        `Detected ${duplicateIds.size} file IDs that are used multiple ` +\n          `times. Remember that each file should have a unique IDs. The ` +\n          `following IDs were seen multiple times: ${repeatedIdsString}`,\n      );\n    }\n  }\n\n  if (errorMessages.length > 0) {\n    const errorMessageString = '\\n- ' + errorMessages.join('\\n- ');\n    let arrayString: string;\n    let itemString: string;\n    if (mode === 'folderChain') {\n      arrayString = 'folder chain';\n      itemString = 'files';\n    } else if (mode === 'fileActions') {\n      arrayString = 'file actions';\n      itemString = 'file actions';\n    } else {\n      // mode === 'files'\n      arrayString = 'files';\n      itemString = 'files';\n    }\n\n    Logger.error(\n      `Errors were detected when sanitizing the ${arrayString} array. ` +\n        `Offending ${itemString} were removed from the array. Summary of ` +\n        `validation errors: ${errorMessageString}`,\n    );\n  }\n\n  return {\n    sanitizedArray: sanitizedFiles,\n    errorMessages,\n  };\n};\n","/**\n * We have option IDs in a separate file to avoid circular deps...\n */\nexport const OptionIds = {\n  ShowHiddenFiles: 'show_hidden_files',\n  ShowFoldersFirst: 'show_folders_first',\n  DarkMode: 'dark_mode',\n};\n","import { Nullable } from 'tsdef';\n\nimport { FileData } from './file.types';\n\nexport type FileSortKeySelector = (file: Nullable<FileData>) => any;\n\nexport enum SortOrder {\n  ASC = 'asc',\n  DESC = 'desc',\n}\n","import { sort } from 'fast-sort';\nimport FuzzySearch from 'fuzzy-search';\nimport { Nilable, Nullable } from 'tsdef';\n\nimport { createSelector } from '@reduxjs/toolkit';\n\nimport { OptionIds } from '../action-definitions/option-ids';\nimport { FileArray, FileData, FileFilter } from '../types/file.types';\nimport { RootState } from '../types/redux.types';\nimport { FileSortKeySelector, SortOrder } from '../types/sort.types';\nimport { FileHelper } from '../util/file-helper';\n\n// Raw selectors\nexport const selectInstanceId = (state: RootState) => state.instanceId;\nexport const selectExternalFileActionHandler = (state: RootState) => state.externalFileActionHandler;\n\nexport const selectFileActionMap = (state: RootState) => state.fileActionMap;\nexport const selectFileActionIds = (state: RootState) => state.fileActionIds;\nexport const selectFileActionData = (fileActionId: string) => (state: RootState) =>\n  selectFileActionMap(state)[fileActionId];\nexport const selectToolbarItems = (state: RootState) => state.toolbarItems;\nexport const selectContextMenuItems = (state: RootState) => state.contextMenuItems;\n\nexport const selectFolderChain = (state: RootState) => state.folderChain;\nexport const selectCurrentFolder = (state: RootState) => {\n  const folderChain = selectFolderChain(state);\n  const currentFolder = folderChain.length > 0 ? folderChain[folderChain.length - 1] : null;\n  return currentFolder;\n};\nexport const selectParentFolder = (state: RootState) => {\n  const folderChain = selectFolderChain(state);\n  const parentFolder = folderChain.length > 1 ? folderChain[folderChain.length - 2] : null;\n  return parentFolder;\n};\n\nexport const selectRawFiles = (state: RootState) => state.rawFiles;\nexport const selectFileMap = (state: RootState) => state.fileMap;\nexport const selectCleanFileIds = (state: RootState) => state.cleanFileIds;\nexport const selectFileData = (fileId: Nullable<string>) => (state: RootState) =>\n  fileId ? selectFileMap(state)[fileId] : null;\n\nexport const selectHiddenFileIdMap = (state: RootState) => state.hiddenFileIdMap;\nexport const selectHiddenFileCount = (state: RootState) => Object.keys(selectHiddenFileIdMap(state)).length;\n\nexport const selectFocusSearchInput = (state: RootState) => state.focusSearchInput;\nexport const selectSearchString = (state: RootState) => state.searchString;\n\nexport const selectSelectionMap = (state: RootState) => state.selectionMap;\nexport const selectSelectedFileIds = (state: RootState) => Object.keys(selectSelectionMap(state));\nexport const selectSelectionSize = (state: RootState) => selectSelectedFileIds(state).length;\nexport const selectIsFileSelected = (fileId: Nullable<string>) => (state: RootState) =>\n  !!fileId && !!selectSelectionMap(state)[fileId];\nexport const selectSelectedFiles = (state: RootState) => {\n  const fileMap = selectFileMap(state);\n  return Object.keys(selectSelectionMap(state)).map((id) => fileMap[id]);\n};\nexport const selectSelectedFilesForAction = (fileActionId: string) => (state: RootState) => {\n  const { fileActionMap } = state;\n  const action = fileActionMap[fileActionId];\n  if (!action || !action.requiresSelection) return undefined;\n\n  return getSelectedFiles(state, action.fileFilter);\n};\nexport const selectSelectedFilesForActionCount = (fileActionId: string) => (state: RootState) =>\n  getSelectedFilesForAction(state, fileActionId)?.length;\nexport const selectDisableSelection = (state: RootState) => state.disableSelection;\nexport const selectForceEnableOpenParent = (state: RootState) => state.forceEnableOpenParent;\nexport const selectHideToolbarInfo = (state: RootState) => state.hideToolbarInfo;\n\nexport const selectFileViewConfig = (state: RootState) => state.fileViewConfig;\n\nexport const selectSortActionId = (state: RootState) => state.sortActionId;\nexport const selectSortOrder = (state: RootState) => state.sortOrder;\n\nexport const selectOptionMap = (state: RootState) => state.optionMap;\nexport const selectOptionValue = (optionId: string) => (state: RootState) => selectOptionMap(state)[optionId];\n\nexport const selectThumbnailGenerator = (state: RootState) => state.thumbnailGenerator;\nexport const selectDoubleClickDelay = (state: RootState) => state.doubleClickDelay;\nexport const selectIsDnDDisabled = (state: RootState) => state.disableDragAndDrop;\nexport const selectClearSelectionOnOutsideClick = (state: RootState) => state.clearSelectionOnOutsideClick;\n\nexport const selectContextMenuMounted = (state: RootState) => state.contextMenuMounted;\nexport const selectContextMenuConfig = (state: RootState) => state.contextMenuConfig;\nexport const selectContextMenuTriggerFile = (state: RootState) => {\n  const config = selectContextMenuConfig(state);\n  if (!config || !config.triggerFileId) return null;\n  const fileMap = selectFileMap(state);\n  return fileMap[config.triggerFileId] ?? null;\n};\n\n// Raw selectors\nconst getFileActionMap = (state: RootState) => state.fileActionMap;\nconst getOptionMap = (state: RootState) => state.optionMap;\nconst getFileMap = (state: RootState) => state.fileMap;\nconst getFileIds = (state: RootState) => state.fileIds;\nconst getCleanFileIds = (state: RootState) => state.cleanFileIds;\nconst getSortActionId = (state: RootState) => state.sortActionId;\nconst getSortOrder = (state: RootState) => state.sortOrder;\nconst getSearchString = (state: RootState) => state.searchString;\nconst _getLastClick = (state: RootState) => state.lastClick;\n\n// Memoized selectors\nconst makeGetAction = (fileActionSelector: (state: RootState) => Nullable<string>) =>\n  createSelector([getFileActionMap, fileActionSelector], (fileActionMap, fileActionId) =>\n    fileActionId && fileActionMap[fileActionId] ? fileActionMap[fileActionId] : null,\n  );\nconst makeGetOptionValue = (optionId: string, defaultValue: any = undefined) =>\n  createSelector([getOptionMap], (optionMap) => {\n    const value = optionMap[optionId];\n    if (value === undefined) {\n      return defaultValue;\n    }\n    return value;\n  });\nconst makeGetFiles = (fileIdsSelector: (state: RootState) => Nullable<string>[]) =>\n  createSelector(\n    [getFileMap, fileIdsSelector],\n    (fileMap, fileIds): FileArray => fileIds.map((fileId) => (fileId && fileMap[fileId] ? fileMap[fileId] : null)),\n  );\nconst getSortedFileIds = createSelector(\n  [\n    getFileIds,\n    getSortOrder,\n    makeGetFiles(getFileIds),\n    makeGetAction(getSortActionId),\n    makeGetOptionValue(OptionIds.ShowFoldersFirst, false),\n  ],\n  (fileIds, sortOrder, files, sortAction, showFolderFirst) => {\n    if (!sortAction) {\n      // We allow users to set the sort action ID to `null` if they want to use their\n      // own sorting mechanisms instead of relying on Chonky built-in sort.\n      return fileIds;\n    }\n\n    const prepareSortKeySelector = (selector: FileSortKeySelector) => (file: Nullable<FileData>) => selector(file);\n\n    const sortFunctions: {\n      asc?: (file: FileData) => any;\n      desc?: (file: FileData) => any;\n    }[] = [];\n\n    if (showFolderFirst) {\n      // If option is undefined (relevant actions is not enabled), we don't show\n      // folders first.\n      sortFunctions.push({\n        desc: prepareSortKeySelector(FileHelper.isDirectory),\n      });\n    }\n    if (sortAction.sortKeySelector) {\n      const configKeyName = sortOrder === SortOrder.ASC ? 'asc' : 'desc';\n      sortFunctions.push({\n        [configKeyName]: prepareSortKeySelector(sortAction.sortKeySelector),\n      });\n    }\n    if (sortFunctions.length === 0) return fileIds;\n\n    // We copy the array because `fast-sort` mutates it\n    const sortedFileIds = sort([...files])\n      .by(sortFunctions as any)\n      .map((file) => (file ? file.id : null));\n    return sortedFileIds;\n  },\n);\nconst getSearcher = createSelector(\n  [makeGetFiles(getCleanFileIds)],\n  (cleanFiles) => new FuzzySearch(cleanFiles as FileData[], ['name'], { caseSensitive: false }),\n);\nconst getSearchFilteredFileIds = createSelector(\n  [getCleanFileIds, getSearchString, getSearcher],\n  (cleanFileIds, searchString, searcher) =>\n    searchString ? searcher.search(searchString).map((f) => f.id) : cleanFileIds,\n);\nconst getHiddenFileIdMap = createSelector(\n  [getSearchFilteredFileIds, makeGetFiles(getCleanFileIds), makeGetOptionValue(OptionIds.ShowHiddenFiles)],\n  (searchFilteredFileIds, cleanFiles, showHiddenFiles) => {\n    const searchFilteredFileIdsSet = new Set(searchFilteredFileIds);\n    const hiddenFileIdMap: any = {};\n    cleanFiles.forEach((file) => {\n      if (!file) return;\n      else if (!searchFilteredFileIdsSet.has(file.id)) {\n        // Hidden by seach\n        hiddenFileIdMap[file.id] = true;\n      } else if (!showHiddenFiles && FileHelper.isHidden(file)) {\n        // Hidden by options\n        hiddenFileIdMap[file.id] = true;\n      }\n    });\n    return hiddenFileIdMap;\n  },\n);\nconst getDisplayFileIds = createSelector(\n  [getSortedFileIds, getHiddenFileIdMap],\n  /** Returns files that will actually be shown to the user. */\n  (sortedFileIds, hiddenFileIdMap) => sortedFileIds.filter((id) => !id || !hiddenFileIdMap[id]),\n);\nconst getLastClickIndex = createSelector(\n  [_getLastClick, getSortedFileIds],\n  /** Returns the last click index after ensuring it is actually still valid. */\n  (lastClick, displayFileIds) => {\n    if (\n      !lastClick ||\n      lastClick.index > displayFileIds.length - 1 ||\n      lastClick.fileId != displayFileIds[lastClick.index]\n    ) {\n      return null;\n    }\n    return lastClick.index;\n  },\n);\n\nexport const selectors = {\n  // Raw selectors\n  getFileActionMap,\n  getOptionMap,\n  getFileMap,\n  getFileIds,\n  getCleanFileIds,\n  getSortActionId,\n  getSortOrder,\n  getSearchString,\n  _getLastClick,\n\n  // Memoized selectors\n  getSortedFileIds,\n  getSearcher,\n  getSearchFilteredFileIds,\n  getHiddenFileIdMap,\n  getDisplayFileIds,\n  getLastClickIndex,\n\n  // Parametrized selectors\n  makeGetAction,\n  makeGetOptionValue,\n  makeGetFiles,\n};\n\n// Selectors meant to be used outside of Redux code\nexport const getFileData = (state: RootState, fileId: Nullable<string>) =>\n  fileId ? selectFileMap(state)[fileId] : null;\nexport const getIsFileSelected = (state: RootState, file: FileData) => {\n  // !!! We deliberately don't use `FileHelper.isSelectable` here as we want to\n  //     reflect the state of Redux store accurately.\n  return !!selectSelectionMap(state)[file.id];\n};\nexport const getSelectedFiles = (state: RootState, ...filters: Nilable<FileFilter>[]) => {\n  const { fileMap, selectionMap } = state;\n\n  const selectedFiles = Object.keys(selectionMap).map((id) => fileMap[id]);\n  const filteredSelectedFiles = filters.reduce(\n    (prevFiles, filter) => (filter ? prevFiles.filter(filter) : prevFiles),\n    selectedFiles,\n  );\n  return filteredSelectedFiles;\n};\nexport const getSelectedFilesForAction = (state: RootState, fileActionId: string) =>\n  selectSelectedFilesForAction(fileActionId)(state);\n","import React from 'react';\n\nexport enum ChonkyIconName {\n  // Misc\n  loading = 'loading',\n  dropdown = 'dropdown',\n  placeholder = 'placeholder',\n\n  // File Actions: Drag & drop\n  dndDragging = 'dndDragging',\n  dndCanDrop = 'dndCanDrop',\n  dndCannotDrop = 'dndCannotDrop',\n\n  // File Actions: File operations\n  openFiles = 'openFiles',\n  openParentFolder = 'openParentFolder',\n  copy = 'copy',\n  paste = 'paste',\n  share = 'share',\n  search = 'search',\n  selectAllFiles = 'selectAllFiles',\n  clearSelection = 'clearSelection',\n\n  // File Actions: Sorting & options\n  sortAsc = 'sortAsc',\n  sortDesc = 'sortDesc',\n  toggleOn = 'toggleOn',\n  toggleOff = 'toggleOff',\n\n  // File Actions: File Views\n  list = 'list',\n  compact = 'compact',\n  smallThumbnail = 'smallThumbnail',\n  largeThumbnail = 'largeThumbnail',\n\n  // File Actions: Unsorted\n  folder = 'folder',\n  folderCreate = 'folderCreate',\n  folderOpen = 'folderOpen',\n  folderChainSeparator = 'folderChainSeparator',\n  download = 'download',\n  upload = 'upload',\n  trash = 'trash',\n  fallbackIcon = 'fallbackIcon',\n\n  // File modifiers\n  symlink = 'symlink',\n  hidden = 'hidden',\n\n  // Generic file types\n  file = 'file',\n  license = 'license',\n  code = 'code',\n  config = 'config',\n  model = 'model',\n  database = 'database',\n  text = 'text',\n  archive = 'archive',\n  image = 'image',\n  video = 'video',\n  info = 'info',\n  key = 'key',\n  lock = 'lock',\n  music = 'music',\n  terminal = 'terminal',\n  users = 'users',\n\n  // OS file types\n  linux = 'linux',\n  ubuntu = 'ubuntu',\n  windows = 'windows',\n\n  // Programming language file types\n  rust = 'rust',\n  python = 'python',\n  nodejs = 'nodejs',\n  php = 'php',\n\n  // Development tools file types\n  git = 'git',\n\n  // Other program file types\n  pdf = 'pdf',\n  excel = 'excel',\n  word = 'word',\n  flash = 'flash',\n}\n\nexport interface FileIconData {\n  icon: ChonkyIconName | string;\n  colorCode: number;\n}\n\nexport interface ChonkyIconProps {\n  icon: ChonkyIconName | string;\n  spin?: boolean;\n  className?: string;\n  fixedWidth?: boolean;\n  style?: React.CSSProperties;\n}\n","import { Nilable } from 'tsdef';\n\nimport { ChonkyActions, DefaultFileActions, EssentialFileActions } from '../../action-definitions/index';\nimport { FileActionGroup, FileActionMenuItem } from '../../types/action-menus.types';\nimport { FileAction } from '../../types/action.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { ChonkyThunk } from '../../types/redux.types';\nimport { SortOrder } from '../../types/sort.types';\nimport { sanitizeInputArray } from '../files-transforms';\nimport { reduxActions } from '../reducers';\nimport { selectCleanFileIds, selectFileMap, selectHiddenFileIdMap, selectSelectionMap } from '../selectors';\n\n/**\n * Merges multiple file action arrays into one while removing duplicates\n */\nconst mergeFileActionsArrays = (...fileActionArrays: FileAction[][]): FileAction[] => {\n  const seenActionIds = new Set<string>();\n  const addToSeen = (a: FileAction) => !!seenActionIds.add(a.id);\n  const wasNotSeen = (a: FileAction) => !seenActionIds.has(a.id);\n\n  const duplicateFreeArrays = fileActionArrays.map((arr) => {\n    const duplicateFreeArray = arr.filter(wasNotSeen);\n    duplicateFreeArray.map(addToSeen);\n    return duplicateFreeArray;\n  });\n  return new Array<FileAction>().concat(...duplicateFreeArrays);\n};\n\nexport const thunkUpdateRawFileActions =\n  (rawFileActions: FileAction[] | any, disableDefaultFileActions: Nilable<boolean | string[]>): ChonkyThunk =>\n  (dispatch) => {\n    const { sanitizedArray, errorMessages } = sanitizeInputArray('fileActions', rawFileActions);\n\n    // Add default actions unless user disabled them\n    let defaultActionsToAdd: FileAction[];\n    if (Array.isArray(disableDefaultFileActions)) {\n      const disabledActionIds = new Set(disableDefaultFileActions);\n      defaultActionsToAdd = DefaultFileActions.filter((action) => !disabledActionIds.has(action.id));\n    } else if (disableDefaultFileActions) {\n      defaultActionsToAdd = [];\n    } else {\n      defaultActionsToAdd = DefaultFileActions;\n    }\n\n    const fileActions = mergeFileActionsArrays(sanitizedArray, EssentialFileActions, defaultActionsToAdd);\n    const optionDefaults: any = {};\n    fileActions.map((a) => (a.option ? (optionDefaults[a.option.id] = a.option.defaultValue) : null));\n\n    dispatch(reduxActions.setRawFileActions(rawFileActions));\n    dispatch(reduxActions.setFileActionsErrorMessages(errorMessages));\n    dispatch(reduxActions.setFileActions(fileActions));\n    dispatch(reduxActions.setOptionDefaults(optionDefaults));\n    dispatch(thunkUpdateToolbarNContextMenuItems(fileActions));\n  };\n\nexport const thunkUpdateToolbarNContextMenuItems =\n  (fileActions: FileAction[]): ChonkyThunk =>\n  (dispatch) => {\n    const excludedToolbarFileActionIds = new Set<string>([\n      // TODO: Move decision to exclude actions somewhere else, as users' custom\n      //  components might not give these actions special treatment like Chonky does.\n      ChonkyActions.OpenParentFolder.id,\n    ]);\n\n    // TODO: Move decision to set icons somewhere else, as users' custom\n    //  components might not give these group names special treatment.\n    const groupIcons: Record<string, ChonkyIconName> = {\n      Actions: ChonkyIconName.dropdown,\n      Options: ChonkyIconName.config,\n    };\n    const groupSortOrder: Record<string, number> = {\n      Options: 0,\n      Actions: 1,\n    };\n\n    type SeenGroupMap = { [groupName: string]: FileActionGroup };\n\n    const toolbarItems: FileActionMenuItem[] = [];\n    const toolbarGroupItems: FileActionGroup[] = [];\n    const seenToolbarGroups: SeenGroupMap = {};\n\n    const contextMenuItems: FileActionMenuItem[] = [];\n    const seenContextMenuGroups: SeenGroupMap = {};\n\n    const getGroup = (itemArray: FileActionMenuItem[], seenMap: SeenGroupMap, groupName: string): FileActionGroup => {\n      if (seenMap[groupName]) return seenMap[groupName];\n      const group: FileActionGroup = {\n        name: groupName,\n        icon: groupIcons[groupName] || null,\n        sortOrder: groupSortOrder[groupName] || -1,\n        fileActionIds: [],\n      };\n      itemArray.push(group);\n      seenMap[groupName] = group;\n      return group;\n    };\n\n    for (const action of fileActions) {\n      const button = action.button;\n      if (!button) continue;\n\n      if (button.toolbar && !excludedToolbarFileActionIds.has(action.id)) {\n        if (button.group) {\n          const group = getGroup(toolbarGroupItems, seenToolbarGroups, button.group);\n          group.fileActionIds.push(action.id);\n        } else {\n          toolbarItems.push(action.id);\n        }\n      }\n\n      if (button.contextMenu) {\n        if (button.group) {\n          const group = getGroup(contextMenuItems, seenContextMenuGroups, button.group);\n          group.fileActionIds.push(action.id);\n        } else {\n          contextMenuItems.push(action.id);\n        }\n      }\n    }\n\n    toolbarGroupItems.sort((a, b) => a.sortOrder - b.sortOrder);\n    dispatch(reduxActions.updateFileActionMenuItems([[...toolbarItems, ...toolbarGroupItems], contextMenuItems]));\n  };\n\nexport const thunkUpdateDefaultFileViewActionId =\n  (fileActionId: Nilable<string>): ChonkyThunk =>\n  (dispatch, getState) => {\n    const { fileActionMap } = getState();\n    const action = fileActionId ? fileActionMap[fileActionId] : null;\n    if (action && action.fileViewConfig) {\n      dispatch(reduxActions.setFileViewConfig(action.fileViewConfig));\n    }\n  };\n\nexport const thunkActivateSortAction =\n  (fileActionId: Nilable<string>): ChonkyThunk =>\n  (dispatch, getState) => {\n    if (!fileActionId) return;\n\n    const { sortActionId: oldActionId, sortOrder: oldOrder, fileActionMap } = getState();\n    const action = fileActionMap[fileActionId];\n    if (!action || !action.sortKeySelector) return;\n\n    let order = oldOrder === SortOrder.ASC ? SortOrder.DESC : SortOrder.ASC;\n    if (oldActionId !== fileActionId) {\n      order = SortOrder.ASC;\n    }\n\n    dispatch(reduxActions.setSort({ actionId: fileActionId, order: order }));\n  };\n\nexport const thunkApplySelectionTransform =\n  (action: FileAction): ChonkyThunk =>\n  (dispatch, getState) => {\n    const selectionTransform = action.selectionTransform;\n    if (!selectionTransform) return;\n\n    const state = getState();\n    const prevSelection = new Set<string>(Object.keys(selectSelectionMap(state)));\n    const hiddenFileIds = new Set<string>(Object.keys(selectHiddenFileIdMap(state)));\n\n    const newSelection = selectionTransform({\n      prevSelection,\n      fileIds: selectCleanFileIds(state),\n      fileMap: selectFileMap(state),\n      hiddenFileIds,\n    });\n    if (!newSelection) return;\n\n    if (newSelection.size === 0) {\n      dispatch(reduxActions.clearSelection());\n    } else {\n      dispatch(reduxActions.selectFiles({ fileIds: Array.from(newSelection), reset: true }));\n    }\n  };\n","import { MaybePromise, Undefinable } from 'tsdef';\n\nimport { FileActionData, FileActionState } from '../../types/action-handler.types';\nimport { FileAction } from '../../types/action.types';\nimport { ChonkyDispatch, ChonkyThunk } from '../../types/redux.types';\nimport { Logger } from '../../util/logger';\nimport { reduxActions } from '../reducers';\nimport {\n  selectContextMenuTriggerFile,\n  selectExternalFileActionHandler,\n  selectFileActionMap,\n  selectInstanceId,\n  selectSelectedFiles,\n} from '../selectors';\nimport { thunkActivateSortAction, thunkApplySelectionTransform } from './file-actions.thunks';\n\n/**\n * Thunk that dispatches actions to the external (user-provided) action handler.\n */\nexport const thunkDispatchFileAction =\n  (data: FileActionData<FileAction>): ChonkyThunk =>\n  (_dispatch, getState) => {\n    Logger.debug(`FILE ACTION DISPATCH: [${data.id}]`, 'data:', data);\n    const state = getState();\n    const action = selectFileActionMap(state)[data.id];\n    const externalFileActionHandler = selectExternalFileActionHandler(state);\n    if (action) {\n      if (externalFileActionHandler) {\n        Promise.resolve(externalFileActionHandler(data)).catch((error) =>\n          Logger.error(`User-defined file action handler threw an error: ${error.message}`),\n        );\n      }\n    } else {\n      Logger.warn(\n        `Internal components dispatched the \"${data.id}\" file action, but such ` + `action was not registered.`,\n      );\n    }\n  };\n\n/**\n * Thunk that is used by internal components (and potentially the user) to \"request\"\n * actions. When action is requested, Chonky \"prepares\" the action data by extracting it\n * from Redux state. Once action data is ready, Chonky executes some side effect and/or\n * dispatches the action to the external action handler.\n */\nexport const thunkRequestFileAction =\n  <Action extends FileAction>(action: Action, payload: Action['__payloadType']): ChonkyThunk =>\n  (dispatch, getState) => {\n    Logger.debug(`FILE ACTION REQUEST: [${action.id}]`, 'action:', action, 'payload:', payload);\n    const state = getState();\n    const instanceId = selectInstanceId(state);\n\n    if (!selectFileActionMap(state)[action.id]) {\n      Logger.warn(\n        `The action \"${action.id}\" was requested, but it is not registered. The ` +\n          `action will still be dispatched, but this might indicate a bug in ` +\n          `the code. Please register your actions by passing them to ` +\n          `\"fileActions\" prop.`,\n      );\n    }\n\n    // Determine files for the action if action requires selection\n    const selectedFiles = selectSelectedFiles(state);\n    const selectedFilesForAction = action.fileFilter ? selectedFiles.filter(action.fileFilter) : selectedFiles;\n    if (action.requiresSelection && selectedFilesForAction.length === 0) {\n      Logger.warn(\n        `Internal components requested the \"${action.id}\" file ` +\n          `action, but the selection for this action was empty. This ` +\n          `might a bug in the code of the presentational components.`,\n      );\n      return;\n    }\n\n    const contextMenuTriggerFile = selectContextMenuTriggerFile(state);\n    const actionState: FileActionState<{}> = {\n      instanceId,\n      selectedFiles,\n      selectedFilesForAction,\n      contextMenuTriggerFile,\n    };\n\n    // === Update sort state if necessary\n    const sortKeySelector = action.sortKeySelector;\n    if (sortKeySelector) dispatch(thunkActivateSortAction(action.id));\n\n    // === Update file view state if necessary\n    const fileViewConfig = action.fileViewConfig;\n    if (fileViewConfig) dispatch(reduxActions.setFileViewConfig(fileViewConfig));\n\n    // === Update option state if necessary\n    const option = action.option;\n    if (option) dispatch(reduxActions.toggleOption(option.id));\n\n    // === Apply selection transform if necessary\n    const selectionTransform = action.selectionTransform;\n    if (selectionTransform) dispatch(thunkApplySelectionTransform(action));\n\n    // Apply the effect\n    const effect = action.effect;\n    let maybeEffectPromise: MaybePromise<boolean | undefined> = undefined;\n    if (effect) {\n      try {\n        maybeEffectPromise = effect({\n          action,\n          payload,\n          state: actionState,\n          reduxDispatch: dispatch,\n          getReduxState: getState,\n        }) as MaybePromise<boolean | undefined>;\n      } catch (err) {\n        const error = err as Error;\n        Logger.error(`User-defined effect function for action ${action.id} threw an ` + `error: ${error.message}`);\n      }\n    }\n\n    // Dispatch the action to user code. Deliberately call it after all other\n    // operations are over.\n    return Promise.resolve(maybeEffectPromise)\n      .then((effectResult) => {\n        const data: FileActionData<Action> = {\n          id: action.id,\n          action,\n          payload,\n          state: actionState,\n        };\n        triggerDispatchAfterEffect(dispatch, data, effectResult);\n      })\n      .catch((error) => {\n        Logger.error(\n          `User-defined effect function for action ${action.id} returned a ` +\n            `promise that was rejected: ${error.message}`,\n        );\n        const data: FileActionData<Action> = {\n          id: action.id,\n          action,\n          payload,\n          state: actionState,\n        };\n        triggerDispatchAfterEffect(dispatch, data, undefined);\n      });\n  };\n\nexport const triggerDispatchAfterEffect = <Action extends FileAction>(\n  dispatch: ChonkyDispatch,\n  data: FileActionData<Action>,\n  effectResult: Undefinable<boolean>,\n) => {\n  const preventDispatch = effectResult === true;\n  if (!preventDispatch) dispatch(thunkDispatchFileAction(data));\n};\n","export enum FileViewMode {\n  List = 'list',\n  Compact = 'compact',\n  Grid = 'grid',\n}\n\nexport type FileViewConfigList = {\n  mode: FileViewMode.List;\n  entryHeight: number;\n};\n\nexport type FileViewConfigGrid = {\n  mode: FileViewMode.Compact | FileViewMode.Grid;\n  entryWidth: number;\n  entryHeight: number;\n};\n\nexport type FileViewConfig = FileViewConfigList | FileViewConfigGrid;\n","// Used in React hooks to indicate empty deps are intentional.\nimport { MaybePromise, Nullable, WritableProps } from 'tsdef';\n\nimport { FileAction, FileActionEffect } from '../types/action.types';\nimport { Logger } from './logger';\n\n// Used in contexts that need to provide some default value for a function.\n// eslint-disable-next-line no-unused-vars,@typescript-eslint/no-unused-vars\nexport const NOOP_FUNCTION = (...args: any[]) => {\n  Logger.warn(\n    `The \"NOOP_FUNCTION\" from the constants module was called. ` +\n      `This can indicate a bug in one of the components. Supplied args:`,\n    args,\n  );\n};\n\nexport const isPromise = <T>(value: MaybePromise<T> | any): value is Promise<T> => {\n  if (typeof value !== 'object' || !value) return false;\n  const then = (value as Promise<T>).then;\n  return then && typeof then === 'function';\n};\n\nexport const defineFileAction = <Action extends FileAction>(\n  action: Action,\n  effect?: FileActionEffect<FileAction>,\n): WritableProps<Action> => {\n  if (action.__payloadType !== undefined && (action.hotkeys || action.button)) {\n    const errorMessage =\n      `Invalid definition was provided for file action \"${action.id}\". Actions ` +\n      `that specify hotkeys or buttons cannot define a payload type. If ` +\n      `your application requires this functionality, define two actions ` +\n      `and chain them using effects.`;\n    Logger.error(errorMessage);\n    throw new Error(errorMessage);\n  }\n\n  action.effect = effect;\n  return action;\n};\n\n/**\n * Recursively check the current element and the parent elements, going bottom-up.\n * Returns the first element to match the predicate, otherwise returns null if such\n * element is not found.\n */\nexport const findElementAmongAncestors = (\n  maybeElement: HTMLElement | any,\n  predicate: (maybeElement: HTMLElement | any) => boolean,\n): Nullable<HTMLElement> => {\n  if (!maybeElement) return maybeElement;\n\n  if (predicate(maybeElement)) return maybeElement;\n\n  if (maybeElement.parentElement) {\n    return findElementAmongAncestors(maybeElement.parentElement, predicate);\n  }\n\n  return null;\n};\n\nexport const elementIsInsideButton = (buttonCandidate: HTMLElement | any): boolean => {\n  return !!findElementAmongAncestors(\n    buttonCandidate,\n    (element: any) => element.tagName && element.tagName.toLowerCase() === 'button',\n  );\n};\n\nexport const getValueOrFallback = <T extends any>(\n  value: T | undefined,\n  fallback: T,\n  desiredType?: 'boolean' | 'string' | 'number',\n): NonNullable<T> => {\n  if (desiredType) {\n    return (typeof value === desiredType ? value : fallback) as NonNullable<T>;\n  }\n  return (value !== undefined ? value : fallback) as NonNullable<T>;\n};\n","import { ChonkyThunk } from '../../types/redux.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { reduxActions } from '../reducers';\nimport { selectors } from '../selectors';\n\nexport const reduxThunks = {\n  selectRange:\n    (params: { rangeStart: number; rangeEnd: number; reset?: boolean }): ChonkyThunk =>\n    (dispatch, getState) => {\n      const state = getState();\n      if (state.disableSelection) return;\n      const displayFileIds = selectors.getDisplayFileIds(state);\n      const fileIdsToSelect = displayFileIds\n        .slice(params.rangeStart, params.rangeEnd + 1)\n        .filter((id) => id && FileHelper.isSelectable(state.fileMap[id])) as string[];\n      dispatch(\n        reduxActions.selectFiles({\n          fileIds: fileIdsToSelect,\n          reset: !!params.reset,\n        }),\n      );\n    },\n};\n","import { reduxActions } from '../redux/reducers';\nimport {\n  getFileData,\n  getIsFileSelected,\n  selectDisableSelection,\n  selectors,\n  selectParentFolder,\n  selectSelectionSize,\n} from '../redux/selectors';\nimport { reduxThunks } from '../redux/thunks';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport {\n  ChangeSelectionPayload,\n  EndDragNDropPayload,\n  KeyboardClickFilePayload,\n  MouseClickFilePayload,\n  MoveFilesPayload,\n  OpenFileContextMenuPayload,\n  OpenFilesPayload,\n  StartDragNDropPayload,\n} from '../types/action-payloads.types';\nimport { ChonkyIconName } from '../types/icons.types';\nimport { FileHelper } from '../util/file-helper';\nimport { defineFileAction } from '../util/helpers';\nimport { Logger } from '../util/logger';\nimport { ChonkyActions } from './index';\n\nexport const EssentialActions = {\n  /**\n   * Action that is dispatched when the user clicks on a file entry using their mouse.\n   * Both single clicks and double clicks trigger this action.\n   */\n  MouseClickFile: defineFileAction(\n    {\n      id: 'mouse_click_file',\n      __payloadType: {} as MouseClickFilePayload,\n    } as const,\n    ({ payload, reduxDispatch, getReduxState }) => {\n      if (payload.clickType === 'double') {\n        if (FileHelper.isOpenable(payload.file)) {\n          reduxDispatch(\n            thunkRequestFileAction(ChonkyActions.OpenFiles, {\n              targetFile: payload.file,\n\n              // To simulate Windows Explorer and Nautilus behaviour,\n              // a double click on a file only opens that file even if\n              // there is a selection.\n              files: [payload.file],\n            }),\n          );\n        }\n      } else {\n        // We're dealing with a single click\n\n        const disableSelection = selectDisableSelection(getReduxState());\n        if (FileHelper.isSelectable(payload.file) && !disableSelection) {\n          if (payload.ctrlKey) {\n            // Multiple selection\n            reduxDispatch(\n              reduxActions.toggleSelection({\n                fileId: payload.file.id,\n                exclusive: false,\n              }),\n            );\n            reduxDispatch(\n              reduxActions.setLastClickIndex({\n                index: payload.fileDisplayIndex,\n                fileId: payload.file.id,\n              }),\n            );\n          } else if (payload.shiftKey) {\n            // Range selection\n            const lastClickIndex = selectors.getLastClickIndex(getReduxState());\n            if (typeof lastClickIndex === 'number') {\n              // We have the index of the previous click\n              let rangeStart = lastClickIndex;\n              let rangeEnd = payload.fileDisplayIndex;\n              if (rangeStart > rangeEnd) {\n                [rangeStart, rangeEnd] = [rangeEnd, rangeStart];\n              }\n\n              reduxDispatch(reduxThunks.selectRange({ rangeStart, rangeEnd }));\n            } else {\n              // Since we can't do a range selection, do a\n              // multiple selection\n              reduxDispatch(\n                reduxActions.toggleSelection({\n                  fileId: payload.file.id,\n                  exclusive: false,\n                }),\n              );\n              reduxDispatch(\n                reduxActions.setLastClickIndex({\n                  index: payload.fileDisplayIndex,\n                  fileId: payload.file.id,\n                }),\n              );\n            }\n          } else {\n            // Exclusive selection\n            reduxDispatch(\n              reduxActions.toggleSelection({\n                fileId: payload.file.id,\n                exclusive: true,\n              }),\n            );\n            reduxDispatch(\n              reduxActions.setLastClickIndex({\n                index: payload.fileDisplayIndex,\n                fileId: payload.file.id,\n              }),\n            );\n          }\n        } else {\n          if (!payload.ctrlKey && !disableSelection) {\n            reduxDispatch(reduxActions.clearSelection());\n          }\n          reduxDispatch(\n            reduxActions.setLastClickIndex({\n              index: payload.fileDisplayIndex,\n              fileId: payload.file.id,\n            }),\n          );\n        }\n      }\n    },\n  ),\n  /**\n   * Action that is dispatched when the user \"clicks\" on a file using their keyboard.\n   * Using Space and Enter keys counts as clicking.\n   */\n  KeyboardClickFile: defineFileAction(\n    {\n      id: 'keyboard_click_file',\n      __payloadType: {} as KeyboardClickFilePayload,\n    } as const,\n    ({ payload, reduxDispatch, getReduxState }) => {\n      reduxDispatch(\n        reduxActions.setLastClickIndex({\n          index: payload.fileDisplayIndex,\n          fileId: payload.file.id,\n        }),\n      );\n      if (payload.enterKey) {\n        // We only dispatch the Open Files action here when the selection is\n        // empty. Otherwise, `Enter` key presses are handled by the\n        // hotkey manager for the Open Files action.\n        if (selectSelectionSize(getReduxState()) === 0) {\n          reduxDispatch(\n            thunkRequestFileAction(ChonkyActions.OpenFiles, {\n              targetFile: payload.file,\n              files: [payload.file],\n            }),\n          );\n        }\n      } else if (payload.spaceKey && FileHelper.isSelectable(payload.file)) {\n        reduxDispatch(\n          reduxActions.toggleSelection({\n            fileId: payload.file.id,\n            exclusive: payload.ctrlKey,\n          }),\n        );\n      }\n    },\n  ),\n  /**\n   * Action that is dispatched when user starts dragging some file.\n   */\n  StartDragNDrop: defineFileAction(\n    {\n      id: 'start_drag_n_drop',\n      __payloadType: {} as StartDragNDropPayload,\n    } as const,\n    ({ payload, reduxDispatch, getReduxState }) => {\n      const file = payload.draggedFile;\n      if (!getIsFileSelected(getReduxState(), file)) {\n        if (FileHelper.isSelectable(file)) {\n          reduxDispatch(\n            reduxActions.selectFiles({\n              fileIds: [file.id],\n              reset: true,\n            }),\n          );\n        }\n      }\n    },\n  ),\n  /**\n   * Action that is dispatched when user either cancels the drag & drop interaction,\n   * or drops a file somewhere.\n   */\n  EndDragNDrop: defineFileAction(\n    {\n      id: 'end_drag_n_drop',\n      __payloadType: {} as EndDragNDropPayload,\n    } as const,\n    ({ payload, reduxDispatch, getReduxState }) => {\n      if (getIsFileSelected(getReduxState(), payload.destination)) {\n        // Can't drop a selection into itself\n        return;\n      }\n\n      const { draggedFile, selectedFiles } = payload as EndDragNDropPayload;\n      const droppedFiles = selectedFiles.length > 0 ? selectedFiles : [draggedFile];\n      reduxDispatch(\n        thunkRequestFileAction(ChonkyActions.MoveFiles, {\n          ...payload,\n          files: droppedFiles,\n        }),\n      );\n    },\n  ),\n  /**\n   * Action that is dispatched when user moves files from one folder to another,\n   * usually by dragging & dropping some files into the folder.\n   */\n  MoveFiles: defineFileAction({\n    id: 'move_files',\n    __payloadType: {} as MoveFilesPayload,\n  } as const),\n  /**\n   * Action that is dispatched when the selection changes for any reason.\n   */\n  ChangeSelection: defineFileAction({\n    id: 'change_selection',\n    __payloadType: {} as ChangeSelectionPayload,\n  } as const),\n  /**\n   * Action that is dispatched when user wants to open some files. This action is\n   * often triggered by other actions.\n   */\n  OpenFiles: defineFileAction({\n    id: 'open_files',\n    __payloadType: {} as OpenFilesPayload,\n  } as const),\n  /**\n   * Action that is triggered when user wants to go up a directory.\n   */\n  OpenParentFolder: defineFileAction(\n    {\n      id: 'open_parent_folder',\n      hotkeys: ['backspace'],\n      button: {\n        name: 'Go up a directory',\n        toolbar: true,\n        contextMenu: false,\n        icon: ChonkyIconName.openParentFolder,\n        iconOnly: true,\n      },\n    } as const,\n    ({ reduxDispatch, getReduxState }) => {\n      const reduxState = getReduxState();\n      const parentFolder = selectParentFolder(reduxState);\n      if (FileHelper.isOpenable(parentFolder)) {\n        reduxDispatch(\n          thunkRequestFileAction(ChonkyActions.OpenFiles, {\n            targetFile: parentFolder,\n            files: [parentFolder],\n          }),\n        );\n      } else if (!reduxState.forceEnableOpenParent) {\n        Logger.warn(\n          'Open parent folder effect was triggered even though the parent folder' +\n            ' is not openable. This indicates a bug in presentation components.',\n        );\n      }\n    },\n  ),\n  /**\n   * Action that is dispatched when user opens the context menu, either by right click\n   * on something or using the context menu button on their keyboard.\n   */\n  OpenFileContextMenu: defineFileAction(\n    {\n      id: 'open_file_context_menu',\n      __payloadType: {} as OpenFileContextMenuPayload,\n    } as const,\n    ({ payload, reduxDispatch, getReduxState }) => {\n      // TODO: Check if the context menu component is actually enabled. There is a\n      //  chance it doesn't matter if it is enabled or not - if it is not mounted,\n      //  the action will simply have no effect. It also allows users to provide\n      //  their own components - however, users could also flip the \"context menu\n      //  component mounted\" switch...\n      const triggerFile = getFileData(getReduxState(), payload.triggerFileId);\n      if (triggerFile) {\n        const fileSelected = getIsFileSelected(getReduxState(), triggerFile);\n        if (!fileSelected) {\n          // If file is selected, we leave the selection as is. If it is not\n          // selected, it means user right clicked the file with no selection.\n          // We simulate the Windows Explorer/Nautilus behaviour of moving\n          // selection to this file.\n          if (FileHelper.isSelectable(triggerFile)) {\n            reduxDispatch(\n              reduxActions.selectFiles({\n                fileIds: [payload.triggerFileId],\n                reset: true,\n              }),\n            );\n          } else {\n            reduxDispatch(reduxActions.clearSelection());\n          }\n        }\n      }\n\n      reduxDispatch(\n        reduxActions.showContextMenu({\n          triggerFileId: payload.triggerFileId,\n          mouseX: payload.clientX - 2,\n          mouseY: payload.clientY - 4,\n        }),\n      );\n    },\n  ),\n};\n","import { Nullable } from 'tsdef';\n\nimport { selectFocusSearchInput } from '../redux/selectors';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { FileSelectionTransform } from '../types/action.types';\nimport { FileViewMode } from '../types/file-view.types';\nimport { FileData } from '../types/file.types';\nimport { ChonkyIconName } from '../types/icons.types';\nimport { FileHelper } from '../util/file-helper';\nimport { defineFileAction } from '../util/helpers';\nimport { EssentialActions } from './essential';\nimport { OptionIds } from './option-ids';\n\nexport const DefaultActions = {\n  /**\n   * Action that can be used to open currently selected files.\n   */\n  OpenSelection: defineFileAction(\n    {\n      id: 'open_selection',\n      hotkeys: ['enter'],\n      requiresSelection: true,\n      fileFilter: FileHelper.isOpenable,\n      button: {\n        name: 'Open selection',\n        toolbar: true,\n        contextMenu: true,\n        group: 'Actions',\n        icon: ChonkyIconName.openFiles,\n      },\n    } as const,\n    ({ state, reduxDispatch }) => {\n      reduxDispatch(\n        thunkRequestFileAction(EssentialActions.OpenFiles, {\n          files: state.selectedFilesForAction!,\n        }),\n      );\n      return undefined;\n    },\n  ),\n  /**\n   * Action that selects all files.\n   */\n  SelectAllFiles: defineFileAction({\n    id: 'select_all_files',\n    hotkeys: ['ctrl+a'],\n    button: {\n      name: 'Select all files',\n      toolbar: true,\n      contextMenu: true,\n      group: 'Actions',\n      icon: ChonkyIconName.selectAllFiles,\n    },\n    selectionTransform: (({ fileIds, hiddenFileIds }) => {\n      const newSelection = new Set<string>();\n      fileIds.map((fileId) => {\n        // We don't need to check if file is selectable because Chonky does\n        // it own checks internally.\n        if (!hiddenFileIds.has(fileId)) newSelection.add(fileId);\n      });\n      return newSelection;\n    }) as FileSelectionTransform,\n  } as const),\n  /**\n   * Action that clear the file selection.\n   */\n  ClearSelection: defineFileAction({\n    id: 'clear_selection',\n    hotkeys: ['escape'],\n    button: {\n      name: 'Clear selection',\n      toolbar: true,\n      contextMenu: true,\n      group: 'Actions',\n      icon: ChonkyIconName.clearSelection,\n    },\n    selectionTransform: (({ prevSelection }) => {\n      if (prevSelection.size === 0) return null;\n      return new Set<string>();\n    }) as FileSelectionTransform,\n  } as const),\n  /**\n   * Action that enables List view.\n   */\n  EnableListView: defineFileAction({\n    id: 'enable_list_view',\n    fileViewConfig: {\n      mode: FileViewMode.List,\n      entryHeight: 30,\n    },\n    button: {\n      name: 'Switch to List',\n      toolbar: true,\n      icon: ChonkyIconName.list,\n      // iconOnly: true,\n      group: 'Options',\n    },\n  } as const),\n  /**\n   * Action that enables Compact view. Note that compact view is still\n   * experimental and should not be used in production.\n   */\n  EnableCompactView: defineFileAction({\n    // TODO: Don't enable until compact view is fully supported\n    id: 'enable_compact_view',\n    fileViewConfig: {\n      mode: FileViewMode.Compact,\n      entryHeight: 40,\n      entryWidth: 220,\n    },\n    button: {\n      name: 'Switch to Compact',\n      toolbar: true,\n      icon: ChonkyIconName.compact,\n      // iconOnly: true,\n      group: 'Options',\n    },\n  } as const),\n  /**\n   * Action that enables Grid view.\n   */\n  EnableGridView: defineFileAction({\n    id: 'enable_grid_view',\n    fileViewConfig: { mode: FileViewMode.Grid, entryWidth: 100, entryHeight: 100 },\n    button: {\n      name: 'Switch to Grid',\n      toolbar: true,\n      icon: ChonkyIconName.smallThumbnail,\n      // iconOnly: true,\n      group: 'Options',\n    },\n  } as const),\n  /**\n   * Action that sorts files by `file.name`.\n   */\n  SortFilesByName: defineFileAction({\n    id: 'sort_files_by_name',\n    sortKeySelector: (file: Nullable<FileData>) => (file ? file.name.toLowerCase() : undefined),\n    button: {\n      name: 'Sort by name',\n      toolbar: true,\n      group: 'Options',\n    },\n  } as const),\n  /**\n   * Action that sorts files by `file.size`.\n   */\n  SortFilesBySize: defineFileAction({\n    id: 'sort_files_by_size',\n    sortKeySelector: (file: Nullable<FileData>) => (file ? file.size : undefined),\n    button: {\n      name: 'Sort by size',\n      toolbar: true,\n      group: 'Options',\n    },\n  } as const),\n  /**\n   * Action that sorts files by `file.modDate`.\n   */\n  SortFilesByDate: defineFileAction({\n    id: 'sort_files_by_date',\n    sortKeySelector: (file: Nullable<FileData>) => (file ? file.modDate : undefined),\n    button: {\n      name: 'Sort by date',\n      toolbar: true,\n      group: 'Options',\n    },\n  } as const),\n  /**\n   * Action that toggles whether hidden files are shown to the user or not.\n   */\n  ToggleHiddenFiles: defineFileAction({\n    id: 'toggle_hidden_files',\n    hotkeys: ['ctrl+h'],\n    option: {\n      id: OptionIds.ShowHiddenFiles,\n      defaultValue: true,\n    },\n    button: {\n      name: 'Show hidden files',\n      toolbar: true,\n      group: 'Options',\n    },\n  } as const),\n  /**\n   * Action that toggles whether folders should appear before files regardless of\n   * current sort function.\n   */\n  ToggleShowFoldersFirst: defineFileAction({\n    id: 'toggle_show_folders_first',\n    option: {\n      id: OptionIds.ShowFoldersFirst,\n      defaultValue: true,\n    },\n    button: {\n      name: 'Show folders first',\n      toolbar: true,\n      group: 'Options',\n    },\n  } as const),\n  /**\n   * Action that focuses the search input when it is dispatched.\n   */\n  FocusSearchInput: defineFileAction(\n    {\n      id: 'focus_search_input',\n      hotkeys: ['ctrl+f'],\n    } as const,\n    ({ getReduxState }) => {\n      const focusSearchInput = selectFocusSearchInput(getReduxState());\n      if (focusSearchInput) focusSearchInput();\n    },\n  ),\n  /**\n   * Action that enables List view.\n   */\n  ToggleDarkMode: defineFileAction({\n    id: 'enable_dark_mode',\n    option: {\n      id: OptionIds.DarkMode,\n      defaultValue: false,\n    },\n    button: {\n      name: 'Enable dark mode',\n      toolbar: true,\n      icon: ChonkyIconName.list,\n      iconOnly: true,\n    },\n  } as const),\n};\n","import { ChonkyIconName } from '../types/icons.types';\nimport { defineFileAction } from '../util/helpers';\n\nexport const ExtraActions = {\n  /**\n   * Action that adds a button and shortcut to copy files.\n   */\n  CopyFiles: defineFileAction({\n    id: 'copy_files',\n    requiresSelection: true,\n    hotkeys: ['ctrl+c'],\n    button: {\n      name: 'Copy selection',\n      toolbar: true,\n      contextMenu: true,\n      group: 'Actions',\n      icon: ChonkyIconName.copy,\n    },\n  } as const),\n  /**\n   * Action that adds a button to create a new folder.\n   */\n  CreateFolder: defineFileAction({\n    id: 'create_folder',\n    button: {\n      name: 'Create folder',\n      toolbar: true,\n      tooltip: 'Create a folder',\n      icon: ChonkyIconName.folderCreate,\n    },\n  } as const),\n  /**\n   * Action that adds a button to upload files.\n   */\n  UploadFiles: defineFileAction({\n    id: 'upload_files',\n    button: {\n      name: 'Upload files',\n      toolbar: true,\n      tooltip: 'Upload files',\n      icon: ChonkyIconName.upload,\n    },\n  } as const),\n  /**\n   * Action that adds a button to download files.\n   */\n  DownloadFiles: defineFileAction({\n    id: 'download_files',\n    requiresSelection: true,\n    button: {\n      name: 'Download files',\n      toolbar: true,\n      contextMenu: true,\n      group: 'Actions',\n      icon: ChonkyIconName.download,\n    },\n  } as const),\n  /**\n   * Action that adds a button and shortcut to delete files.\n   */\n  DeleteFiles: defineFileAction({\n    id: 'delete_files',\n    requiresSelection: true,\n    hotkeys: ['delete'],\n    button: {\n      name: 'Delete files',\n      toolbar: true,\n      contextMenu: true,\n      group: 'Actions',\n      icon: ChonkyIconName.trash,\n    },\n  } as const),\n};\n","import { DefaultActions } from './default';\nimport { EssentialActions } from './essential';\nimport { ExtraActions } from './extra';\n\nexport { OptionIds } from './option-ids';\n\nexport const ChonkyActions = {\n  ...EssentialActions,\n  ...DefaultActions,\n  ...ExtraActions,\n};\n\nexport const EssentialFileActions = [\n  ChonkyActions.MouseClickFile,\n  ChonkyActions.KeyboardClickFile,\n  ChonkyActions.StartDragNDrop,\n  ChonkyActions.EndDragNDrop,\n  ChonkyActions.MoveFiles,\n  ChonkyActions.ChangeSelection,\n  ChonkyActions.OpenFiles,\n  ChonkyActions.OpenParentFolder,\n  ChonkyActions.OpenFileContextMenu,\n];\n\nexport const DefaultFileActions = [\n  ChonkyActions.OpenSelection,\n  ChonkyActions.SelectAllFiles,\n  ChonkyActions.ClearSelection,\n  ChonkyActions.EnableListView,\n  // TODO: Don't enable until compact view is fully supported\n  // ChonkyActions.EnableCompactView,\n  ChonkyActions.EnableGridView,\n  ChonkyActions.SortFilesByName,\n  ChonkyActions.SortFilesBySize,\n  ChonkyActions.SortFilesByDate,\n  ChonkyActions.ToggleHiddenFiles,\n  ChonkyActions.ToggleShowFoldersFirst,\n  ChonkyActions.FocusSearchInput,\n];\n","import { ChonkyActions } from '../action-definitions/index';\nimport { RootState } from '../types/redux.types';\nimport { SortOrder } from '../types/sort.types';\n\nexport const initialRootState: RootState = {\n  instanceId: 'CHONKY_INVALID_ID', // should be overwritten by preloaded state\n\n  externalFileActionHandler: null,\n\n  rawFileActions: [],\n  fileActionsErrorMessages: [],\n  fileActionMap: {},\n  fileActionIds: [],\n  toolbarItems: [],\n  contextMenuItems: [],\n\n  rawFolderChain: null,\n  folderChainErrorMessages: [],\n  folderChain: [],\n\n  rawFiles: [],\n  filesErrorMessages: [],\n  fileMap: {},\n  fileIds: [],\n  cleanFileIds: [],\n\n  sortedFileIds: [],\n  hiddenFileIdMap: {},\n\n  focusSearchInput: null,\n  searchString: '',\n  searchMode: 'currentFolder',\n\n  selectionMap: {},\n  disableSelection: false,\n\n  fileViewConfig: ChonkyActions.EnableGridView.fileViewConfig,\n\n  sortActionId: null,\n  sortOrder: SortOrder.ASC,\n\n  optionMap: {},\n\n  thumbnailGenerator: null,\n  doubleClickDelay: 300,\n  disableDragAndDrop: false,\n  clearSelectionOnOutsideClick: true,\n  forceEnableOpenParent: false,\n  hideToolbarInfo: false,\n\n  lastClick: null,\n\n  contextMenuMounted: false,\n  contextMenuConfig: null,\n};\n","import { Nilable, Nullable } from 'tsdef';\n\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nimport { GenericFileActionHandler } from '../types/action-handler.types';\nimport { FileActionMenuItem } from '../types/action-menus.types';\nimport { FileAction, FileActionMap } from '../types/action.types';\nimport { ContextMenuConfig } from '../types/context-menu.types';\nimport { FileViewConfig } from '../types/file-view.types';\nimport { FileArray, FileIdTrueMap, FileMap } from '../types/file.types';\nimport { OptionMap } from '../types/options.types';\nimport { RootState } from '../types/redux.types';\nimport { SortOrder } from '../types/sort.types';\nimport { ThumbnailGenerator } from '../types/thumbnails.types';\nimport { FileHelper } from '../util/file-helper';\nimport { sanitizeInputArray } from './files-transforms';\nimport { initialRootState } from './state';\n\nconst reducers = {\n  setExternalFileActionHandler(state: RootState, action: PayloadAction<Nilable<GenericFileActionHandler<FileAction>>>) {\n    state.externalFileActionHandler = action.payload ?? null;\n  },\n  setRawFileActions(state: RootState, action: PayloadAction<FileAction[] | any>) {\n    state.rawFileActions = action.payload;\n  },\n  setFileActionsErrorMessages(state: RootState, action: PayloadAction<string[]>) {\n    state.fileActionsErrorMessages = action.payload;\n  },\n  setFileActions(state: RootState, action: PayloadAction<FileAction[]>) {\n    const fileActionMap: FileActionMap = {};\n    action.payload.map((a) => (fileActionMap[a.id] = a));\n    const fileIds = action.payload.map((a) => a.id);\n\n    state.fileActionMap = fileActionMap as FileMap;\n    state.fileActionIds = fileIds;\n  },\n  updateFileActionMenuItems(state: RootState, action: PayloadAction<[FileActionMenuItem[], FileActionMenuItem[]]>) {\n    [state.toolbarItems, state.contextMenuItems] = action.payload;\n  },\n  setRawFolderChain(state: RootState, action: PayloadAction<FileArray | any>) {\n    const rawFolderChain = action.payload;\n    const { sanitizedArray: folderChain, errorMessages } = sanitizeInputArray('folderChain', rawFolderChain);\n    state.rawFolderChain = rawFolderChain;\n    state.folderChain = folderChain;\n    state.folderChainErrorMessages = errorMessages;\n  },\n  setRawFiles(state: RootState, action: PayloadAction<FileArray | any>) {\n    const rawFiles = action.payload;\n    const { sanitizedArray: files, errorMessages } = sanitizeInputArray('files', rawFiles);\n    state.rawFiles = rawFiles;\n    state.filesErrorMessages = errorMessages;\n\n    const fileMap: FileMap = {};\n    files.forEach((f) => {\n      if (f) fileMap[f.id] = f;\n    });\n    const fileIds = files.map((f) => (f ? f.id : null));\n    const cleanFileIds = fileIds.filter((f) => !!f) as string[];\n\n    state.fileMap = fileMap;\n    state.fileIds = fileIds;\n    state.cleanFileIds = cleanFileIds;\n\n    // Cleanup selection\n    for (const selectedFileId of Object.keys(state.selectionMap)) {\n      if (!fileMap[selectedFileId]) {\n        delete state.selectionMap[selectedFileId];\n      }\n    }\n  },\n  setSortedFileIds(state: RootState, action: PayloadAction<Nullable<string>[]>) {\n    state.sortedFileIds = action.payload;\n  },\n  setHiddenFileIds(state: RootState, action: PayloadAction<FileIdTrueMap>) {\n    state.hiddenFileIdMap = action.payload;\n\n    // Cleanup selection\n    for (const selectedFileId of Object.keys(state.selectionMap)) {\n      if (state.hiddenFileIdMap[selectedFileId]) {\n        delete state.selectionMap[selectedFileId];\n      }\n    }\n  },\n  setFocusSearchInput(state: RootState, action: PayloadAction<Nullable<() => void>>) {\n    state.focusSearchInput = action.payload;\n  },\n  setSearchString(state: RootState, action: PayloadAction<string>) {\n    state.searchString = action.payload;\n  },\n  selectAllFiles(state: RootState) {\n    state.fileIds\n      .filter((id) => id && FileHelper.isSelectable(state.fileMap[id]))\n      .map((id) => (id ? (state.selectionMap[id] = true) : null));\n  },\n  selectFiles(state: RootState, action: PayloadAction<{ fileIds: string[]; reset: boolean }>) {\n    if (state.disableSelection) return;\n    if (action.payload.reset) state.selectionMap = {};\n    action.payload.fileIds\n      .filter((id) => id && FileHelper.isSelectable(state.fileMap[id]))\n      .map((id) => (state.selectionMap[id] = true));\n  },\n  toggleSelection(state: RootState, action: PayloadAction<{ fileId: string; exclusive: boolean }>) {\n    if (state.disableSelection) return;\n    const oldValue = !!state.selectionMap[action.payload.fileId];\n    if (action.payload.exclusive) state.selectionMap = {};\n    if (oldValue) delete state.selectionMap[action.payload.fileId];\n    else if (FileHelper.isSelectable(state.fileMap[action.payload.fileId])) {\n      state.selectionMap[action.payload.fileId] = true;\n    }\n  },\n  clearSelection(state: RootState) {\n    if (state.disableSelection) return;\n    if (Object.keys(state.selectionMap).length !== 0) state.selectionMap = {};\n  },\n  setSelectionDisabled(state: RootState, action: PayloadAction<boolean>) {\n    state.disableSelection = action.payload;\n    if (Object.keys(state.selectionMap).length !== 0) state.selectionMap = {};\n  },\n  setFileViewConfig(state: RootState, action: PayloadAction<FileViewConfig>) {\n    state.fileViewConfig = action.payload;\n  },\n  setSort(state: RootState, action: PayloadAction<{ actionId: string; order: SortOrder }>) {\n    state.sortActionId = action.payload.actionId;\n    state.sortOrder = action.payload.order;\n  },\n  setOptionDefaults(state: RootState, action: PayloadAction<OptionMap>) {\n    for (const optionId of Object.keys(action.payload)) {\n      if (optionId in state.optionMap) continue;\n      state.optionMap[optionId] = action.payload[optionId];\n    }\n  },\n  toggleOption(state: RootState, action: PayloadAction<string>) {\n    state.optionMap[action.payload] = !state.optionMap[action.payload];\n  },\n  setThumbnailGenerator(state: RootState, action: PayloadAction<Nullable<ThumbnailGenerator>>) {\n    state.thumbnailGenerator = action.payload;\n  },\n  setDoubleClickDelay(state: RootState, action: PayloadAction<number>) {\n    state.doubleClickDelay = action.payload;\n  },\n  setDisableDragAndDrop(state: RootState, action: PayloadAction<boolean>) {\n    state.disableDragAndDrop = action.payload;\n  },\n  setForceEnableOpenParent(state: RootState, action: PayloadAction<boolean>) {\n    state.forceEnableOpenParent = action.payload;\n  },\n  setHideToolbarInfo(state: RootState, action: PayloadAction<boolean>) {\n    state.hideToolbarInfo = action.payload;\n  },\n  setClearSelectionOnOutsideClick(state: RootState, action: PayloadAction<boolean>) {\n    state.clearSelectionOnOutsideClick = action.payload;\n  },\n  setLastClickIndex(state: RootState, action: PayloadAction<Nullable<{ index: number; fileId: string }>>) {\n    state.lastClick = action.payload;\n  },\n  setContextMenuMounted(state: RootState, action: PayloadAction<boolean>) {\n    state.contextMenuMounted = action.payload;\n  },\n  showContextMenu(state: RootState, action: PayloadAction<ContextMenuConfig>) {\n    state.contextMenuConfig = action.payload;\n  },\n  hideContextMenu(state: RootState) {\n    if (!state.contextMenuConfig) return;\n    state.contextMenuConfig = null;\n  },\n};\n\nexport const { actions: reduxActions, reducer: rootReducer } = createSlice({\n  name: 'root',\n  initialState: initialRootState,\n  reducers,\n});\n","import { useEffect } from 'react';\nimport watch from 'redux-watch';\n\nimport { Store } from '@reduxjs/toolkit';\n\nimport { ChonkyActions } from '../action-definitions';\nimport { RootState } from '../types/redux.types';\nimport { FileSelection } from '../types/selection.types';\nimport { selectSelectedFileIds, selectSelectionMap } from './selectors';\nimport { thunkRequestFileAction } from './thunks/dispatchers.thunks';\n\nexport const useStoreWatchers = (store: Store<RootState>) => {\n  useEffect(() => {\n    const selectionWatcher = watch(() => selectSelectionMap(store.getState()));\n    const onSelectionChange = (newSelection: FileSelection, oldSelection: FileSelection) => {\n      // We don't check for deep equality here as we expect the\n      // reducers to prevent all unnecessary updates.\n      if (newSelection === oldSelection) return;\n\n      // Notify users the selection has changed.\n      const selectedFilesIds = selectSelectedFileIds(store.getState());\n      const selection = new Set<string>(selectedFilesIds);\n      store.dispatch(\n        thunkRequestFileAction(ChonkyActions.ChangeSelection, {\n          selection,\n        }) as any,\n      );\n    };\n\n    const unsubscribeCallbacks = [store.subscribe(selectionWatcher(onSelectionChange))];\n    return () => {\n      for (const unsubscribe of unsubscribeCallbacks) unsubscribe();\n    };\n  }, [store]);\n};\n","import { useCallback, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { configureStore } from '@reduxjs/toolkit';\n\nimport { RootState } from '../types/redux.types';\nimport { useStaticValue } from '../util/hooks-helpers';\nimport { rootReducer } from './reducers';\nimport { initialRootState } from './state';\nimport { useStoreWatchers } from './watchers';\n\nexport const useChonkyStore = (chonkyInstanceId: string) => {\n  const store = useStaticValue(() => {\n    const preloadedState: RootState = {\n      ...initialRootState,\n      instanceId: chonkyInstanceId,\n    };\n\n    return configureStore({\n      preloadedState: preloadedState as any,\n      reducer: rootReducer,\n      middleware: (getDefaultMiddleware) =>\n        getDefaultMiddleware({\n          serializableCheck: false,\n        }),\n      devTools: { name: `chonky_${chonkyInstanceId}` },\n    });\n  });\n  useStoreWatchers(store);\n  return store;\n};\n\n/**\n * Hook that can be used with parametrized selectors.\n */\nexport const useParamSelector = <Args extends Array<any>, Value>(\n  parametrizedSelector: (...args: Args) => (state: RootState) => Value,\n  ...selectorParams: Args\n) => {\n  const selector = useCallback(\n    (state: RootState) => parametrizedSelector(...selectorParams)(state),\n    // eslint-disable-next-line\n    [parametrizedSelector, ...selectorParams],\n  );\n  return useSelector(selector);\n};\n\n/**\n * DTE - DispatchThunkEffect. This method is used to decrease code duplication in\n * main Chonky method.\n */\nexport const useDTE = <Args extends Array<any>>(actionCreator: (...args: Args) => any, ...selectorParams: Args) => {\n  const dispatch = useDispatch();\n  useEffect(\n    () => {\n      dispatch(actionCreator(...selectorParams));\n    },\n    // eslint-disable-next-line\n    [dispatch, actionCreator, ...selectorParams],\n  );\n};\n\nexport const usePropReduxUpdate = <Payload extends any>(actionCreator: (payload: Payload) => any, payload: Payload) => {\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(actionCreator(payload));\n  }, [dispatch, actionCreator, payload]);\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\n\nimport { ChonkyIconProps } from '../../types/icons.types';\n\nexport const ChonkyIconPlaceholder: React.FC<ChonkyIconProps> = () => {\n  // This component should not be rendered unless the user has misconfigured Chonky\n  const title =\n    'No icon component found. Please follow Chonky installation instructions to ' +\n    'provide a pre-made icon component (or a custom icon).';\n  return <span title={title}></span>;\n};\n","import { ChonkyActions } from '../action-definitions/index';\nimport { ChonkyIconPlaceholder } from '../components/internal/ChonkyIconPlaceholder';\nimport { FileBrowserProps } from '../types/file-browser.types';\n\nexport type ChonkyConfig = Pick<\n  FileBrowserProps,\n  | 'fileActions'\n  | 'onFileAction'\n  | 'thumbnailGenerator'\n  | 'doubleClickDelay'\n  | 'disableSelection'\n  | 'disableDefaultFileActions'\n  | 'hideToolbarInfo'\n  | 'forceEnableOpenParent'\n  | 'disableDragAndDrop'\n  | 'disableDragAndDropProvider'\n  | 'defaultSortActionId'\n  | 'defaultFileViewActionId'\n  | 'clearSelectionOnOutsideClick'\n  | 'iconComponent'\n  | 'darkMode'\n  | 'i18n'\n>;\n\nexport const defaultConfig: ChonkyConfig = {\n  fileActions: null,\n  onFileAction: null,\n  thumbnailGenerator: null,\n  doubleClickDelay: 300,\n  disableSelection: false,\n  disableDefaultFileActions: false,\n  forceEnableOpenParent: false,\n  hideToolbarInfo: false,\n  disableDragAndDrop: false,\n  disableDragAndDropProvider: false,\n  defaultSortActionId: ChonkyActions.SortFilesByName.id,\n  defaultFileViewActionId: ChonkyActions.EnableListView.id,\n  clearSelectionOnOutsideClick: true,\n  iconComponent: ChonkyIconPlaceholder,\n  darkMode: false,\n  i18n: {},\n};\n\nexport const setChonkyDefaults = (config: Partial<ChonkyConfig>) => {\n  for (const key of Object.keys(defaultConfig)) {\n    if (key in config) {\n      defaultConfig[key as keyof ChonkyConfig] = config[key as keyof ChonkyConfig] as any;\n    }\n  }\n};\n","import { filesize } from 'filesize';\nimport { createContext, useContext, useMemo } from 'react';\nimport { IntlShape, useIntl } from 'react-intl';\nimport { Nullable, Undefinable } from 'tsdef';\n\nimport { FileAction } from '../types/action.types';\nimport { FileData } from '../types/file.types';\nimport { ChonkyFormatters } from '../types/i18n.types';\nimport { FileHelper } from './file-helper';\n\nexport enum I18nNamespace {\n  Toolbar = 'toolbar',\n  FileList = 'fileList',\n  FileEntry = 'fileEntry',\n  FileContextMenu = 'contextMenu',\n\n  FileActions = 'actions',\n  FileActionGroups = 'actionGroups',\n}\n\nexport const getI18nId = (namespace: I18nNamespace, stringId: string): string => `chonky.${namespace}.${stringId}`;\n\nexport const getActionI18nId = (actionId: string, stringId: string): string =>\n  `chonky.${I18nNamespace.FileActions}.${actionId}.${stringId}`;\n\nexport const useLocalizedFileActionGroup = (groupName: string) => {\n  const intl = useIntl();\n  return useMemo(() => {\n    return intl.formatMessage({\n      id: getI18nId(I18nNamespace.FileActionGroups, groupName),\n      defaultMessage: groupName,\n    });\n  }, [groupName, intl]);\n};\n\nexport const useLocalizedFileActionStrings = (action: Nullable<FileAction>) => {\n  const intl = useIntl();\n  return useMemo(() => {\n    if (!action) {\n      return {\n        buttonName: '',\n        buttonTooltip: undefined,\n      };\n    }\n\n    const buttonName = intl.formatMessage({\n      id: getActionI18nId(action.id, 'button.name'),\n      defaultMessage: action.button?.name,\n    });\n\n    let buttonTooltip: Undefinable<string> = undefined;\n    if (action.button?.tooltip) {\n      // We only translate the tooltip if the original action has a tooltip.\n      buttonTooltip = intl.formatMessage({\n        id: getActionI18nId(action.id, 'button.tooltip'),\n        defaultMessage: action.button?.tooltip,\n      });\n    }\n\n    return {\n      buttonName,\n      buttonTooltip,\n    };\n  }, [action, intl]);\n};\n\nexport const useLocalizedFileEntryStrings = (file: Nullable<FileData>) => {\n  const intl = useIntl();\n  const formatters = useContext(ChonkyFormattersContext);\n  return useMemo(() => {\n    return {\n      fileModDateString: formatters.formatFileModDate(intl, file),\n      fileSizeString: formatters.formatFileSize(intl, file),\n    };\n  }, [file, formatters, intl]);\n};\n\nexport const defaultFormatters: ChonkyFormatters = {\n  formatFileModDate: (intl: IntlShape, file: Nullable<FileData>): Nullable<string> => {\n    const safeModDate = FileHelper.getModDate(file);\n    if (safeModDate) {\n      /*\n      const dateOpts: FormatDateOptions = {\n        dateStyle: 'medium',\n        timeStyle: 'short',\n      }\n      */\n      // return intl.formatDate(safeModDate, dateOpts);\n      return intl.formatDate(safeModDate);\n    } else {\n      return null;\n    }\n  },\n  formatFileSize: (_intl: IntlShape, file: Nullable<FileData>): Nullable<string> => {\n    if (!file || typeof file.size !== 'number') return null;\n\n    const size = file.size;\n    const sizeData = filesize(size, { bits: false, output: 'object' }) as any;\n    if (sizeData.symbol === 'B') {\n      return `${Math.round(sizeData.value / 10) / 100.0} KB`;\n    } else if (sizeData.symbol === 'KB') {\n      return `${Math.round(sizeData.value)} ${sizeData.symbol}`;\n    }\n    return `${sizeData.value} ${sizeData.symbol}`;\n  },\n};\n\nexport const ChonkyFormattersContext = createContext(defaultFormatters);\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2019\n * @license MIT\n */\n\nimport { createContext, ElementType, useMemo } from 'react';\n\nimport ExactTrie from 'exact-trie';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyIconPlaceholder } from '../components/internal/ChonkyIconPlaceholder';\nimport { FileData } from '../types/file.types';\nimport { ChonkyIconName, ChonkyIconProps, FileIconData } from '../types/icons.types';\n\nexport const ChonkyIconContext = createContext<ElementType<ChonkyIconProps>>(ChonkyIconPlaceholder);\n\nexport const VideoExtensions: string[] = [\n  '3g2',\n  '3gp',\n  '3gpp',\n  'asf',\n  'asx',\n  'avi',\n  'dvb',\n  'f4v',\n  'fli',\n  'flv',\n  'fvt',\n  'h261',\n  'h263',\n  'h264',\n  'jpgm',\n  'jpgv',\n  'jpm',\n  'm1v',\n  'm2v',\n  'm4u',\n  'm4v',\n  'mj2',\n  'mjp2',\n  'mk3d',\n  'mks',\n  'mkv',\n  'mng',\n  'mov',\n  'movie',\n  'mp4',\n  'mp4v',\n  'mpe',\n  'mpeg',\n  'mpg',\n  'mpg4',\n  'mxu',\n  'ogv',\n  'pyv',\n  'qt',\n  'smv',\n  'ts',\n  'uvh',\n  'uvm',\n  'uvp',\n  'uvs',\n  'uvu',\n  'uvv',\n  'uvvh',\n  'uvvm',\n  'uvvp',\n  'uvvs',\n  'uvvu',\n  'uvvv',\n  'viv',\n  'vob',\n  'webm',\n  'wm',\n  'wmv',\n  'wmx',\n  'wvx',\n];\nexport const ImageExtensions: string[] = [\n  '3ds',\n  'apng',\n  'azv',\n  'bmp',\n  'bmp',\n  'btif',\n  'cgm',\n  'cmx',\n  'djv',\n  'djvu',\n  'drle',\n  'dwg',\n  'dxf',\n  'emf',\n  'exr',\n  'fbs',\n  'fh',\n  'fh4',\n  'fh5',\n  'fh7',\n  'fhc',\n  'fits',\n  'fpx',\n  'fst',\n  'g3',\n  'gif',\n  'heic',\n  'heics',\n  'heif',\n  'heifs',\n  'ico',\n  'ico',\n  'ief',\n  'jls',\n  'jng',\n  'jp2',\n  'jpe',\n  'jpeg',\n  'jpf',\n  'jpg',\n  'jpg2',\n  'jpm',\n  'jpx',\n  'jxr',\n  'ktx',\n  'mdi',\n  'mmr',\n  'npx',\n  'pbm',\n  'pct',\n  'pcx',\n  'pcx',\n  'pgm',\n  'pic',\n  'png',\n  'pnm',\n  'ppm',\n  'psd',\n  'pti',\n  'ras',\n  'rgb',\n  'rlc',\n  'sgi',\n  'sid',\n  'sub',\n  'svg',\n  'svgz',\n  't38',\n  'tap',\n  'tfx',\n  'tga',\n  'tif',\n  'tiff',\n  'uvg',\n  'uvi',\n  'uvvg',\n  'uvvi',\n  'vtf',\n  'wbmp',\n  'wdp',\n  'webp',\n  'wmf',\n  'xbm',\n  'xif',\n  'xpm',\n  'xwd',\n];\nexport const AudioExtensions: string[] = [\n  '3gpp',\n  'aac',\n  'adp',\n  'aif',\n  'aifc',\n  'aiff',\n  'au',\n  'caf',\n  'dra',\n  'dts',\n  'dtshd',\n  'ecelp4800',\n  'ecelp7470',\n  'ecelp9600',\n  'eol',\n  'flac',\n  'kar',\n  'lvp',\n  'm2a',\n  'm3a',\n  'm3u',\n  'm4a',\n  'm4a',\n  'mid',\n  'midi',\n  'mka',\n  'mp2',\n  'mp2a',\n  'mp3',\n  'mp3',\n  'mp4a',\n  'mpga',\n  'oga',\n  'ogg',\n  'pya',\n  'ra',\n  'ra',\n  'ram',\n  'rip',\n  'rmi',\n  'rmp',\n  's3m',\n  'sil',\n  'snd',\n  'spx',\n  'uva',\n  'uvva',\n  'wav',\n  'wav',\n  'wav',\n  'wax',\n  'weba',\n  'wma',\n  'xm',\n];\nexport const ColorsLight: string[] = [\n  '#bbbbbb',\n  '#d65c5c',\n  '#d6665c',\n  '#d6705c',\n  '#d67a5c',\n  '#d6855c',\n  '#d68f5c',\n  '#d6995c',\n  '#d6a35c',\n  '#d6ad5c',\n  '#d6b85c',\n  '#d6c25c',\n  '#d6cc5c',\n  '#d6d65c',\n  '#ccd65c',\n  '#c2d65c',\n  '#b8d65c',\n  '#add65c',\n  '#a3d65c',\n  '#99d65c',\n  '#8fd65c',\n  '#85d65c',\n  '#7ad65c',\n  '#70d65c',\n  '#66d65c',\n  '#5cd65c',\n  '#5cd666',\n  '#5cd670',\n  '#5cd67a',\n  '#5cd685',\n  '#5cd68f',\n  '#5cd699',\n  '#5cd6a3',\n  '#5cd6ad',\n  '#5cd6b8',\n  '#5cd6c2',\n  '#5cd6cc',\n  '#5cd6d6',\n  '#5cccd6',\n  '#5cc2d6',\n  '#5cb8d6',\n  '#5cadd6',\n  '#5ca3d6',\n  '#5c99d6',\n  '#5c8fd6',\n  '#5c85d6',\n  '#5c7ad6',\n  '#5c70d6',\n  '#5c66d6',\n  '#5c5cd6',\n  '#665cd6',\n  '#705cd6',\n  '#7a5cd6',\n  '#855cd6',\n  '#8f5cd6',\n  '#995cd6',\n  '#a35cd6',\n  '#ad5cd6',\n  '#b85cd6',\n  '#c25cd6',\n  '#cc5cd6',\n  '#d65cd6',\n  '#d65ccc',\n  '#d65cc2',\n  '#d65cb8',\n  '#d65cad',\n  '#d65ca3',\n  '#d65c99',\n  '#d65c8f',\n  '#d65c85',\n  '#d65c7a',\n  '#d65c70',\n  '#d65c66',\n];\nexport const ColorsDark: string[] = [\n  '#777',\n  '#8f3d3d',\n  '#8f443d',\n  '#8f4b3d',\n  '#8f523d',\n  '#8f583d',\n  '#8f5f3d',\n  '#8f663d',\n  '#8f6d3d',\n  '#8f743d',\n  '#8f7a3d',\n  '#8f813d',\n  '#8f883d',\n  '#8f8f3d',\n  '#888f3d',\n  '#818f3d',\n  '#7a8f3d',\n  '#748f3d',\n  '#6d8f3d',\n  '#668f3d',\n  '#5f8f3d',\n  '#588f3d',\n  '#528f3d',\n  '#4b8f3d',\n  '#448f3d',\n  '#3d8f3d',\n  '#3d8f44',\n  '#3d8f4b',\n  '#3d8f52',\n  '#3d8f58',\n  '#3d8f5f',\n  '#3d8f66',\n  '#3d8f6d',\n  '#3d8f74',\n  '#3d8f7a',\n  '#3d8f81',\n  '#3d8f88',\n  '#3d8f8f',\n  '#3d888f',\n  '#3d818f',\n  '#3d7a8f',\n  '#3d748f',\n  '#3d6d8f',\n  '#3d668f',\n  '#3d5f8f',\n  '#3d588f',\n  '#3d528f',\n  '#3d4b8f',\n  '#3d448f',\n  '#3d3d8f',\n  '#443d8f',\n  '#4b3d8f',\n  '#523d8f',\n  '#583d8f',\n  '#5f3d8f',\n  '#663d8f',\n  '#6d3d8f',\n  '#743d8f',\n  '#7a3d8f',\n  '#813d8f',\n  '#883d8f',\n  '#8f3d8f',\n  '#8f3d88',\n  '#8f3d81',\n  '#8f3d7a',\n  '#8f3d74',\n  '#8f3d6d',\n  '#8f3d66',\n  '#8f3d5f',\n  '#8f3d58',\n  '#8f3d52',\n  '#8f3d4b',\n  '#8f3d44',\n];\n\nconst getIconTrie = () => {\n  let colourIndex = 0;\n  const step = 5;\n\n  const IconsToExtensions = [\n    // Generic file types\n    [ChonkyIconName.license, ['license']],\n    [ChonkyIconName.config, ['sfk', 'ini', 'yml', 'toml', 'iml']],\n    [ChonkyIconName.model, ['3ds', 'obj', 'ply', 'fbx']],\n    [ChonkyIconName.database, ['csv', 'json', 'sql', 'sqlite', 'sqlite3', 'npy', 'npz', 'rec', 'idx', 'hdf5']],\n    [ChonkyIconName.text, ['txt', 'md', 'mdx']],\n    [ChonkyIconName.archive, ['zip', 'rar', 'tar', 'tar.gz', '7z']],\n    [ChonkyIconName.image, ImageExtensions],\n    [ChonkyIconName.video, VideoExtensions],\n    [ChonkyIconName.code, ['html', 'php', 'css', 'sass', 'scss', 'less', 'cpp', 'h', 'hpp', 'c', 'xml']],\n    [ChonkyIconName.info, ['bib', 'readme', 'nfo']],\n    [ChonkyIconName.key, ['pem', 'pub']],\n    [ChonkyIconName.lock, ['lock', 'lock.json', 'shrinkwrap.json']],\n    [ChonkyIconName.music, AudioExtensions],\n    [ChonkyIconName.terminal, ['run', 'sh']],\n    [ChonkyIconName.trash, ['.Trashes']],\n    [ChonkyIconName.users, ['authors', 'contributors']],\n\n    // OS file types\n    [ChonkyIconName.linux, ['AppImage']],\n    [ChonkyIconName.ubuntu, ['deb']],\n    [ChonkyIconName.windows, ['exe']],\n\n    // Programming language file types\n    [ChonkyIconName.rust, ['rs', 'rlib']],\n    [ChonkyIconName.python, ['py', 'ipynb']],\n    [ChonkyIconName.nodejs, ['js', 'jsx', 'ts', 'tsx', 'd.ts']],\n    [ChonkyIconName.php, ['php']],\n\n    // Development tools file types\n    [ChonkyIconName.git, ['.gitignore']],\n\n    // Other program file types\n    [ChonkyIconName.pdf, ['pdf']],\n    [ChonkyIconName.excel, ['xls', 'xlsx']],\n    [ChonkyIconName.word, ['doc', 'docx', 'odt']],\n    [ChonkyIconName.flash, ['swf']],\n  ] as const;\n\n  const exactTrie = new ExactTrie({ ignoreCase: true });\n  for (const pair of IconsToExtensions) {\n    const [icon, extensions] = pair;\n\n    for (let i = 0; i < extensions.length; ++i) {\n      colourIndex += step;\n      const colorCode = (colourIndex % (ColorsLight.length - 1)) + 1;\n      const iconData: FileIconData = {\n        icon,\n        colorCode,\n      };\n      exactTrie.put(extensions[i], iconData, true);\n    }\n  }\n\n  return exactTrie;\n};\n\nconst iconTrie = getIconTrie();\n\nexport const useIconData = (file: Nullable<FileData>): FileIconData => {\n  return useMemo(() => {\n    if (!file) return { icon: ChonkyIconName.loading, colorCode: 0 };\n    if (file.isDir === true) return { icon: ChonkyIconName.folder, colorCode: 0 };\n\n    const match = iconTrie.getWithCheckpoints(file.name, '.', true);\n    return match ? match : { icon: ChonkyIconName.file, colorCode: 32 };\n  }, [file]);\n};\n","import { Theme as MuiTheme } from '@mui/material/styles';\nimport useMediaQuery from '@mui/material/useMediaQuery';\nimport classnames from 'classnames';\nimport { createUseStyles } from 'react-jss';\nimport { DeepPartial } from 'tsdef';\n\nexport const lightTheme = {\n  colors: {\n    debugRed: '#fabdbd',\n    debugBlue: '#bdd8fa',\n    debugGreen: '#d2fabd',\n    debugPurple: '#d2bdfa',\n    debugYellow: '#fae9bd',\n\n    textActive: '#09f',\n  },\n\n  fontSizes: {\n    rootPrimary: 15,\n  },\n\n  margins: {\n    rootLayoutMargin: 8,\n  },\n\n  root: {\n    borderRadius: 4,\n    borderStyle: 'solid 1px',\n    height: '100%',\n  },\n\n  toolbar: {\n    size: 30,\n    lineHeight: '30px', // `px` suffix is required for `line-height` fields to work\n    buttonPadding: 8,\n    fontSize: 15,\n    buttonRadius: 4,\n  },\n\n  dnd: {\n    canDropColor: 'green',\n    cannotDropColor: 'red',\n    canDropMask: 'rgba(180, 235, 180, 0.75)',\n    cannotDropMask: 'rgba(235, 180, 180, 0.75)',\n    fileListCanDropMaskOne: 'rgba(180, 235, 180, 0.1)',\n    fileListCanDropMaskTwo: 'rgba(180, 235, 180, 0.2)',\n    fileListCannotDropMaskOne: 'rgba(235, 180, 180, 0.1)',\n    fileListCannotDropMaskTwo: 'rgba(235, 180, 180, 0.2)',\n  },\n\n  dragLayer: {\n    border: 'solid 2px #09f',\n    padding: '7px 10px',\n    borderRadius: 2,\n  },\n\n  fileList: {\n    desktopGridGutter: 8,\n    mobileGridGutter: 5,\n  },\n\n  gridFileEntry: {\n    childrenCountSize: '1.6em',\n    iconColorFocused: '#000',\n    iconSize: '2.4em',\n    iconColor: '#fff',\n    borderRadius: 5,\n    fontSize: 14,\n\n    fileColorTint: 'rgba(255, 255, 255, 0.4)',\n    folderBackColorTint: 'rgba(255, 255, 255, 0.1)',\n    folderFrontColorTint: 'rgba(255, 255, 255, 0.4)',\n  },\n\n  listFileEntry: {\n    propertyFontSize: 14,\n    iconFontSize: '1.1em',\n    iconBorderRadius: 5,\n    fontSize: 14,\n  },\n};\n\nexport type ChonkyTheme = typeof lightTheme;\n\nexport const darkThemeOverride: DeepPartial<ChonkyTheme> = {\n  gridFileEntry: {\n    fileColorTint: 'rgba(50, 50, 50, 0.4)',\n    folderBackColorTint: 'rgba(50, 50, 50, 0.4)',\n    folderFrontColorTint: 'rgba(50, 50, 50, 0.15)',\n  },\n};\n\nexport const mobileThemeOverride: DeepPartial<ChonkyTheme> = {\n  fontSizes: {\n    rootPrimary: 13,\n  },\n  margins: {\n    rootLayoutMargin: 4,\n  },\n  toolbar: {\n    size: 28,\n    lineHeight: '28px',\n    fontSize: 13,\n  },\n  gridFileEntry: {\n    fontSize: 13,\n  },\n  listFileEntry: {\n    propertyFontSize: 12,\n    iconFontSize: '1em',\n    fontSize: 13,\n  },\n};\n\nexport const useIsMobileBreakpoint = () => {\n  return useMediaQuery('(max-width:480px)');\n};\n\nexport const getStripeGradient = (colorOne: string, colorTwo: string) =>\n  'repeating-linear-gradient(' +\n  '45deg,' +\n  `${colorOne},` +\n  `${colorOne} 10px,` +\n  `${colorTwo} 0,` +\n  `${colorTwo} 20px` +\n  ')';\n\nexport const makeLocalChonkyStyles = <C extends string = string>(\n  styles: (theme: ChonkyTheme & MuiTheme) => any,\n  // @ts-ignore\n): any => createUseStyles<ChonkyTheme, C>(styles);\n\nexport const makeGlobalChonkyStyles = <C extends string = string>(\n  makeStyles: (theme: ChonkyTheme & MuiTheme) => any,\n) => {\n  const selectorMapping = {};\n  const makeGlobalStyles = (theme: ChonkyTheme) => {\n    const localStyles = makeStyles(theme as any);\n    const globalStyles = {};\n    const localSelectors = Object.keys(localStyles);\n    localSelectors.map((localSelector) => {\n      const globalSelector = `chonky-${localSelector}`;\n      const jssSelector = `@global .${globalSelector}`;\n      // @ts-ignore\n      globalStyles[jssSelector] = localStyles[localSelector];\n      // @ts-ignore\n      selectorMapping[localSelector] = globalSelector;\n    });\n    return globalStyles;\n  };\n\n  // @ts-ignore\n  const useStyles = createUseStyles<ChonkyTheme, C>(makeGlobalStyles as any);\n  return (...args: any[]): any => {\n    const styles = useStyles(...args);\n    const classes = {};\n    Object.keys(selectorMapping).map((localSelector) => {\n      // @ts-ignore\n      classes[localSelector] = selectorMapping[localSelector];\n    });\n    return { ...classes, ...styles };\n  };\n};\n\nexport const important = <T>(value: T) => [value, '!important'];\n\nexport const c: (...args: classNames.ArgumentArray) => string = classnames.default;\n","import React, { useImperativeHandle } from 'react';\nimport { useDispatch, useStore } from 'react-redux';\n\nimport { reduxActions } from '../redux/reducers';\nimport { selectSelectionMap } from '../redux/selectors';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { FileAction } from '../types/action.types';\nimport { FileBrowserHandle } from '../types/file-browser.types';\nimport { ChonkyDispatch, RootState } from '../types/redux.types';\n\nexport const useFileBrowserHandle = (ref: React.Ref<FileBrowserHandle>) => {\n  const store = useStore<RootState>();\n  const dispatch: ChonkyDispatch = useDispatch();\n\n  useImperativeHandle(\n    ref,\n    () => ({\n      getFileSelection(): Set<string> {\n        const selectionMap = selectSelectionMap(store.getState());\n        const selectionSet = new Set(Object.keys(selectionMap));\n        return selectionSet;\n      },\n      setFileSelection(selection, reset = true): void {\n        const fileIds = Array.from(selection);\n        dispatch(reduxActions.selectFiles({ fileIds, reset }));\n      },\n      async requestFileAction<Action extends FileAction>(\n        action: Action,\n        payload: Action['__payloadType'],\n      ): Promise<void> {\n        return Promise.resolve(dispatch(thunkRequestFileAction(action, payload)));\n      },\n    }),\n    [store, dispatch],\n  );\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\n\nimport { reduxActions } from '../../redux/reducers';\nimport { initialRootState } from '../../redux/state';\nimport { useDTE, usePropReduxUpdate } from '../../redux/store';\nimport {\n  thunkActivateSortAction,\n  thunkUpdateDefaultFileViewActionId,\n  thunkUpdateRawFileActions,\n} from '../../redux/thunks/file-actions.thunks';\nimport { FileBrowserHandle, FileBrowserProps } from '../../types/file-browser.types';\nimport { defaultConfig } from '../../util/default-config';\nimport { useFileBrowserHandle } from '../../util/file-browser-handle';\nimport { getValueOrFallback } from '../../util/helpers';\n\nexport const ChonkyBusinessLogicInner = React.memo(\n  React.forwardRef<FileBrowserHandle, FileBrowserProps>((props, ref) => {\n    // ==== Update Redux state\n    usePropReduxUpdate(reduxActions.setRawFiles, props.files ?? initialRootState.rawFiles);\n    usePropReduxUpdate(reduxActions.setRawFolderChain, props.folderChain);\n    useDTE(\n      thunkUpdateRawFileActions,\n      getValueOrFallback(props.fileActions, defaultConfig.fileActions),\n      getValueOrFallback(props.disableDefaultFileActions, defaultConfig.disableDefaultFileActions),\n    );\n    useDTE(\n      reduxActions.setExternalFileActionHandler,\n      getValueOrFallback(props.onFileAction, defaultConfig.onFileAction) as any,\n    );\n    useDTE(\n      reduxActions.setSelectionDisabled,\n      getValueOrFallback(props.disableSelection, defaultConfig.disableSelection, 'boolean'),\n    );\n    useDTE(thunkActivateSortAction, getValueOrFallback(props.defaultSortActionId, defaultConfig.defaultSortActionId));\n    useDTE(\n      thunkUpdateDefaultFileViewActionId,\n      getValueOrFallback(props.defaultFileViewActionId, defaultConfig.defaultFileViewActionId, 'string'),\n    );\n\n    useDTE(\n      reduxActions.setThumbnailGenerator,\n      getValueOrFallback(props.thumbnailGenerator, defaultConfig.thumbnailGenerator),\n    );\n    useDTE(\n      reduxActions.setDoubleClickDelay,\n      getValueOrFallback(props.doubleClickDelay, defaultConfig.doubleClickDelay, 'number'),\n    );\n    useDTE(\n      reduxActions.setForceEnableOpenParent,\n      getValueOrFallback(props.forceEnableOpenParent, defaultConfig.forceEnableOpenParent, 'boolean'),\n    );\n    useDTE(\n      reduxActions.setHideToolbarInfo,\n      getValueOrFallback(props.hideToolbarInfo, defaultConfig.hideToolbarInfo, 'boolean'),\n    );\n    useDTE(\n      reduxActions.setDisableDragAndDrop,\n      getValueOrFallback(props.disableDragAndDrop, defaultConfig.disableDragAndDrop, 'boolean'),\n    );\n    useDTE(\n      reduxActions.setClearSelectionOnOutsideClick,\n      getValueOrFallback(props.clearSelectionOnOutsideClick, defaultConfig.clearSelectionOnOutsideClick, 'boolean'),\n    );\n\n    // ==== Setup the imperative handle for external use\n    useFileBrowserHandle(ref);\n\n    return null;\n  }),\n);\nChonkyBusinessLogicInner.displayName = 'ChonkyBusinessLogicInner';\n\nexport const ChonkyBusinessLogic = React.memo(ChonkyBusinessLogicInner);\nChonkyBusinessLogic.displayName = 'ChonkyBusinessLogic';\n","import { useCallback, useContext } from 'react';\nimport { DndContext, useDrag, useDrop } from 'react-dnd';\n\nexport const useDndContextAvailable = () => {\n  const dndContext = useContext(DndContext);\n  const { dragDropManager } = dndContext;\n  return !!dragDropManager;\n};\n\nexport const useDragIfAvailable: typeof useDrag = (...args) => {\n  // This is an ugly hack to make `useDrag` not throw if a `DndContext` is not available.\n  // See: https://github.com/react-dnd/react-dnd/issues/2212\n  const dndContextAvailable = useDndContextAvailable();\n  const mockHook = useCallback(() => [{} as any, () => null, () => null], []);\n  // @ts-ignore\n  const useHook: typeof useDrag = dndContextAvailable ? useDrag : mockHook;\n  return useHook(...args);\n};\n\nexport const useDropIfAvailable: typeof useDrop = (...args) => {\n  const dndContextAvailable = useDndContextAvailable();\n  const mockHook = useCallback(() => [{} as any, () => null], []);\n  // @ts-ignore\n  const useHook: typeof useDrop = dndContextAvailable ? useDrop : mockHook;\n  return useHook(...args);\n};\n","import React, { useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { reduxActions } from '../../redux/reducers';\nimport { selectContextMenuMounted } from '../../redux/selectors';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\nimport { ChonkyDispatch } from '../../types/redux.types';\nimport { findElementAmongAncestors } from '../../util/helpers';\nimport { useInstanceVariable } from '../../util/hooks-helpers';\n\nexport const findClosestChonkyFileId = (element: HTMLElement | any): Nullable<string> => {\n  const fileEntryWrapperDiv = findElementAmongAncestors(\n    element,\n    (element: any) =>\n      element.tagName && element.tagName.toLowerCase() === 'div' && element.dataset && element.dataset.chonkyFileId,\n  );\n  return fileEntryWrapperDiv ? fileEntryWrapperDiv.dataset.chonkyFileId! : null;\n};\n\nexport const useContextMenuTrigger = () => {\n  const dispatch: ChonkyDispatch = useDispatch();\n  const contextMenuMountedRef = useInstanceVariable(useSelector(selectContextMenuMounted));\n  return useCallback(\n    (event: React.MouseEvent<HTMLDivElement>) => {\n      // Use default browser context menu when Chonky context menu component\n      // is not mounted.\n      if (!contextMenuMountedRef.current) return;\n      // Users can use Alt+Right Click to bring up browser's default\n      // context menu instead of Chonky's context menu.\n      if (event.altKey) return;\n\n      event.preventDefault();\n\n      const triggerFileId = findClosestChonkyFileId(event.target);\n      dispatch(\n        thunkRequestFileAction(ChonkyActions.OpenFileContextMenu, {\n          clientX: event.clientX,\n          clientY: event.clientY,\n          triggerFileId,\n        }),\n      );\n    },\n    [contextMenuMountedRef, dispatch],\n  );\n};\n\nexport const useContextMenuDismisser = () => {\n  const dispatch: ChonkyDispatch = useDispatch();\n  return useCallback(() => dispatch(reduxActions.hideContextMenu()), [dispatch]);\n};\n","import { Nilable } from 'tsdef';\n\nimport { StartDragNDropPayload } from './action-payloads.types';\nimport { FileData } from './file.types';\n\nexport interface ChonkyDndDropResult {\n  dropTarget: Nilable<FileData> | any;\n  dropEffect: 'move' | 'copy';\n}\n\n// any: used to be DragObjectWithType (removed from react-dnd)\nexport type ChonkyDndFileEntryItem = any & {\n  payload: StartDragNDropPayload;\n};\nexport const ChonkyDndFileEntryType = 'dnd-chonky-file-entry';\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\nimport { useDragLayer } from 'react-dnd';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyDndFileEntryItem, ChonkyDndFileEntryType } from '../../types/dnd.types';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface DnDFileListDragLayerProps {}\n\nconst layerStyles: React.CSSProperties = {\n  position: 'fixed',\n  pointerEvents: 'none',\n  zIndex: 100,\n  left: 0,\n  top: 0,\n  width: '100%',\n  height: '100%',\n};\nconst getItemStyles = (\n  initialCursorOffset: Nullable<{ x: number; y: number }>,\n  initialFileOffset: Nullable<{ x: number; y: number }>,\n  currentFileOffset: Nullable<{ x: number; y: number }>,\n) => {\n  if (!initialCursorOffset || !initialFileOffset || !currentFileOffset) {\n    return {\n      display: 'none',\n    };\n  }\n  const x = initialCursorOffset.x + (currentFileOffset.x - initialFileOffset.x);\n  const y = initialCursorOffset.y + (currentFileOffset.y - initialFileOffset.y);\n  const transform = `translate(${x}px, ${y}px)`;\n  return {\n    transform,\n    WebkitTransform: transform,\n  };\n};\n\nexport const DnDFileListDragLayer: React.FC<DnDFileListDragLayerProps> = () => {\n  const classes = useStyles();\n\n  const { itemType, item, initialCursorOffset, initialFileOffset, currentFileOffset, isDragging } = useDragLayer(\n    (monitor) => ({\n      item: monitor.getItem() as ChonkyDndFileEntryItem,\n      itemType: monitor.getItemType(),\n      initialCursorOffset: monitor.getInitialClientOffset(),\n      initialFileOffset: monitor.getInitialSourceClientOffset(),\n      currentFileOffset: monitor.getSourceClientOffset(),\n      isDragging: monitor.isDragging(),\n    }),\n  );\n  if (!isDragging || itemType !== ChonkyDndFileEntryType || !item.payload) {\n    return null;\n  }\n\n  const selectionSize = item.payload.selectedFiles.length;\n  return (\n    <div style={layerStyles}>\n      <div style={getItemStyles(initialCursorOffset, initialFileOffset, currentFileOffset)}>\n        <div className={classes.fileDragPreview}>\n          <b>{item.payload.draggedFile.name}</b>\n          {selectionSize > 1 && (\n            <>\n              {' and '}\n              <strong>\n                {selectionSize - 1} other file\n                {selectionSize - 1 !== 1 ? 's' : ''}\n              </strong>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst useStyles = makeGlobalChonkyStyles((theme) => ({\n  fileDragPreview: {\n    boxShadow: `2px 2px 5px ${theme.palette.divider}`,\n    backgroundColor: theme.palette.background.default,\n    borderRadius: theme.dragLayer.borderRadius,\n    fontSize: theme.fontSizes.rootPrimary,\n    color: theme.palette.text.primary,\n    padding: theme.dragLayer.padding,\n    border: theme.dragLayer.border,\n    display: 'inline-block',\n  },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport hotkeys from 'hotkeys-js';\nimport React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { selectFileActionData } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\nimport { ChonkyDispatch } from '../../types/redux.types';\n\nexport interface HotkeyListenerProps {\n  fileActionId: string;\n}\n\nexport const HotkeyListener: React.FC<HotkeyListenerProps> = React.memo((props) => {\n  const { fileActionId } = props;\n\n  const dispatch: ChonkyDispatch = useDispatch();\n  const fileAction = useParamSelector(selectFileActionData, fileActionId);\n\n  useEffect(() => {\n    if (!fileAction || !fileAction.hotkeys || fileAction.hotkeys.length === 0) {\n      return;\n    }\n\n    const hotkeysStr = fileAction.hotkeys.join(',');\n    const hotkeyCallback = (event: KeyboardEvent) => {\n      event.preventDefault();\n      dispatch(thunkRequestFileAction(fileAction, undefined));\n    };\n    hotkeys(hotkeysStr, hotkeyCallback);\n    return () => hotkeys.unbind(hotkeysStr, hotkeyCallback);\n  }, [dispatch, fileAction]);\n\n  return null;\n});\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Box from '@mui/material/Box';\nimport ClickAwayListener from '@mui/material/ClickAwayListener';\nimport React, { useCallback, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { reduxActions } from '../../redux/reducers';\nimport { selectClearSelectionOnOutsideClick, selectFileActionIds, selectIsDnDDisabled } from '../../redux/selectors';\nimport { ChonkyDispatch } from '../../types/redux.types';\nimport { useDndContextAvailable } from '../../util/dnd-fallback';\nimport { elementIsInsideButton } from '../../util/helpers';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\nimport { useContextMenuTrigger } from '../external/FileContextMenu-hooks';\nimport { DnDFileListDragLayer } from '../file-list/DnDFileListDragLayer';\nimport { HotkeyListener } from './HotkeyListener';\n\nexport interface ChonkyPresentationLayerProps {\n  children?: React.ReactNode;\n}\n\nexport const ChonkyPresentationLayer: React.FC<ChonkyPresentationLayerProps> = ({ children }) => {\n  const dispatch: ChonkyDispatch = useDispatch();\n  const fileActionIds = useSelector(selectFileActionIds);\n  const dndDisabled = useSelector(selectIsDnDDisabled);\n  const clearSelectionOnOutsideClick = useSelector(selectClearSelectionOnOutsideClick);\n\n  // Deal with clicks outside of Chonky\n  const handleClickAway = useCallback(\n    (event: MouseEvent | TouchEvent) => {\n      if (!clearSelectionOnOutsideClick || elementIsInsideButton(event.target)) {\n        // We only clear out the selection on outside click if the click target\n        // was not a button. We don't want to clear out the selection when a\n        // button is clicked because Chonky users might want to trigger some\n        // selection-related action on that button click.\n        return;\n      }\n      dispatch(reduxActions.clearSelection());\n    },\n    [dispatch, clearSelectionOnOutsideClick],\n  );\n\n  // Generate necessary components\n  const hotkeyListenerComponents = useMemo(\n    () =>\n      fileActionIds.map((actionId) => (\n        <HotkeyListener key={`file-action-listener-${actionId}`} fileActionId={actionId} />\n      )),\n    [fileActionIds],\n  );\n\n  const dndContextAvailable = useDndContextAvailable();\n  const showContextMenu = useContextMenuTrigger();\n\n  const classes = useStyles();\n  return (\n    <ClickAwayListener onClickAway={handleClickAway}>\n      <Box className={classes.chonkyRoot} onContextMenu={showContextMenu}>\n        {!dndDisabled && dndContextAvailable && <DnDFileListDragLayer />}\n        {hotkeyListenerComponents}\n        {children ? children : null}\n      </Box>\n    </ClickAwayListener>\n  );\n};\n\nconst useStyles = makeGlobalChonkyStyles((theme) => ({\n  chonkyRoot: {\n    backgroundColor: theme.palette.background.paper,\n    border: theme.root.borderStyle ? `${theme.root.borderStyle} ${theme.palette.divider}` : undefined,\n    padding: theme.margins.rootLayoutMargin,\n    fontSize: theme.fontSizes.rootPrimary,\n    color: theme.palette.text.primary,\n    touchAction: 'manipulation', // Disabling zoom on double tap\n    fontFamily: 'sans-serif',\n    flexDirection: 'column',\n    boxSizing: 'border-box',\n    textAlign: 'left',\n    borderRadius: theme.root.borderRadius,\n    display: 'flex',\n    height: theme.root.height,\n\n    // Disabling select\n    webkitTouchCallout: 'none',\n    webkitUserSelect: 'none',\n    mozUserSelect: 'none',\n    msUserSelect: 'none',\n    userSelect: 'none',\n  },\n}));\n","import merge from 'deepmerge';\nimport React, { ReactNode, useMemo } from 'react';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { IntlProvider } from 'react-intl';\nimport { ThemeProvider } from 'react-jss';\nimport { Provider as ReduxProvider } from 'react-redux';\nimport shortid from 'shortid';\nimport {\n  createTheme,\n  ThemeProvider as MuiThemeProvider,\n  StyledEngineProvider,\n  ThemeOptions,\n} from '@mui/material/styles';\n\nimport { useChonkyStore } from '../../redux/store';\nimport { FileBrowserHandle, FileBrowserProps } from '../../types/file-browser.types';\nimport { defaultConfig } from '../../util/default-config';\nimport { getValueOrFallback } from '../../util/helpers';\nimport { useStaticValue } from '../../util/hooks-helpers';\nimport { ChonkyFormattersContext, defaultFormatters } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { darkThemeOverride, lightTheme, mobileThemeOverride, useIsMobileBreakpoint } from '../../util/styles';\nimport { ChonkyBusinessLogic } from '../internal/ChonkyBusinessLogic';\nimport { ChonkyIconPlaceholder } from '../internal/ChonkyIconPlaceholder';\nimport { ChonkyPresentationLayer } from '../internal/ChonkyPresentationLayer';\n\n// if (process.env.NODE_ENV === 'development') {\n//     const whyDidYouRender = require('@welldone-software/why-did-you-render');\n//     whyDidYouRender(React, {\n//         trackAllPureComponents: true,\n//     });\n// }\n\nexport const FileBrowser = React.forwardRef<FileBrowserHandle, FileBrowserProps & { children?: ReactNode }>(\n  (props, ref) => {\n    const { instanceId, iconComponent, children } = props;\n    const disableDragAndDrop = getValueOrFallback(\n      props.disableDragAndDrop,\n      defaultConfig.disableDragAndDrop,\n      'boolean',\n    );\n    const disableDragAndDropProvider = getValueOrFallback(\n      props.disableDragAndDropProvider,\n      defaultConfig.disableDragAndDropProvider,\n      'boolean',\n    );\n    const darkMode = getValueOrFallback(props.darkMode, defaultConfig.darkMode, 'boolean');\n    const i18n = getValueOrFallback(props.i18n, defaultConfig.i18n);\n    const formatters = useMemo(() => ({ ...defaultFormatters, ...i18n?.formatters }), [i18n]);\n\n    const chonkyInstanceId = useStaticValue(() => instanceId ?? shortid.generate());\n    const store = useChonkyStore(chonkyInstanceId);\n\n    const isMobileBreakpoint = useIsMobileBreakpoint();\n    const theme = useMemo(() => {\n      let muiOptions: ThemeOptions = {\n        palette: { mode: darkMode ? 'dark' : 'light' },\n      };\n      if (props.muiThemeOptions) {\n        muiOptions = merge(muiOptions, props.muiThemeOptions);\n      }\n      const muiTheme = createTheme(muiOptions);\n      const combinedTheme = merge(\n        muiTheme,\n        merge(merge(lightTheme, darkMode ? darkThemeOverride : {}), props.theme || {}),\n      );\n      return isMobileBreakpoint ? merge(combinedTheme, mobileThemeOverride) : combinedTheme;\n    }, [darkMode, isMobileBreakpoint]);\n\n    const chonkyComps = (\n      <>\n        <ChonkyBusinessLogic ref={ref} {...props} />\n        <ChonkyPresentationLayer>{children}</ChonkyPresentationLayer>\n      </>\n    );\n\n    return (\n      <IntlProvider locale=\"en\" defaultLocale=\"en\" {...i18n}>\n        <ChonkyFormattersContext.Provider value={formatters}>\n          <ReduxProvider store={store}>\n            <ThemeProvider theme={theme}>\n              <StyledEngineProvider injectFirst>\n                <MuiThemeProvider theme={theme}>\n                  <ChonkyIconContext.Provider\n                    value={iconComponent ?? defaultConfig.iconComponent ?? ChonkyIconPlaceholder}\n                  >\n                    {disableDragAndDrop || disableDragAndDropProvider ? (\n                      chonkyComps\n                    ) : (\n                      <DndProvider backend={HTML5Backend}>{chonkyComps}</DndProvider>\n                    )}\n                  </ChonkyIconContext.Provider>\n                </MuiThemeProvider>\n              </StyledEngineProvider>\n            </ThemeProvider>\n          </ReduxProvider>\n        </ChonkyFormattersContext.Provider>\n      </IntlProvider>\n    );\n  },\n);\nFileBrowser.displayName = 'FileBrowser';\n","import { useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { selectFolderChain } from '../../redux/selectors';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\nimport { FileData } from '../../types/file.types';\nimport { ChonkyDispatch } from '../../types/redux.types';\nimport { FileHelper } from '../../util/file-helper';\n\nexport interface FolderChainItem {\n  file: Nullable<FileData>;\n  disabled: boolean;\n  onClick?: () => void;\n}\n\nexport const useFolderChainItems = (): FolderChainItem[] => {\n  const folderChain = useSelector(selectFolderChain);\n  const dispatch: ChonkyDispatch = useDispatch();\n\n  const folderChainItems = useMemo(() => {\n    const items: FolderChainItem[] = [];\n    if (!folderChain) return items;\n\n    for (let i = 0; i < folderChain.length; ++i) {\n      const file = folderChain[i];\n      items.push({\n        file,\n        disabled: !file,\n        onClick:\n          !FileHelper.isOpenable(file) || i === folderChain.length - 1\n            ? undefined\n            : () =>\n                dispatch(\n                  thunkRequestFileAction(ChonkyActions.OpenFiles, {\n                    targetFile: file,\n                    files: [file],\n                  }),\n                ),\n      });\n    }\n    return items;\n  }, [dispatch, folderChain]);\n  return folderChainItems;\n};\n","import { useCallback, useEffect, useMemo } from 'react';\nimport { DragSourceMonitor, DropTargetMonitor } from 'react-dnd';\nimport { getEmptyImage } from 'react-dnd-html5-backend';\nimport { useDispatch, useSelector, useStore } from 'react-redux';\nimport { ExcludeKeys, Nullable } from 'tsdef';\n\nimport { EssentialActions } from '../action-definitions/essential';\nimport { ChonkyActions } from '../action-definitions/index';\nimport { selectCurrentFolder, selectFolderChain, selectInstanceId, selectSelectedFiles } from '../redux/selectors';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { StartDragNDropPayload } from '../types/action-payloads.types';\nimport { ChonkyDndDropResult, ChonkyDndFileEntryItem, ChonkyDndFileEntryType } from '../types/dnd.types';\nimport { DndEntryState } from '../types/file-list.types';\nimport { FileData } from '../types/file.types';\nimport { ChonkyDispatch, ChonkyStore, RootState } from '../types/redux.types';\nimport { useDragIfAvailable, useDropIfAvailable } from './dnd-fallback';\nimport { FileHelper } from './file-helper';\nimport { useInstanceVariable } from './hooks-helpers';\n\nexport const useFileDrag = (file: Nullable<FileData>) => {\n  // Prepare the dnd payload\n  const store: ChonkyStore = useStore<RootState>();\n  const fileRef = useInstanceVariable(file);\n  const getDndStartPayload = useCallback<() => StartDragNDropPayload>(() => {\n    const reduxState = store.getState();\n    return {\n      sourceInstanceId: selectInstanceId(reduxState),\n      source: selectCurrentFolder(reduxState),\n      // We force non-null type below because by convention, if drag & drop for\n      // this file was possible, it must have been non-null.\n      draggedFile: fileRef.current!,\n      selectedFiles: selectSelectedFiles(reduxState),\n    };\n  }, [store, fileRef]);\n\n  // For drag source\n  const dispatch: ChonkyDispatch = useDispatch();\n  const canDrag = useCallback(() => FileHelper.isDraggable(fileRef.current), [fileRef]);\n  const onDragStart = useCallback((): ChonkyDndFileEntryItem => {\n    const item: ChonkyDndFileEntryItem = {\n      type: ChonkyDndFileEntryType,\n      payload: getDndStartPayload(),\n    };\n    dispatch(thunkRequestFileAction(ChonkyActions.StartDragNDrop, item.payload));\n    return item;\n  }, [dispatch, getDndStartPayload]);\n  const onDragEnd = useCallback(\n    (item: ChonkyDndFileEntryItem, monitor: DragSourceMonitor) => {\n      const dropResult = monitor.getDropResult() as ChonkyDndDropResult;\n      if (!FileHelper.isDraggable(item.payload.draggedFile) || !dropResult || !dropResult.dropTarget) {\n        return;\n      }\n\n      dispatch(\n        thunkRequestFileAction(ChonkyActions.EndDragNDrop, {\n          ...item.payload,\n          destination: dropResult.dropTarget,\n          copy: dropResult.dropEffect === 'copy',\n        }),\n      );\n    },\n    [dispatch],\n  );\n\n  // Create refs for react-dnd hooks\n  const collect = useCallback((monitor: DragSourceMonitor) => ({ isDragging: monitor.isDragging() }), []);\n  const [{ isDragging: dndIsDragging }, drag, preview] = useDragIfAvailable({\n    item: onDragStart,\n    type: ChonkyDndFileEntryType,\n    canDrag,\n    // @ts-ignore\n    end: onDragEnd,\n    collect,\n  });\n\n  useEffect(() => {\n    // Set drag preview to an empty image because `DnDFileListDragLayer` will\n    // provide its own preview.\n    preview(getEmptyImage(), { captureDraggingState: true });\n  }, [preview]);\n\n  return { dndIsDragging, drag };\n};\n\ninterface UseFileDropParams {\n  file: Nullable<FileData>;\n  forceDisableDrop?: boolean;\n  includeChildrenDrops?: boolean;\n}\n\nexport const useFileDrop = ({ file, forceDisableDrop, includeChildrenDrops }: UseFileDropParams) => {\n  const folderChainRef = useInstanceVariable(useSelector(selectFolderChain));\n  const onDrop = useCallback(\n    (_item: ChonkyDndFileEntryItem, monitor: DropTargetMonitor) => {\n      if (!monitor.canDrop()) return;\n      const customDropResult: ExcludeKeys<ChonkyDndDropResult, 'dropEffect'> = {\n        dropTarget: file,\n      };\n      return customDropResult;\n    },\n    [file],\n  );\n  const canDrop = useCallback(\n    (item: ChonkyDndFileEntryItem, monitor: DropTargetMonitor) => {\n      if (\n        forceDisableDrop ||\n        !FileHelper.isDroppable(file) ||\n        (!monitor.isOver({ shallow: true }) && !includeChildrenDrops)\n      ) {\n        return false;\n      }\n      const { source, draggedFile, selectedFiles } = item.payload;\n\n      // We prevent folders from being dropped into themselves. We also prevent\n      // any folder from current folder chain being moved - we can't move the\n      // folder that we are currently in.\n      const prohibitedFileIds = new Set<string>();\n      prohibitedFileIds.add(file.id);\n      folderChainRef.current.map((folder) => {\n        if (folder) prohibitedFileIds.add(folder.id);\n      });\n      const movedFiles: FileData[] = [draggedFile, ...selectedFiles];\n      for (const currFile of movedFiles) {\n        if (prohibitedFileIds.has(currFile.id)) return false;\n      }\n\n      // Finally, prohibit files from being moved into their parent folder\n      // (which is a no-op).\n      return file.id !== source?.id;\n    },\n    [forceDisableDrop, file, includeChildrenDrops, folderChainRef],\n  );\n  const collect = useCallback(\n    (monitor: DropTargetMonitor) => ({\n      isOver: monitor.isOver(),\n      isOverCurrent: monitor.isOver({ shallow: true }),\n      canDrop: monitor.canDrop(),\n    }),\n    [],\n  );\n  const [{ isOver: dndIsOver, isOverCurrent: dndIsOverCurrent, canDrop: dndCanDrop }, drop] = useDropIfAvailable({\n    accept: ChonkyDndFileEntryType,\n    drop: onDrop,\n    canDrop,\n    collect,\n  });\n  return { dndIsOver, dndIsOverCurrent, dndCanDrop, drop };\n};\n\nexport const useFileEntryDnD = (file: Nullable<FileData>) => {\n  const { dndIsDragging, drag } = useFileDrag(file);\n  const { dndIsOver, dndCanDrop, drop } = useFileDrop({ file });\n  const dndState = useMemo<DndEntryState>(\n    () => ({\n      dndIsDragging,\n      dndIsOver,\n      dndCanDrop,\n    }),\n    [dndCanDrop, dndIsDragging, dndIsOver],\n  );\n  return {\n    drop,\n    drag,\n    dndState,\n  };\n};\n\nexport const useDndHoverOpen = (file: Nullable<FileData>, dndState: DndEntryState) => {\n  const dispatch: ChonkyDispatch = useDispatch();\n  const currentFolderRef = useInstanceVariable(useSelector(selectCurrentFolder));\n  useEffect(() => {\n    let timeout: Nullable<any> = null;\n    if (dndState.dndIsOver && FileHelper.isDndOpenable(file) && file.id !== currentFolderRef.current?.id) {\n      timeout = setTimeout(\n        () =>\n          dispatch(\n            thunkRequestFileAction(EssentialActions.OpenFiles, {\n              targetFile: file,\n              files: [file],\n            }),\n          ),\n        // TODO: Make this timeout configurable\n        1500,\n      );\n    }\n    return () => {\n      if (timeout) clearTimeout(timeout);\n    };\n  }, [dispatch, file, dndState.dndIsOver, currentFolderRef]);\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\n\nimport { makeLocalChonkyStyles } from '../../util/styles';\n\nexport interface TextPlaceholderProps {\n  minLength: number;\n  maxLength: number;\n}\n\nconst getRandomInt = (min: number, max: number) => {\n  return min + Math.floor(Math.random() * Math.floor(max - min));\n};\nexport const TextPlaceholder: React.FC<TextPlaceholderProps> = React.memo((props) => {\n  const { minLength, maxLength } = props;\n\n  const placeholderLength = getRandomInt(minLength, maxLength);\n  const whitespace = '&nbsp;'.repeat(placeholderLength);\n\n  const classes = useStyles();\n  return <span className={classes.textPlaceholder} dangerouslySetInnerHTML={{ __html: whitespace }} />;\n});\n\nconst useStyles = makeLocalChonkyStyles(() => ({\n  '@keyframes loading-placeholder': {\n    '0%': { opacity: 0.2 },\n    '50%': { opacity: 0.4 },\n    '100%': { opacity: 0.2 },\n  },\n  textPlaceholder: {\n    animationName: '$loading-placeholder',\n    animationIterationCount: 'infinite',\n    animationTimingFunction: 'linear',\n    animationDuration: '1.5s',\n    backgroundColor: '#ccc',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    borderRadius: 4,\n    maxWidth: '40%',\n    minWidth: 20,\n  },\n}));\n","import React, { HTMLProps, useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable, Undefinable } from 'tsdef';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { selectThumbnailGenerator } from '../../redux/selectors';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\nimport { DndEntryState } from '../../types/file-list.types';\nimport { FileData } from '../../types/file.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { ChonkyDispatch } from '../../types/redux.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { ChonkyIconContext, ColorsDark, ColorsLight, useIconData } from '../../util/icon-helper';\nimport { Logger } from '../../util/logger';\nimport { TextPlaceholder } from '../external/TextPlaceholder';\nimport { KeyboardClickEvent, MouseClickEvent } from '../internal/ClickableWrapper';\nimport { FileEntryState } from './GridEntryPreview';\n\nexport const useFileEntryHtmlProps = (file: Nullable<FileData>): HTMLProps<HTMLDivElement> => {\n  return useMemo(() => {\n    const dataProps: { [prop: string]: Undefinable<string> } = {\n      'data-test-id': 'file-entry',\n      'data-chonky-file-id': file ? file.id : undefined,\n    };\n\n    return {\n      role: 'listitem',\n      ...dataProps,\n    };\n  }, [file]);\n};\n\nexport const useFileEntryState = (file: Nullable<FileData>, selected: boolean, focused: boolean) => {\n  const iconData = useIconData(file);\n  const { thumbnailUrl, thumbnailLoading } = useThumbnailUrl(file);\n\n  return useMemo<FileEntryState>(() => {\n    const fileColor = thumbnailUrl ? ColorsDark[iconData.colorCode] : ColorsLight[iconData.colorCode];\n    const iconSpin = thumbnailLoading || !file;\n    const icon = thumbnailLoading ? ChonkyIconName.loading : iconData.icon;\n\n    return {\n      childrenCount: FileHelper.getChildrenCount(file),\n      icon: file && file.icon !== undefined ? file.icon : icon,\n      iconSpin: iconSpin,\n      thumbnailUrl: thumbnailUrl,\n      color: file && file.color !== undefined ? file.color : fileColor,\n      selected: selected,\n      focused: !!focused,\n    };\n  }, [file, focused, iconData, selected, thumbnailLoading, thumbnailUrl]);\n};\n\nexport const useDndIcon = (dndState: DndEntryState) => {\n  let dndIconName: Nullable<ChonkyIconName> = null;\n  if (dndState.dndIsOver) {\n    const showDropIcon = dndState.dndCanDrop;\n    dndIconName = showDropIcon ? ChonkyIconName.dndCanDrop : ChonkyIconName.dndCannotDrop;\n  } else if (dndState.dndIsDragging) {\n    dndIconName = ChonkyIconName.dndDragging;\n  }\n\n  return dndIconName;\n};\n\nexport const useModifierIconComponents = (file: Nullable<FileData>) => {\n  const modifierIcons: ChonkyIconName[] = useMemo(() => {\n    const modifierIcons: ChonkyIconName[] = [];\n    if (FileHelper.isHidden(file)) modifierIcons.push(ChonkyIconName.hidden);\n    if (FileHelper.isSymlink(file)) modifierIcons.push(ChonkyIconName.symlink);\n    if (FileHelper.isEncrypted(file)) modifierIcons.push(ChonkyIconName.lock);\n    return modifierIcons;\n  }, [file]);\n  const ChonkyIcon = useContext(ChonkyIconContext);\n  const modifierIconComponents = useMemo(\n    () => modifierIcons.map((icon, index) => <ChonkyIcon key={`file-modifier-${index}`} icon={icon} />),\n    // For some reason ESLint marks `ChonkyIcon` as an unnecessary dependency,\n    // but we expect it can change at runtime so we disable the check.\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [ChonkyIcon, modifierIcons],\n  );\n  return modifierIconComponents;\n};\n\nconst _extname = (fileName: string) => {\n  const parts = fileName.split('.');\n  if (parts.length) {\n    return `.${parts[parts.length - 1]}`;\n  }\n  return '';\n};\n\nexport const useFileNameComponent = (file: Nullable<FileData>) => {\n  return useMemo(() => {\n    if (!file) return <TextPlaceholder minLength={15} maxLength={20} />;\n\n    let name;\n    let extension = null;\n\n    const isDir = FileHelper.isDirectory(file as FileData);\n    if (isDir) {\n      name = file.name;\n    } else {\n      extension = file.ext ?? _extname(file.name);\n      name = file.name.substring(0, file.name.length - extension.length);\n    }\n\n    return (\n      <>\n        {name}\n        {extension && <span className=\"chonky-file-entry-description-title-extension\">{extension}</span>}\n      </>\n    );\n  }, [file]);\n};\n\nexport const useThumbnailUrl = (file: Nullable<FileData>) => {\n  const thumbnailGenerator = useSelector(selectThumbnailGenerator);\n  const [thumbnailUrl, setThumbnailUrl] = useState<Nullable<string>>(null);\n  const [thumbnailLoading, setThumbnailLoading] = useState<boolean>(false);\n  const loadingAttempts = useRef(0);\n\n  useEffect(() => {\n    let loadingCancelled = false;\n\n    if (file) {\n      if (thumbnailGenerator) {\n        if (loadingAttempts.current === 0) {\n          setThumbnailLoading(true);\n        }\n        loadingAttempts.current++;\n        Promise.resolve()\n          .then(() => thumbnailGenerator(file))\n          .then((thumbnailUrl: any) => {\n            if (loadingCancelled) return;\n            setThumbnailLoading(false);\n\n            if (thumbnailUrl && typeof thumbnailUrl === 'string') {\n              setThumbnailUrl(thumbnailUrl);\n            }\n          })\n          .catch((error) => {\n            if (!loadingCancelled) setThumbnailLoading(false);\n            Logger.error(`User-defined \"thumbnailGenerator\" handler threw an error: ${error.message}`);\n          });\n      } else if (file.thumbnailUrl) {\n        setThumbnailUrl(file.thumbnailUrl);\n      }\n    }\n\n    return () => {\n      loadingCancelled = true;\n    };\n  }, [file, setThumbnailUrl, setThumbnailLoading, thumbnailGenerator]);\n\n  return { thumbnailUrl, thumbnailLoading };\n};\n\nexport const useFileClickHandlers = (file: Nullable<FileData>, displayIndex: number) => {\n  const dispatch: ChonkyDispatch = useDispatch();\n\n  // Prepare base handlers\n  const onMouseClick = useCallback(\n    (event: MouseClickEvent, clickType: 'single' | 'double') => {\n      if (!file) return;\n\n      dispatch(\n        thunkRequestFileAction(ChonkyActions.MouseClickFile, {\n          clickType,\n          file,\n          fileDisplayIndex: displayIndex,\n          altKey: event.altKey,\n          ctrlKey: event.ctrlKey,\n          shiftKey: event.shiftKey,\n        }),\n      );\n    },\n    [dispatch, file, displayIndex],\n  );\n  const onKeyboardClick = useCallback(\n    (event: KeyboardClickEvent) => {\n      if (!file) return;\n\n      dispatch(\n        thunkRequestFileAction(ChonkyActions.KeyboardClickFile, {\n          file,\n          fileDisplayIndex: displayIndex,\n          enterKey: event.enterKey,\n          spaceKey: event.spaceKey,\n          altKey: event.altKey,\n          ctrlKey: event.ctrlKey,\n          shiftKey: event.shiftKey,\n        }),\n      );\n    },\n    [dispatch, file, displayIndex],\n  );\n\n  // Prepare single/double click handlers\n  const onSingleClick = useCallback((event: MouseClickEvent) => onMouseClick(event, 'single'), [onMouseClick]);\n  const onDoubleClick = useCallback((event: MouseClickEvent) => onMouseClick(event, 'double'), [onMouseClick]);\n\n  return {\n    onSingleClick,\n    onDoubleClick,\n    onKeyboardClick,\n  };\n};\n","import { MaybePromise, Nullable } from 'tsdef';\n\nimport { FileActionState } from './action-handler.types';\nimport { FileViewConfig } from './file-view.types';\nimport { FileFilter, FileMap } from './file.types';\nimport { ChonkyIconName } from './icons.types';\nimport { ChonkyDispatch, RootState } from './redux.types';\nimport { FileSortKeySelector } from './sort.types';\n\nexport interface FileAction {\n  /**\n   * Unique file action ID. If you set the action ID to one of the built-in Chonky\n   * action action IDs, you custom action definition will override the built-in\n   * definition.\n   */\n  id: string;\n  /**\n   * When set to `true`, the action will only be active (dispatchable) when user\n   * selects one or more files. If `fileFilter` is defined, it will be applied to\n   * selection before checking if its empty.\n   */\n  requiresSelection?: boolean; // Requires selection of 1+ files\n  /**\n   * A predicate that determines whether a file should be included in the selection\n   * for this action.\n   */\n  fileFilter?: FileFilter;\n  /**\n   * List of hotkeys that should trigger this action, defined using `hotkey-js`\n   * notation.\n   * @see https://www.npmjs.com/package/hotkeys-js\n   */\n  hotkeys?: string[] | readonly string[];\n  /**\n   * When button is defined and `toolbar` or `contextMenu` is set to `true`, a\n   * button will be added to the relevant UI component. Clicking on this button\n   * will active this action. The appearance of the button will change based on\n   * the action definition and the current Chonky state.\n   */\n  button?: FileActionButton;\n  /**\n   * When `sortKeySelector` is specified, the action becomes a sorting toggle. When\n   * this action is activated, it will sort files using the key selector, toggling\n   * between Ascending and Descending orders.\n   */\n  sortKeySelector?: FileSortKeySelector;\n  /**\n   * When `fileViewConfig` is specified, triggering this action will apply the\n   * provided config to Chonky's file view.\n   */\n  fileViewConfig?: FileViewConfig;\n  /**\n   * When `option` is specified, the action becomes an option toggle. When the action\n   * is activated, the boolean value of the option will be toggled.\n   */\n  option?: FileActionOption;\n  /**\n   * When selection transform is defined, activating this action will update the file\n   * selection. If the transform function returns `null`, selection will be left\n   * untouched.\n   */\n  selectionTransform?: FileSelectionTransform;\n  /**\n   * When effect is defined, it will be called right before dispatching the action to\n   * the user defined action handler. If the effect function returns a promise, Chonky\n   * will wait for the promise to resolve or fail before dispatching the action to the\n   * handler. If this function returns `true`, the file action will NOT be dispatched\n   * the the handler.\n   */\n  effect?: FileActionEffect;\n  /**\n   * When customVisibility is defined, it will change the display state of the file action\n   * The function must return the visibility as one of the CustomVisibilityState values:\n   *  - Hidden\n   *  - Disabled\n   *  - Default\n   *  - Active\n   */\n  customVisibility?: () => CustomVisibilityState;\n  /**\n   * Field used to infer the type of action payload. It is used solely for Typescript\n   * type inference and action validation.\n   */\n  __payloadType?: any;\n  /**\n   * Field used to infer the type of extra state for this action. It is used solely\n   * for Typescript type inference and action validation.\n   */\n  __extraStateType?: any;\n}\n\nexport interface FileActionButton {\n  name: string; // Button name\n  toolbar?: boolean; // Whether to show the button in the toolbar\n  contextMenu?: boolean; // Whether to show the button in the context menu\n  group?: string; // Button group (dropdown in toolbar or section in context menu)\n  tooltip?: string; // Help tooltip text\n  icon?: ChonkyIconName | string | any; // Icon name\n  iconOnly?: boolean; // Whether to only display the icon\n}\n\nexport interface FileActionOption {\n  id: string; // Unique option ID\n  defaultValue: boolean; // Whether the option is enabled by default (required)\n}\n\nexport type FileSelectionTransform = (data: {\n  prevSelection: Set<string>;\n  fileIds: ReadonlyArray<string>;\n  fileMap: Readonly<FileMap>;\n  hiddenFileIds: Set<string>;\n}) => Nullable<Set<string>>;\n\nexport type FileActionEffect<Action extends FileAction = any> = (data: {\n  action: Action;\n  payload: Action['__payloadType'];\n  state: FileActionState<{}>; // extra state is empty on purpose\n  reduxDispatch: ChonkyDispatch;\n  getReduxState: () => RootState;\n}) => MaybePromise<undefined | boolean | void>;\n\nexport type FileActionMap = { [actonId: string]: FileAction };\n\nexport enum CustomVisibilityState {\n  Hidden,\n  Disabled,\n  Default,\n  Active,\n}\n","import { useCallback, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyActions } from '../action-definitions/index';\nimport {\n  selectFileActionData,\n  selectFileViewConfig,\n  selectForceEnableOpenParent,\n  selectOptionValue,\n  selectParentFolder,\n  selectSelectedFilesForActionCount,\n  selectSortActionId,\n  selectSortOrder,\n} from '../redux/selectors';\nimport { useParamSelector } from '../redux/store';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { ChonkyIconName } from '../types/icons.types';\nimport { CustomVisibilityState } from '../types/action.types';\nimport { SortOrder } from '../types/sort.types';\nimport { FileHelper } from './file-helper';\n\nexport const useFileActionTrigger = (fileActionId: string) => {\n  const dispatch: any = useDispatch();\n  const fileAction = useParamSelector(selectFileActionData, fileActionId);\n  return useCallback(() => dispatch(thunkRequestFileAction(fileAction, undefined)), [dispatch, fileAction]);\n};\n\nexport const useFileActionProps = (\n  fileActionId: string,\n): { icon: Nullable<ChonkyIconName | string>; active: boolean; disabled: boolean } => {\n  const parentFolder = useSelector(selectParentFolder);\n  const forceEnableOpenParent = useSelector(selectForceEnableOpenParent);\n  const fileViewConfig = useSelector(selectFileViewConfig);\n\n  const sortActionId = useSelector(selectSortActionId);\n  const sortOrder = useSelector(selectSortOrder);\n\n  const action = useParamSelector(selectFileActionData, fileActionId);\n  // @ts-ignore\n  const optionValue = useParamSelector(selectOptionValue, action?.option?.id);\n\n  const actionSelectionSize = useParamSelector(selectSelectedFilesForActionCount, fileActionId);\n\n  const actionSelectionEmpty = actionSelectionSize === 0;\n\n  return useMemo(() => {\n    if (!action) return { icon: null, active: false, disabled: true };\n\n    let icon = action.button?.icon ?? null;\n    if (action.sortKeySelector) {\n      if (sortActionId === action.id) {\n        if (sortOrder === SortOrder.ASC) {\n          icon = ChonkyIconName.sortAsc;\n        } else {\n          icon = ChonkyIconName.sortDesc;\n        }\n      } else {\n        icon = ChonkyIconName.placeholder;\n      }\n    } else if (action.option) {\n      if (optionValue) {\n        icon = ChonkyIconName.toggleOn;\n      } else {\n        icon = ChonkyIconName.toggleOff;\n      }\n    }\n\n    const isSortButtonAndCurrentSort = action.id === sortActionId;\n    const isFileViewButtonAndCurrentView = action.fileViewConfig === fileViewConfig;\n    const isOptionAndEnabled = action.option ? !!optionValue : false;\n\n    let customDisabled = false;\n    let customActive = false;\n    if (action.customVisibility !== undefined) {\n      customDisabled = action.customVisibility() === CustomVisibilityState.Disabled;\n      customActive = action.customVisibility() === CustomVisibilityState.Active;\n    }\n    const active = isSortButtonAndCurrentSort || isFileViewButtonAndCurrentView || isOptionAndEnabled || customActive;\n\n    let disabled: boolean = (!!action.requiresSelection && actionSelectionEmpty) || customDisabled;\n\n    if (action.id === ChonkyActions.OpenParentFolder.id) {\n      // We treat `open_parent_folder` file action as a special case as it\n      // requires the parent folder to be present to work, unless the\n      // forceOpenParent prop is set, which forces the action to be available.\n      disabled = disabled || (!forceEnableOpenParent && !FileHelper.isOpenable(parentFolder));\n    }\n\n    return { icon, active, disabled };\n  }, [parentFolder, fileViewConfig, sortActionId, sortOrder, action, optionValue, actionSelectionEmpty]);\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Button from '@mui/material/Button';\nimport React, { useContext } from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { selectFileActionData } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { CustomVisibilityState } from '../../types/action.types';\nimport { useFileActionProps, useFileActionTrigger } from '../../util/file-actions';\nimport { useLocalizedFileActionStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface ToolbarButtonProps {\n  className?: string;\n  text: string;\n  tooltip?: string;\n  active?: boolean;\n  icon?: Nullable<ChonkyIconName | string>;\n  iconOnly?: boolean;\n  onClick?: (event: React.MouseEvent<HTMLButtonElement>) => void;\n  disabled?: boolean;\n  dropdown?: boolean;\n}\n\nexport const ToolbarButton: React.FC<ToolbarButtonProps> = React.memo((props) => {\n  const { className: externalClassName, text, tooltip, active, icon, iconOnly, onClick, disabled, dropdown } = props;\n  const classes = useStyles();\n  const ChonkyIcon = useContext(ChonkyIconContext);\n\n  const iconComponent =\n    icon || iconOnly ? (\n      <div className={iconOnly ? '' : classes.iconWithText}>\n        <ChonkyIcon icon={icon ? icon : ChonkyIconName.fallbackIcon} fixedWidth={true} />\n      </div>\n    ) : null;\n\n  const className = c({\n    [externalClassName ?? '']: true,\n    [classes.baseButton]: true,\n    [classes.iconOnlyButton]: iconOnly,\n    [classes.activeButton]: !!active,\n  });\n  return (\n    <Button className={className} onClick={onClick} title={tooltip ? tooltip : text} disabled={disabled || !onClick}>\n      {iconComponent}\n      {text && !iconOnly && <span>{text}</span>}\n      {dropdown && text && !iconOnly && (\n        <div className={classes.iconDropdown}>\n          <ChonkyIcon icon={ChonkyIconName.dropdown} fixedWidth={true} />\n        </div>\n      )}\n    </Button>\n  );\n});\n\nconst useStyles = makeGlobalChonkyStyles((theme) => ({\n  baseButton: {\n    fontSize: important(theme.toolbar.fontSize),\n    textTransform: important('none'),\n    letterSpacing: important(0),\n    minWidth: important('auto'),\n    lineHeight: theme.toolbar.lineHeight,\n    height: theme.toolbar.size,\n    paddingBottom: important(0),\n    paddingTop: important(0),\n    paddingLeft: theme.toolbar.buttonPadding,\n    paddingRight: theme.toolbar.buttonPadding,\n  },\n  iconWithText: {\n    marginRight: 8,\n  },\n  iconOnlyButton: {\n    width: theme.toolbar.size,\n    textAlign: 'center',\n  },\n  iconDropdown: {\n    fontSize: '0.7em',\n    marginLeft: 2,\n    marginTop: 1,\n  },\n  activeButton: {\n    color: important(theme.colors.textActive),\n  },\n}));\n\nexport interface SmartToolbarButtonProps {\n  fileActionId: string;\n}\n\nexport const SmartToolbarButton: React.FC<SmartToolbarButtonProps> = React.memo((props) => {\n  const { fileActionId } = props;\n\n  const action = useParamSelector(selectFileActionData, fileActionId);\n  const triggerAction = useFileActionTrigger(fileActionId);\n  const { icon, active, disabled } = useFileActionProps(fileActionId);\n  const { buttonName, buttonTooltip } = useLocalizedFileActionStrings(action);\n\n  if (!action) return null;\n  const { button } = action;\n  if (!button) return null;\n  if (action.customVisibility !== undefined && action.customVisibility() === CustomVisibilityState.Hidden) return null;\n\n  return (\n    <ToolbarButton\n      text={buttonName}\n      tooltip={buttonTooltip}\n      icon={icon}\n      iconOnly={button.iconOnly}\n      active={active}\n      onClick={triggerAction}\n      disabled={disabled}\n    />\n  );\n});\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useContext, useMemo } from 'react';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { useDndHoverOpen, useFileDrop } from '../../util/dnd';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeLocalChonkyStyles } from '../../util/styles';\nimport { useDndIcon } from '../file-list/FileEntry-hooks';\nimport { FolderChainItem } from './FileNavbar-hooks';\nimport { ToolbarButton } from './ToolbarButton';\n\nexport interface FolderChainButtonProps {\n  first: boolean;\n  current: boolean;\n  item: FolderChainItem;\n}\n\nexport const FolderChainButton: React.FC<FolderChainButtonProps> = React.memo(({ first, current, item }) => {\n  const { file, disabled, onClick } = item;\n  const { dndIsOver, dndCanDrop, drop } = useFileDrop({\n    file,\n    forceDisableDrop: !file || current,\n  });\n  const dndState = useMemo<DndEntryState>(\n    () => ({\n      dndIsOver,\n      dndCanDrop,\n      dndIsDragging: false,\n    }),\n    [dndCanDrop, dndIsOver],\n  );\n  useDndHoverOpen(file, dndState);\n  const dndIconName = useDndIcon(dndState);\n  const ChonkyIcon = useContext(ChonkyIconContext);\n\n  const classes = useStyles(dndState);\n  const className = c({\n    [classes.baseBreadcrumb]: true,\n    [classes.disabledBreadcrumb]: disabled,\n    [classes.currentBreadcrumb]: current,\n  });\n  const text = file ? file.name : 'Loading...';\n  const icon = first && file?.folderChainIcon === undefined ? ChonkyIconName.folder : file?.folderChainIcon;\n\n  return (\n    <div className={classes.buttonContainer} ref={file ? drop : null}>\n      {file && dndIconName && (\n        <div className={classes.dndIndicator}>\n          <ChonkyIcon icon={dndIconName} fixedWidth={true} />\n        </div>\n      )}\n      <ToolbarButton icon={icon} className={className} text={text} disabled={disabled} onClick={onClick} />\n    </div>\n  );\n});\n\nconst useStyles = makeLocalChonkyStyles((theme) => ({\n  buttonContainer: {\n    position: 'relative',\n  },\n  baseBreadcrumb: {\n    color: (dndState: DndEntryState) => {\n      let color = theme.palette.text.primary;\n      if (dndState.dndIsOver) {\n        color = dndState.dndCanDrop ? theme.dnd.canDropColor : theme.dnd.cannotDropColor;\n      }\n      return important(color);\n    },\n  },\n  disabledBreadcrumb: {\n    // Constant function here is on purpose. Without the function, the color here\n    // does not override the `baseBreadcrumb` color from above.\n    color: () => important(theme.palette.text.disabled),\n  },\n  currentBreadcrumb: {\n    textDecoration: important('underline'),\n  },\n  dndIndicator: {\n    color: (dndState: DndEntryState) => (dndState.dndCanDrop ? theme.dnd.canDropColor : theme.dnd.cannotDropColor),\n    backgroundColor: (dndState: DndEntryState) =>\n      dndState.dndCanDrop ? theme.dnd.canDropMask : theme.dnd.cannotDropMask,\n    lineHeight: `calc(${theme.toolbar.lineHeight} - 6px)`,\n    transform: 'translateX(-50%) translateY(-50%)',\n    borderRadius: theme.toolbar.buttonRadius,\n    height: theme.toolbar.size - 6,\n    width: theme.toolbar.size - 6,\n    boxSizing: 'border-box',\n    position: 'absolute',\n    textAlign: 'center',\n    left: '50%',\n    top: '50%',\n    zIndex: 5,\n  },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Box from '@mui/material/Box';\nimport Breadcrumbs from '@mui/material/Breadcrumbs';\nimport React, { ReactElement, useMemo } from 'react';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\nimport { useFolderChainItems } from './FileNavbar-hooks';\nimport { FolderChainButton } from './FolderChainButton';\nimport { SmartToolbarButton } from './ToolbarButton';\n\nexport interface FileNavbarProps {}\n\nexport const FileNavbar: React.FC<FileNavbarProps> = React.memo(() => {\n  const classes = useStyles();\n  const folderChainItems = useFolderChainItems();\n\n  const folderChainComponents = useMemo(() => {\n    const components: ReactElement[] = [];\n    for (let i = 0; i < folderChainItems.length; ++i) {\n      const key = `folder-chain-${i}`;\n      const component = (\n        <FolderChainButton\n          key={key}\n          first={i === 0}\n          current={i === folderChainItems.length - 1}\n          item={folderChainItems[i]}\n        />\n      );\n      components.push(component);\n    }\n    return components;\n  }, [folderChainItems]);\n\n  return (\n    <Box className={classes.navbarWrapper}>\n      <Box className={classes.navbarContainer}>\n        <SmartToolbarButton fileActionId={ChonkyActions.OpenParentFolder.id} />\n        <Breadcrumbs className={classes.navbarBreadcrumbs} classes={{ separator: classes.separator }}>\n          {folderChainComponents}\n        </Breadcrumbs>\n      </Box>\n    </Box>\n  );\n});\n\nconst useStyles = makeGlobalChonkyStyles((theme) => ({\n  navbarWrapper: {\n    paddingBottom: theme.margins.rootLayoutMargin,\n  },\n  navbarContainer: {\n    display: 'flex',\n  },\n  upDirectoryButton: {\n    fontSize: important(theme.toolbar.fontSize),\n    height: theme.toolbar.size,\n    width: theme.toolbar.size,\n    padding: '0px !important',\n  },\n  navbarBreadcrumbs: {\n    fontSize: important(theme.toolbar.fontSize),\n    flexGrow: 100,\n  },\n  separator: {\n    marginRight: important(4),\n    marginLeft: important(4),\n  },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport ListItemIcon from '@mui/material/ListItemIcon';\nimport ListItemText from '@mui/material/ListItemText';\nimport MenuItem from '@mui/material/MenuItem';\nimport React, { useCallback, useContext } from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { selectFileActionData } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { CustomVisibilityState } from '../../types/action.types';\nimport { useFileActionProps, useFileActionTrigger } from '../../util/file-actions';\nimport { useLocalizedFileActionStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface ToolbarDropdownButtonProps {\n  text: string;\n  active?: boolean;\n  icon?: Nullable<ChonkyIconName | string>;\n  onClick?: () => void;\n  disabled?: boolean;\n}\n\nexport const ToolbarDropdownButton = React.forwardRef(\n  (props: ToolbarDropdownButtonProps, ref: React.Ref<HTMLLIElement>) => {\n    const { text, active, icon, onClick, disabled } = props;\n    const classes = useStyles();\n    const ChonkyIcon = useContext(ChonkyIconContext);\n\n    const className = c({\n      [classes.baseButton]: true,\n      [classes.activeButton]: active,\n    });\n    return (\n      <MenuItem ref={ref} className={className} onClick={onClick} disabled={disabled}>\n        {icon && (\n          <ListItemIcon className={classes.icon}>\n            <ChonkyIcon icon={icon} fixedWidth={true} />\n          </ListItemIcon>\n        )}\n        <ListItemText primaryTypographyProps={{ className: classes.text }}>{text}</ListItemText>\n      </MenuItem>\n    );\n  },\n);\n\nconst useStyles = makeGlobalChonkyStyles((theme) => ({\n  baseButton: {\n    lineHeight: important(theme.toolbar.lineHeight),\n    height: important(theme.toolbar.size),\n    minHeight: important('auto'),\n    minWidth: important('auto'),\n    padding: important(theme.toolbar.buttonPadding),\n  },\n  icon: {\n    fontSize: important(theme.toolbar.fontSize),\n    minWidth: important('auto'),\n    color: important('inherit'),\n    marginRight: 8,\n  },\n  text: {\n    fontSize: important(theme.toolbar.fontSize),\n  },\n  activeButton: {\n    color: important(theme.colors.textActive),\n  },\n}));\n\nexport interface SmartToolbarDropdownButtonProps {\n  fileActionId: string;\n  onClickFollowUp?: () => void;\n}\n\nexport const SmartToolbarDropdownButton = React.forwardRef(\n  (props: SmartToolbarDropdownButtonProps, ref: React.Ref<HTMLLIElement>) => {\n    const { fileActionId, onClickFollowUp } = props;\n\n    const action = useParamSelector(selectFileActionData, fileActionId);\n    const triggerAction = useFileActionTrigger(fileActionId);\n    const { icon, active, disabled } = useFileActionProps(fileActionId);\n    const { buttonName } = useLocalizedFileActionStrings(action);\n\n    // Combine external click handler with internal one\n    const handleClick = useCallback(() => {\n      triggerAction();\n      if (onClickFollowUp) onClickFollowUp();\n    }, [onClickFollowUp, triggerAction]);\n\n    if (!action) return null;\n    const { button } = action;\n    if (!button) return null;\n    if (action.customVisibility !== undefined && action.customVisibility() === CustomVisibilityState.Hidden)\n      return null;\n\n    return (\n      <ToolbarDropdownButton\n        ref={ref}\n        text={buttonName}\n        icon={icon}\n        onClick={handleClick}\n        active={active}\n        disabled={disabled}\n      />\n    );\n  },\n);\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Menu from '@mui/material/Menu';\nimport React, { useCallback, useMemo } from 'react';\n\nimport { FileActionGroup } from '../../types/action-menus.types';\nimport { useLocalizedFileActionGroup } from '../../util/i18n';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\nimport { ToolbarButton, ToolbarButtonProps } from './ToolbarButton';\nimport { SmartToolbarDropdownButton } from './ToolbarDropdownButton';\n\nexport type ToolbarDropdownProps = FileActionGroup;\n\nexport const ToolbarDropdown: React.FC<ToolbarDropdownProps> = React.memo((props) => {\n  const { name, icon, fileActionIds } = props;\n  const [anchor, setAnchor] = React.useState<null | HTMLElement>(null);\n\n  const handleClick = useCallback(\n    (event: React.MouseEvent<HTMLButtonElement>) => setAnchor(event.currentTarget),\n    [setAnchor],\n  );\n  const handleClose = useCallback(() => setAnchor(null), [setAnchor]);\n\n  const menuItemComponents = useMemo(\n    () =>\n      fileActionIds.map((id) => (\n        <SmartToolbarDropdownButton key={`menu-item-${id}`} fileActionId={id} onClickFollowUp={handleClose} />\n      )),\n    [fileActionIds, handleClose],\n  );\n\n  const localizedName = useLocalizedFileActionGroup(name);\n  const toolbarButtonProps: ToolbarButtonProps = {\n    text: localizedName,\n    onClick: handleClick,\n    dropdown: true,\n  };\n  if (icon) {\n    toolbarButtonProps.icon = icon;\n    toolbarButtonProps.iconOnly = true;\n    toolbarButtonProps.text = '';\n  }\n\n  const classes = useStyles();\n  return (\n    <>\n      <ToolbarButton {...toolbarButtonProps} />\n      <Menu\n        autoFocus\n        keepMounted\n        elevation={2}\n        anchorEl={anchor}\n        onClose={handleClose}\n        open={Boolean(anchor)}\n        transitionDuration={150}\n        classes={{ list: classes.dropdownList }}\n      >\n        {menuItemComponents}\n      </Menu>\n    </>\n  );\n});\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n  dropdownList: {\n    paddingBottom: important(0),\n    paddingTop: important(0),\n  },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\nimport { useIntl } from 'react-intl';\nimport { useSelector } from 'react-redux';\n\nimport Typography from '@mui/material/Typography';\n\nimport { selectHiddenFileCount, selectors, selectSelectionSize } from '../../redux/selectors';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface ToolbarInfoProps {}\n\nexport const ToolbarInfo: React.FC<ToolbarInfoProps> = React.memo(() => {\n  const classes = useStyles();\n\n  const displayFileIds = useSelector(selectors.getDisplayFileIds);\n  const selectionSize = useSelector(selectSelectionSize);\n  const hiddenCount = useSelector(selectHiddenFileCount);\n\n  const intl = useIntl();\n  const fileCountString = intl.formatMessage(\n    {\n      id: getI18nId(I18nNamespace.Toolbar, 'visibleFileCount'),\n      defaultMessage: `{fileCount, plural,\n                =0 {# items}\n                one {# item}\n                other {# items}\n            }`,\n    },\n    { fileCount: displayFileIds.length },\n  );\n  const selectedString = intl.formatMessage(\n    {\n      id: getI18nId(I18nNamespace.Toolbar, 'selectedFileCount'),\n      defaultMessage: `{fileCount, plural,\n                =0 {}\n                other {# selected}\n            }`,\n    },\n    { fileCount: selectionSize },\n  );\n  const hiddenString = intl.formatMessage(\n    {\n      id: getI18nId(I18nNamespace.Toolbar, 'hiddenFileCount'),\n      defaultMessage: `{fileCount, plural,\n                =0 {}\n                other {# hidden}\n            }`,\n    },\n    { fileCount: hiddenCount },\n  );\n\n  return (\n    <div className={classes.infoContainer}>\n      <Typography className={classes.infoText} variant=\"body1\">\n        {fileCountString}\n        {(selectedString || hiddenString) && (\n          <span className={classes.extraInfoSpan}>\n            (<span className={classes.selectionSizeText}>{selectedString}</span>\n            {selectedString && hiddenString && ', '}\n            <span className={classes.hiddenCountText}>{hiddenString}</span>)\n          </span>\n        )}\n      </Typography>\n    </div>\n  );\n});\n\nconst useStyles = makeGlobalChonkyStyles((theme) => ({\n  infoContainer: {\n    height: theme.toolbar.size,\n    display: 'flex',\n  },\n  infoText: {\n    lineHeight: important(theme.toolbar.lineHeight),\n    fontSize: important(theme.toolbar.fontSize),\n    marginLeft: important(12),\n    height: theme.toolbar.size,\n  },\n  extraInfoSpan: {\n    marginRight: important(8),\n    marginLeft: important(8),\n    opacity: 0.8,\n  },\n  selectionSizeText: {\n    color: theme.colors.textActive,\n  },\n  hiddenCountText: {},\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport { useIntl } from 'react-intl';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport InputAdornment from '@mui/material/InputAdornment';\nimport TextField from '@mui/material/TextField';\n\nimport { reduxActions } from '../../redux/reducers';\nimport { selectSearchString } from '../../redux/selectors';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { useDebounce } from '../../util/hooks-helpers';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\nimport { ChonkyDispatch } from '../../types/redux.types';\n\nexport interface ToolbarSearchProps {}\n\nexport const ToolbarSearch: React.FC<ToolbarSearchProps> = React.memo(() => {\n  const intl = useIntl();\n  const searchPlaceholderString = intl.formatMessage({\n    id: getI18nId(I18nNamespace.Toolbar, 'searchPlaceholder'),\n    defaultMessage: 'Search',\n  });\n\n  const classes = useStyles();\n  const ChonkyIcon = useContext(ChonkyIconContext);\n\n  const searchInputRef = useRef<HTMLInputElement>();\n\n  const dispatch: ChonkyDispatch = useDispatch();\n  const reduxSearchString = useSelector(selectSearchString);\n\n  const [localSearchString, setLocalSearchString] = useState(reduxSearchString);\n  const [debouncedLocalSearchString] = useDebounce(localSearchString, 50);\n  const [showLoadingIndicator, setShowLoadingIndicator] = useState(false);\n\n  useEffect(() => {\n    dispatch(\n      reduxActions.setFocusSearchInput(() => {\n        if (searchInputRef.current) searchInputRef.current.focus();\n      }),\n    );\n    return () => {\n      dispatch(reduxActions.setFocusSearchInput(null));\n    };\n  }, [dispatch]);\n\n  useEffect(() => {\n    setShowLoadingIndicator(false);\n    dispatch(reduxActions.setSearchString(debouncedLocalSearchString));\n  }, [debouncedLocalSearchString, dispatch]);\n\n  const handleChange = useCallback((event: React.FormEvent<HTMLInputElement>) => {\n    setShowLoadingIndicator(true);\n    setLocalSearchString(event.currentTarget.value);\n  }, []);\n  const handleKeyUp = useCallback(\n    (event: React.KeyboardEvent<HTMLInputElement>) => {\n      // Remove focus from the search input field when user presses escape.\n      // Note: We use KeyUp instead of KeyPress because some browser plugins can\n      //       intercept KeyPress events with Escape key.\n      //       @see https://stackoverflow.com/a/37461974\n      if (event.key === 'Escape') {\n        setLocalSearchString('');\n        dispatch(reduxActions.setSearchString(''));\n        if (searchInputRef.current) searchInputRef.current.blur();\n      }\n    },\n    [dispatch],\n  );\n\n  return (\n    <TextField\n      className={classes.searchFieldContainer}\n      size=\"small\"\n      variant=\"outlined\"\n      value={localSearchString}\n      placeholder={searchPlaceholderString}\n      onChange={handleChange as any}\n      inputRef={searchInputRef}\n      InputProps={{\n        onKeyUp: handleKeyUp,\n        startAdornment: (\n          <InputAdornment className={classes.searchIcon} position=\"start\">\n            <ChonkyIcon\n              icon={showLoadingIndicator ? ChonkyIconName.loading : ChonkyIconName.search}\n              spin={showLoadingIndicator}\n            />\n          </InputAdornment>\n        ),\n        className: classes.searchFieldInput,\n      }}\n      inputProps={{ className: classes.searchFieldInputInner }}\n    />\n  );\n});\n\nconst useStyles = makeGlobalChonkyStyles((theme) => ({\n  searchFieldContainer: {\n    height: theme.toolbar.size,\n    width: 150,\n  },\n  searchIcon: {\n    fontSize: '0.9em',\n    opacity: 0.75,\n  },\n  searchFieldInput: {\n    lineHeight: important(0),\n    padding: important(0),\n    margin: important(0),\n    fontSize: important(theme.toolbar.fontSize),\n    borderRadius: theme.toolbar.buttonRadius,\n    height: theme.toolbar.size - 4,\n    paddingLeft: important(8),\n    marginTop: 2,\n  },\n  searchFieldInputInner: {\n    lineHeight: important(`${theme.toolbar.size - 4}px`),\n    fontSize: important(theme.toolbar.fontSize),\n    height: important(theme.toolbar.size - 4),\n    padding: important([0, 8, 0, 0]),\n    margin: important(0),\n    '-webkit-appearance': 'none',\n  },\n}));\n","import React, { ReactElement, ReactNode, useMemo } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { selectToolbarItems, selectHideToolbarInfo } from '../../redux/selectors';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\nimport { SmartToolbarButton } from './ToolbarButton';\nimport { ToolbarDropdown } from './ToolbarDropdown';\nimport { ToolbarInfo } from './ToolbarInfo';\nimport { ToolbarSearch } from './ToolbarSearch';\n\nexport interface FileToolbarProps {}\n\nexport const FileToolbar: React.FC<FileToolbarProps & { children?: ReactNode }> = React.memo((props) => {\n  const { children } = props;\n  const classes = useStyles();\n  const toolbarItems = useSelector(selectToolbarItems);\n\n  const toolbarItemComponents = useMemo(() => {\n    const components: ReactElement[] = [];\n    for (let i = 0; i < toolbarItems.length; ++i) {\n      const item = toolbarItems[i];\n\n      const key = `toolbar-item-${typeof item === 'string' ? item : item.name}`;\n      const component =\n        typeof item === 'string' ? (\n          <SmartToolbarButton key={key} fileActionId={item} />\n        ) : (\n          <ToolbarDropdown key={key} {...item} />\n        );\n      components.push(component);\n    }\n    return components;\n  }, [toolbarItems]);\n\n  const hideToolbarInfo = useSelector(selectHideToolbarInfo);\n  return (\n    <div className={classes.toolbarWrapper}>\n      <div className={classes.toolbarContainer}>\n        <div className={classes.toolbarLeft}>\n          <ToolbarSearch />\n          {!hideToolbarInfo && <ToolbarInfo />}\n          {children}\n        </div>\n        <div className={classes.toolbarRight}>{toolbarItemComponents}</div>\n      </div>\n    </div>\n  );\n});\n\nconst useStyles = makeGlobalChonkyStyles((theme) => ({\n  toolbarWrapper: {},\n  toolbarContainer: {\n    flexWrap: 'wrap-reverse',\n    display: 'flex',\n  },\n  toolbarLeft: {\n    paddingBottom: theme.margins.rootLayoutMargin,\n    flexWrap: 'wrap',\n    flexGrow: 10000,\n    display: 'flex',\n  },\n  toolbarLeftFiller: {\n    flexGrow: 10000,\n  },\n  toolbarRight: {\n    paddingBottom: theme.margins.rootLayoutMargin,\n    flexWrap: 'wrap',\n    display: 'flex',\n  },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { CSSProperties, useContext } from 'react';\nimport { useIntl } from 'react-intl';\n\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface FileListEmptyProps {\n  width: number;\n  height: number;\n}\n\nexport const FileListEmpty: React.FC<FileListEmptyProps> = (props) => {\n  const { width, height } = props;\n  const classes = useStyles();\n  const ChonkyIcon = useContext(ChonkyIconContext);\n  const style: CSSProperties = {\n    width,\n    height,\n  };\n\n  const intl = useIntl();\n  const emptyString = intl.formatMessage({\n    id: getI18nId(I18nNamespace.FileList, 'nothingToShow'),\n    defaultMessage: 'Nothing to show',\n  });\n\n  return (\n    <div className={classes.fileListEmpty} style={style}>\n      <div className={classes.fileListEmptyContent}>\n        <ChonkyIcon icon={ChonkyIconName.folderOpen} />\n        &nbsp; {emptyString}\n      </div>\n    </div>\n  );\n};\n\nconst useStyles = makeGlobalChonkyStyles((theme) => ({\n  fileListEmpty: {\n    color: theme.palette.text.disabled,\n    position: 'relative',\n    textAlign: 'center',\n    fontSize: '1.2em',\n  },\n  fileListEmptyContent: {\n    transform: 'translateX(-50%) translateY(-50%)',\n    position: 'absolute',\n    left: '50%',\n    top: '50%',\n  },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useCallback, useRef } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Nilable, Nullable } from 'tsdef';\n\nimport { selectDoubleClickDelay } from '../../redux/selectors';\nimport {\n  KeyboardClickEvent,\n  KeyboardClickEventHandler,\n  MouseClickEvent,\n  MouseClickEventHandler,\n} from './ClickableWrapper';\n\nexport const useClickHandler = (\n  onSingleClick: Nilable<MouseClickEventHandler>,\n  onDoubleClick: Nilable<MouseClickEventHandler>,\n) => {\n  const doubleClickDelay = useSelector(selectDoubleClickDelay);\n\n  const counter = useRef({\n    clickCount: 0,\n    clickTimeout: null as Nullable<number>,\n  });\n\n  return useCallback(\n    (event: React.MouseEvent) => {\n      const mouseClickEvent: MouseClickEvent = {\n        altKey: event.altKey,\n        ctrlKey: event.ctrlKey || event.metaKey,\n        shiftKey: event.shiftKey,\n      };\n\n      counter.current.clickCount++;\n      if (counter.current.clickCount === 1) {\n        if (onSingleClick) {\n          event.preventDefault();\n          onSingleClick(mouseClickEvent);\n        }\n        counter.current.clickCount = 1;\n        // @ts-ignore\n        counter.current.clickTimeout = setTimeout(() => (counter.current.clickCount = 0), doubleClickDelay);\n      } else if (counter.current.clickCount === 2) {\n        if (onDoubleClick) {\n          event.preventDefault();\n          onDoubleClick(mouseClickEvent);\n        }\n        if (typeof counter.current.clickTimeout === 'number') {\n          clearTimeout(counter.current.clickTimeout);\n          counter.current.clickTimeout = null;\n          counter.current.clickCount = 0;\n        }\n      }\n    },\n    [doubleClickDelay, onSingleClick, onDoubleClick, counter],\n  );\n};\n\nexport const useKeyDownHandler = (onKeyboardClick?: KeyboardClickEventHandler) => {\n  return useCallback(\n    (event: React.KeyboardEvent) => {\n      if (!onKeyboardClick) return;\n\n      const keyboardClickEvent: KeyboardClickEvent = {\n        enterKey: event.nativeEvent.code === 'Enter',\n        spaceKey: event.nativeEvent.code === 'Space',\n        altKey: event.altKey,\n        ctrlKey: event.ctrlKey,\n        shiftKey: event.shiftKey,\n      };\n\n      if (keyboardClickEvent.spaceKey || keyboardClickEvent.enterKey) {\n        event.preventDefault();\n        event.stopPropagation();\n        onKeyboardClick(keyboardClickEvent);\n      }\n    },\n    [onKeyboardClick],\n  );\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useCallback } from 'react';\nimport { AnyObjectWithStringKeys } from 'tsdef';\n\nimport { useClickHandler, useKeyDownHandler } from './ClickableWrapper-hooks';\n\nexport interface MouseClickEvent {\n  altKey: boolean;\n  ctrlKey: boolean;\n  shiftKey: boolean;\n}\nexport type MouseClickEventHandler = (event: MouseClickEvent) => void;\n\nexport interface KeyboardClickEvent {\n  enterKey: boolean;\n  spaceKey: boolean;\n  altKey: boolean;\n  ctrlKey: boolean;\n  shiftKey: boolean;\n}\nexport type KeyboardClickEventHandler = (event: KeyboardClickEvent) => void;\n\nexport interface ClickableWrapperProps {\n  wrapperTag: any;\n  passthroughProps?: any;\n\n  onSingleClick?: MouseClickEventHandler;\n  onDoubleClick?: MouseClickEventHandler;\n  onKeyboardClick?: KeyboardClickEventHandler;\n  setFocused?: (focused: boolean) => void;\n  children?: React.ReactNode;\n}\n\nexport const ClickableWrapper: React.FC<ClickableWrapperProps> = (props) => {\n  const {\n    children,\n    wrapperTag: WrapperTag,\n    passthroughProps,\n    onSingleClick,\n    onDoubleClick,\n    onKeyboardClick,\n    setFocused,\n  } = props;\n\n  const handleClick = useClickHandler(onSingleClick, onDoubleClick);\n  const handleKeyDown = useKeyDownHandler(onKeyboardClick);\n\n  const compProps: AnyObjectWithStringKeys = {\n    onFocus: useCallback(() => setFocused && setFocused(true), [setFocused]),\n    onBlur: useCallback(() => setFocused && setFocused(false), [setFocused]),\n  };\n\n  if (onSingleClick || onDoubleClick || onKeyboardClick) {\n    compProps.onClick = handleClick;\n    compProps.onKeyDown = handleKeyDown;\n    compProps.tabIndex = 0;\n  }\n\n  const mergedProps = { ...compProps, ...passthroughProps };\n  return <WrapperTag {...mergedProps}>{children}</WrapperTag>;\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { FileData } from '../../types/file.types';\nimport { makeLocalChonkyStyles } from '../../util/styles';\nimport { useFileNameComponent, useModifierIconComponents } from './FileEntry-hooks';\n\nexport interface FileEntryNameProps {\n  file: Nullable<FileData>;\n  className?: string;\n}\n\nexport const FileEntryName: React.FC<FileEntryNameProps> = React.memo(({ file, className }) => {\n  const modifierIconComponents = useModifierIconComponents(file);\n  const fileNameComponent = useFileNameComponent(file);\n\n  const classes = useStyles();\n  return (\n    <span className={className} title={file ? file.name : undefined}>\n      {modifierIconComponents.length > 0 && <span className={classes.modifierIcons}>{modifierIconComponents}</span>}\n      {fileNameComponent}\n    </span>\n  );\n});\nFileEntryName.displayName = 'FileEntryName';\n\nconst useStyles = makeLocalChonkyStyles((theme) => ({\n  modifierIcons: {\n    color: theme.palette.text.primary,\n    position: 'relative',\n    fontSize: '0.775em',\n    paddingRight: 5,\n  },\n}));\n","import React, { useContext } from 'react';\n\nimport { FileEntryProps } from '../../types/file-list.types';\nimport { useLocalizedFileEntryStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { makeLocalChonkyStyles } from '../../util/styles';\nimport { TextPlaceholder } from '../external/TextPlaceholder';\nimport { useFileEntryHtmlProps, useFileEntryState } from './FileEntry-hooks';\nimport { FileEntryName } from './FileEntryName';\nimport { FileEntryState } from './GridEntryPreview';\n\nexport const CompactEntry: React.FC<FileEntryProps> = React.memo(\n  // @ts-ignore\n  ({ file, selected, focused, dndState }) => {\n    const entryState: FileEntryState = useFileEntryState(file, selected, focused);\n\n    const { fileModDateString, fileSizeString } = useLocalizedFileEntryStrings(file);\n\n    const classes = useStyles(entryState);\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    const fileEntryHtmlProps = useFileEntryHtmlProps(file);\n    return (\n      <div className={classes.listFileEntry} {...fileEntryHtmlProps}>\n        <div className={classes.listFileEntryIcon}>\n          <ChonkyIcon icon={entryState.icon} spin={entryState.iconSpin} fixedWidth={true} />\n        </div>\n        <div className={classes.listFileEntryDescription}>\n          <div className={classes.listFileEntryName} title={file ? file.name : undefined}>\n            <FileEntryName file={file} />\n          </div>\n          <div className={classes.listFileEntryProperties}>\n            <div className={classes.listFileEntryProperty}>\n              {file ? fileModDateString ?? <span></span> : <TextPlaceholder minLength={5} maxLength={15} />}\n            </div>\n            <div className={classes.listFileEntryProperty}>\n              {file ? fileSizeString ?? <span></span> : <TextPlaceholder minLength={10} maxLength={20} />}\n            </div>\n          </div>\n        </div>\n        <div className=\"chonky-file-entry-outline\"></div>\n        <div className=\"chonky-file-entry-selection\"></div>\n      </div>\n    );\n  },\n);\n\nconst useStyles = makeLocalChonkyStyles((theme) => ({\n  listFileEntry: {\n    fontSize: theme.listFileEntry.fontSize,\n    alignItems: 'center',\n    position: 'relative',\n    display: 'flex',\n    height: '100%',\n  },\n  listFileEntryIcon: {\n    backgroundColor: (state: FileEntryState) => state.color,\n    boxShadow: 'inset rgba(255, 255, 255, 0.5) 0 0 0 999px',\n    borderRadius: theme.listFileEntry.iconBorderRadius,\n    fontSize: theme.listFileEntry.iconFontSize,\n    color: '#fff',\n    padding: 8,\n  },\n  listFileEntryDescription: {\n    flexDirection: 'column',\n    display: 'flex',\n    flexGrow: 1,\n  },\n  listFileEntryName: {\n    padding: [0, 8, 4, 8],\n  },\n  listFileEntryProperties: {\n    fontSize: theme.listFileEntry.propertyFontSize,\n    flexDirection: 'row',\n    display: 'flex',\n  },\n  listFileEntryProperty: {\n    padding: [0, 8],\n    opacity: 0.4,\n  },\n}));\n","import React from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { FileData } from '../../types/file.types';\nimport { useDndHoverOpen, useFileEntryDnD } from '../../util/dnd';\nimport { FileHelper } from '../../util/file-helper';\nimport { makeLocalChonkyStyles } from '../../util/styles';\n\nexport interface DnDFileEntryProps {\n  file: Nullable<FileData>;\n  children: (dndState: DndEntryState) => React.ReactElement;\n}\n\nexport const DnDFileEntry = React.memo(({ file, children }: DnDFileEntryProps) => {\n  const { drop, drag, dndState } = useFileEntryDnD(file);\n\n  useDndHoverOpen(file, dndState);\n  const classes = useStyles();\n  return (\n    <div ref={drop} className={classes.fillParent}>\n      <div ref={FileHelper.isDraggable(file) ? drag : null} className={classes.fillParent}>\n        {children(dndState)}\n      </div>\n    </div>\n  );\n});\n\nexport const useStyles = makeLocalChonkyStyles(() => ({\n  fillParent: {\n    height: '100%',\n  },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport c from 'classnames';\nimport React from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface FileThumbnailProps {\n  className: string;\n  thumbnailUrl: Nullable<string>;\n}\n\nexport const FileThumbnail: React.FC<FileThumbnailProps> = React.memo((props) => {\n  const { className, thumbnailUrl } = props;\n\n  const thumbnailStyle: React.CSSProperties = thumbnailUrl ? { backgroundImage: `url('${thumbnailUrl}')` } : {};\n\n  const classes = useStyles();\n  return <div className={c([className, classes.fileThumbnail])} style={thumbnailStyle} />;\n});\nFileThumbnail.displayName = 'FileThumbnail';\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n  fileThumbnail: {\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: 'center',\n    backgroundSize: 'contain',\n  },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useContext } from 'react';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, makeLocalChonkyStyles } from '../../util/styles';\nimport { useDndIcon } from './FileEntry-hooks';\n\nexport interface DnDIndicatorProps {\n  className: string;\n  dndState: DndEntryState;\n}\n\nexport const GridEntryDndIndicator: React.FC<DnDIndicatorProps> = React.memo((props) => {\n  const { className: externalClassName, dndState } = props;\n  const dndIconName = useDndIcon(dndState);\n  const classes = useStyles(dndState);\n  const ChonkyIcon = useContext(ChonkyIconContext);\n  if (!dndIconName) return null;\n  const className = c({\n    [classes.dndIndicator]: true,\n    [externalClassName]: true,\n  });\n  return (\n    <div className={className}>\n      <ChonkyIcon icon={dndIconName} />\n    </div>\n  );\n});\n\nconst useStyles = makeLocalChonkyStyles((theme) => ({\n  dndIndicator: {\n    color: (dndState: DndEntryState) =>\n      dndState.dndIsOver ? (dndState.dndCanDrop ? theme.dnd.canDropColor : theme.dnd.cannotDropColor) : '#000',\n    boxSizing: 'border-box',\n    position: 'absolute',\n    fontSize: '1.2em',\n    opacity: 0.6,\n    padding: 6,\n    '&:before': {\n      borderBottom: '50px solid transparent',\n      borderLeft: '50px solid #fff',\n      position: 'absolute',\n      content: '\"\"',\n      zIndex: -1,\n      left: 0,\n      top: 0,\n    },\n  },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useContext, useEffect } from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeLocalChonkyStyles } from '../../util/styles';\nimport { FileThumbnail } from './FileThumbnail';\nimport { GridEntryDndIndicator } from './GridEntryDndIndicator';\n\nexport type FileEntryState = {\n  childrenCount: Nullable<number>;\n  color: string;\n  icon: ChonkyIconName | string;\n  thumbnailUrl: Nullable<string>;\n  iconSpin: boolean;\n  selected: boolean;\n  focused: boolean;\n};\n\nexport interface FileEntryPreviewProps {\n  className?: string;\n  entryState: FileEntryState;\n  dndState: DndEntryState;\n}\n\nexport const GridEntryPreviewFolder: React.FC<FileEntryPreviewProps> = React.memo((props) => {\n  const { className: externalClassName, entryState, dndState } = props;\n\n  const folderClasses = useFolderStyles(entryState);\n  const fileClasses = useFileStyles(entryState);\n  const commonClasses = useCommonEntryStyles(entryState);\n  const className = c({\n    [folderClasses.previewFile]: true,\n    [externalClassName || '']: !!externalClassName,\n  });\n  return (\n    <div className={className}>\n      <div className={folderClasses.folderBackSideMid}>\n        <div className={folderClasses.folderBackSideTop} />\n        <div className={folderClasses.folderFrontSide}>\n          <GridEntryDndIndicator className={fileClasses.dndIndicator} dndState={dndState} />\n          <div className={c([fileClasses.fileIcon, folderClasses.fileIcon])}>{entryState.childrenCount}</div>\n          <div className={commonClasses.selectionIndicator}></div>\n          <FileThumbnail className={fileClasses.thumbnail} thumbnailUrl={entryState.thumbnailUrl} />\n        </div>\n      </div>\n    </div>\n  );\n});\nGridEntryPreviewFolder.displayName = 'GridEntryPreviewFolder';\n\nconst useFolderStyles = makeLocalChonkyStyles((theme) => ({\n  previewFile: {\n    borderRadius: theme.gridFileEntry.borderRadius,\n    position: 'relative',\n    overflow: 'hidden',\n  },\n  folderBackSideTop: {\n    backgroundColor: (state: FileEntryState) => state.color,\n    boxShadow: (state: FileEntryState) => {\n      let color = theme.gridFileEntry.folderBackColorTint;\n      if (state.focused) color = 'rgba(0, 0, 0, 0.3)';\n      else if (state.selected) color = 'rgba(0, 153, 255, .4)';\n      return `inset ${color} 0 0 0 999px`;\n    },\n    borderTopLeftRadius: theme.gridFileEntry.borderRadius,\n    borderTopRightRadius: 10,\n    position: 'absolute',\n    right: '60%',\n    height: 13,\n    top: -10,\n    left: 0,\n    '&:after': {\n      borderRightColor: theme.palette.background.paper,\n      borderTopColor: theme.palette.background.paper,\n      borderBottomColor: 'transparent',\n      borderLeftColor: 'transparent',\n      borderWidth: [0, 15, 10, 0],\n      borderStyle: 'solid',\n      position: 'absolute',\n      display: 'block',\n      content: '\"\"',\n      right: 0,\n      top: 0,\n    },\n  },\n  folderBackSideMid: {\n    backgroundColor: (state: FileEntryState) => state.color,\n    boxShadow: (state: FileEntryState) => {\n      let color = theme.gridFileEntry.folderBackColorTint;\n      if (state.focused) color = 'rgba(0, 0, 0, 0.3)';\n      else if (state.selected) color = 'rgba(0, 153, 255, .4)';\n      return `inset ${color} 0 0 0 999px`;\n    },\n    borderTopRightRadius: theme.gridFileEntry.borderRadius,\n    position: 'absolute',\n    bottom: 0,\n    right: 0,\n    left: 0,\n    top: 10,\n  },\n  folderFrontSide: {\n    boxShadow: (state: FileEntryState) => {\n      const shadows: string[] = [];\n      if (state.focused) shadows.push('inset rgba(0, 0, 0, 1) 0 0 0 3px');\n      if (state.selected) shadows.push('inset rgba(0, 153, 255, .65) 0 0 0 3px');\n      shadows.push(`inset ${theme.gridFileEntry.folderFrontColorTint} 0 0 0 999px`);\n      return shadows.join(', ');\n    },\n    backgroundColor: (state: FileEntryState) => state.color,\n    borderRadius: theme.gridFileEntry.borderRadius,\n    position: 'absolute',\n    overflow: 'hidden',\n    bottom: 0,\n    right: 0,\n    left: 0,\n    top: 10,\n  },\n  fileIcon: {\n    fontSize: important(theme.gridFileEntry.childrenCountSize),\n  },\n}));\n\nexport const GridEntryPreviewFile: React.FC<FileEntryPreviewProps> = React.memo((props) => {\n  const { className: externalClassName, entryState, dndState } = props;\n\n  const fileClasses = useFileStyles(entryState);\n  const commonClasses = useCommonEntryStyles(entryState);\n  const ChonkyIcon = useContext(ChonkyIconContext);\n  const className = c({\n    [fileClasses.previewFile]: true,\n    [externalClassName || '']: !!externalClassName,\n  });\n  return (\n    <div className={className}>\n      <GridEntryDndIndicator className={fileClasses.dndIndicator} dndState={dndState} />\n      <div className={fileClasses.fileIcon}>\n        <ChonkyIcon icon={entryState.icon} spin={entryState.iconSpin} />\n      </div>\n      <div className={commonClasses.selectionIndicator}></div>\n      <FileThumbnail className={fileClasses.thumbnail} thumbnailUrl={entryState.thumbnailUrl} />\n    </div>\n  );\n});\nGridEntryPreviewFile.displayName = 'GridEntryPreviewFile';\n\nconst useFileStyles = makeLocalChonkyStyles((theme) => ({\n  previewFile: {\n    boxShadow: (state: FileEntryState) => {\n      const shadows: string[] = [];\n      if (state.selected) shadows.push('inset rgba(0,153,255, .65) 0 0 0 3px');\n      if (state.focused) shadows.push('inset rgba(0, 0, 0, 1) 0 0 0 3px');\n      shadows.push(`inset ${theme.gridFileEntry.fileColorTint} 0 0 0 999px`);\n      return shadows.join(', ');\n    },\n    backgroundColor: (state: FileEntryState) => state.color,\n    borderRadius: theme.gridFileEntry.borderRadius,\n    position: 'relative',\n    overflow: 'hidden',\n  },\n  dndIndicator: {\n    zIndex: 14,\n  },\n  fileIcon: {\n    transform: 'translateX(-50%) translateY(-50%)',\n    fontSize: theme.gridFileEntry.iconSize,\n    opacity: (state: FileEntryState) => (state.thumbnailUrl && !state.focused ? 0 : 1),\n    color: (state: FileEntryState) =>\n      state.focused ? theme.gridFileEntry.iconColorFocused : theme.gridFileEntry.iconColor,\n    position: 'absolute',\n    left: '50%',\n    zIndex: 12,\n    top: '50%',\n  },\n  thumbnail: {\n    borderRadius: theme.gridFileEntry.borderRadius,\n    position: 'absolute',\n    zIndex: 6,\n    bottom: 5,\n    right: 5,\n    left: 5,\n    top: 5,\n  },\n}));\n\nexport const useCommonEntryStyles = makeLocalChonkyStyles(() => ({\n  selectionIndicator: {\n    display: (state: FileEntryState) => (state.selected ? 'block' : 'none'),\n    background:\n      'repeating-linear-gradient(' +\n      '45deg,' +\n      'rgba(0,153,255,.14),' +\n      'rgba(0,153,255,.14) 10px,' +\n      'rgba(0,153,255,.25) 0,' +\n      'rgba(0,153,255,.25) 20px' +\n      ')',\n    backgroundColor: 'rgba(0, 153, 255, .14)',\n    position: 'absolute',\n    height: '100%',\n    width: '100%',\n    zIndex: 10,\n  },\n  focusIndicator: {\n    display: (state: FileEntryState) => (state.focused ? 'block' : 'none'),\n    boxShadow: 'inset rgba(0, 0, 0, 1) 0 0 0 2px',\n    position: 'absolute',\n    height: '100%',\n    width: '100%',\n    zIndex: 11,\n  },\n}));\n","import React from 'react';\n\nimport { FileEntryProps } from '../../types/file-list.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { c, makeLocalChonkyStyles } from '../../util/styles';\nimport { useFileEntryHtmlProps, useFileEntryState } from './FileEntry-hooks';\nimport { FileEntryName } from './FileEntryName';\nimport { FileEntryState, GridEntryPreviewFile, GridEntryPreviewFolder } from './GridEntryPreview';\n\nexport const GridEntry: React.FC<FileEntryProps> = React.memo(({ file, selected, focused, dndState }) => {\n  const isDirectory = FileHelper.isDirectory(file);\n  const entryState = useFileEntryState(file, selected, focused);\n\n  const classes = useFileEntryStyles(entryState);\n  const fileEntryHtmlProps = useFileEntryHtmlProps(file);\n  const entryClassName = c({\n    [classes.gridFileEntry]: true,\n  });\n  return (\n    <div className={entryClassName} {...fileEntryHtmlProps}>\n      {isDirectory ? (\n        <GridEntryPreviewFolder className={classes.gridFileEntryPreview} entryState={entryState} dndState={dndState} />\n      ) : (\n        <GridEntryPreviewFile className={classes.gridFileEntryPreview} entryState={entryState} dndState={dndState} />\n      )}\n      <div className={classes.gridFileEntryNameContainer}>\n        <FileEntryName className={classes.gridFileEntryName} file={file} />\n      </div>\n    </div>\n  );\n});\nGridEntry.displayName = 'GridEntry';\n\nconst useFileEntryStyles = makeLocalChonkyStyles((theme) => ({\n  gridFileEntry: {\n    flexDirection: 'column',\n    display: 'flex',\n    height: '100%',\n  },\n  gridFileEntryPreview: {\n    flexGrow: 1,\n  },\n  gridFileEntryNameContainer: {\n    fontSize: theme.gridFileEntry.fontSize,\n    wordBreak: 'break-word',\n    textAlign: 'center',\n    paddingTop: 5,\n  },\n  gridFileEntryName: {\n    backgroundColor: (state: FileEntryState) => (state.selected ? 'rgba(0,153,255, .25)' : 'transparent'),\n    textDecoration: (state: FileEntryState) => (state.focused ? 'underline' : 'none'),\n    borderRadius: 3,\n    padding: [2, 4],\n  },\n}));\n","import React, { useContext, useMemo } from 'react';\n\nimport { DndEntryState, FileEntryProps } from '../../types/file-list.types';\nimport { useLocalizedFileEntryStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, makeLocalChonkyStyles } from '../../util/styles';\nimport { TextPlaceholder } from '../external/TextPlaceholder';\nimport { useDndIcon, useFileEntryHtmlProps, useFileEntryState } from './FileEntry-hooks';\nimport { FileEntryName } from './FileEntryName';\nimport { FileEntryState, useCommonEntryStyles } from './GridEntryPreview';\n\ninterface StyleState {\n  entryState: FileEntryState;\n  dndState: DndEntryState;\n}\n\nexport const ListEntry: React.FC<FileEntryProps> = React.memo(({ file, selected, focused, dndState }) => {\n  const entryState: FileEntryState = useFileEntryState(file, selected, focused);\n  const dndIconName = useDndIcon(dndState);\n\n  const { fileModDateString, fileSizeString } = useLocalizedFileEntryStrings(file);\n  const styleState = useMemo<StyleState>(\n    () => ({\n      entryState,\n      dndState,\n    }),\n    [dndState, entryState],\n  );\n  const classes = useStyles(styleState);\n  const commonClasses = useCommonEntryStyles(entryState);\n  const ChonkyIcon = useContext(ChonkyIconContext);\n  const fileEntryHtmlProps = useFileEntryHtmlProps(file);\n  return (\n    <div className={classes.listFileEntry} {...fileEntryHtmlProps}>\n      <div className={commonClasses.focusIndicator}></div>\n      <div className={c([commonClasses.selectionIndicator, classes.listFileEntrySelection])}></div>\n      <div className={classes.listFileEntryIcon}>\n        <ChonkyIcon\n          icon={dndIconName ?? entryState.icon}\n          spin={dndIconName ? false : entryState.iconSpin}\n          fixedWidth={true}\n        />\n      </div>\n      <div className={classes.listFileEntryName} title={file ? file.name : undefined}>\n        <FileEntryName file={file} />\n      </div>\n      <div className={classes.listFileEntryProperty}>\n        {file ? fileModDateString ?? <span></span> : <TextPlaceholder minLength={5} maxLength={15} />}\n      </div>\n      <div className={classes.listFileEntryProperty}>\n        {file ? fileSizeString ?? <span></span> : <TextPlaceholder minLength={10} maxLength={20} />}\n      </div>\n    </div>\n  );\n});\n\nconst useStyles = makeLocalChonkyStyles((theme) => ({\n  listFileEntry: {\n    boxShadow: `inset ${theme.palette.divider} 0 -1px 0`,\n    fontSize: theme.listFileEntry.fontSize,\n    color: ({ dndState }: StyleState) =>\n      dndState.dndIsOver ? (dndState.dndCanDrop ? theme.dnd.canDropColor : theme.dnd.cannotDropColor) : 'inherit',\n    alignItems: 'center',\n    position: 'relative',\n    display: 'flex',\n    height: '100%',\n  },\n  listFileEntrySelection: {\n    opacity: 0.6,\n  },\n  listFileEntryIcon: {\n    color: ({ entryState, dndState }: StyleState) =>\n      dndState.dndIsOver\n        ? dndState.dndCanDrop\n          ? theme.dnd.canDropColor\n          : theme.dnd.cannotDropColor\n        : entryState.color,\n    fontSize: theme.listFileEntry.iconFontSize,\n    boxSizing: 'border-box',\n    padding: [2, 4],\n    zIndex: 20,\n  },\n  listFileEntryName: {\n    textOverflow: 'ellipsis',\n    boxSizing: 'border-box',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    flex: '1 1 300px',\n    paddingLeft: 8,\n    zIndex: 20,\n  },\n  listFileEntryProperty: {\n    fontSize: theme.listFileEntry.propertyFontSize,\n    boxSizing: 'border-box',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    flex: '0 1 150px',\n    padding: [2, 8],\n    zIndex: 20,\n  },\n}));\n","import React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { selectFileData, selectIsDnDDisabled, selectIsFileSelected } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { DndEntryState, FileEntryProps } from '../../types/file-list.types';\nimport { FileViewMode } from '../../types/file-view.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\nimport { ClickableWrapper, ClickableWrapperProps } from '../internal/ClickableWrapper';\nimport { CompactEntry } from './CompactEntry';\nimport { DnDFileEntry } from './DnDFileEntry';\nimport { useFileClickHandlers } from './FileEntry-hooks';\nimport { GridEntry } from './GridEntry';\nimport { ListEntry } from './ListEntry';\n\nexport interface SmartFileEntryProps {\n  fileId: Nullable<string>;\n  displayIndex: number;\n  fileViewMode: FileViewMode;\n}\n\nconst disabledDndState: DndEntryState = {\n  dndIsDragging: false,\n  dndIsOver: false,\n  dndCanDrop: false,\n};\n\nexport const SmartFileEntry: React.FC<SmartFileEntryProps> = React.memo(({ fileId, displayIndex, fileViewMode }) => {\n  const classes = useStyles();\n\n  // Basic properties\n  const file = useParamSelector(selectFileData, fileId);\n  const selected = useParamSelector(selectIsFileSelected, fileId);\n  const dndDisabled = useSelector(selectIsDnDDisabled);\n\n  // Clickable wrapper properties\n  const fileClickHandlers = useFileClickHandlers(file, displayIndex);\n  const [focused, setFocused] = useState(false);\n  const clickableWrapperProps: ClickableWrapperProps = {\n    wrapperTag: 'div',\n    passthroughProps: { className: classes.fileEntryClickableWrapper },\n    ...(FileHelper.isClickable(file) ? fileClickHandlers : undefined),\n    setFocused,\n  };\n\n  // File entry properties\n  const fileEntryProps: Omit<FileEntryProps, 'dndState'> = {\n    file,\n    selected,\n    focused,\n  };\n\n  let EntryComponent: React.FC<FileEntryProps>;\n  if (fileViewMode === FileViewMode.List) EntryComponent = ListEntry;\n  else if (fileViewMode === FileViewMode.Compact) EntryComponent = CompactEntry;\n  else EntryComponent = GridEntry;\n\n  return dndDisabled ? (\n    <ClickableWrapper {...clickableWrapperProps}>\n      <EntryComponent {...fileEntryProps} dndState={disabledDndState} />\n    </ClickableWrapper>\n  ) : (\n    <DnDFileEntry file={file}>\n      {(dndState) => (\n        <ClickableWrapper {...clickableWrapperProps}>\n          <EntryComponent {...fileEntryProps} dndState={dndState} />\n        </ClickableWrapper>\n      )}\n    </DnDFileEntry>\n  );\n});\nSmartFileEntry.displayName = 'SmartFileEntry';\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n  fileEntryClickableWrapper: {\n    // We disable default browser outline because Chonky provides its own outline\n    // (which doesn't compromise accessibility, hopefully)\n    outline: 'none !important',\n    position: 'relative',\n    height: '100%',\n  },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { CSSProperties, useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { VariableSizeGrid } from 'react-window';\n\nimport { ChonkyActions } from '../../action-definitions';\nimport { selectFileViewConfig, selectors } from '../../redux/selectors';\nimport { FileViewConfigGrid } from '../../types/file-view.types';\nimport { RootState } from '../../types/redux.types';\nimport { useInstanceVariable } from '../../util/hooks-helpers';\nimport { makeGlobalChonkyStyles, useIsMobileBreakpoint } from '../../util/styles';\nimport { SmartFileEntry } from './FileEntry';\n\nexport interface FileListGridProps {\n  width: number;\n  height: number;\n}\n\ninterface GridConfig {\n  rowCount: number;\n  columnCount: number;\n  gutter: number;\n  rowHeight: number;\n  columnWidth: number;\n}\n\nexport const isMobileDevice = () => {\n  // noinspection JSDeprecatedSymbols\n  return typeof window.orientation !== 'undefined' || navigator.userAgent.indexOf('IEMobile') !== -1;\n};\n\nexport const getGridConfig = (\n  width: number,\n  fileCount: number,\n  viewConfig: FileViewConfigGrid,\n  isMobileBreakpoint: boolean,\n): GridConfig => {\n  const gutter = isMobileBreakpoint ? 5 : 8;\n  const scrollbar = isMobileDevice() ? 0 : 18;\n\n  let columnCount: number;\n  let columnWidth: number;\n  if (isMobileBreakpoint) {\n    columnCount = 2;\n    columnWidth = (width - gutter - scrollbar) / columnCount;\n  } else {\n    columnWidth = viewConfig.entryWidth;\n    columnCount = Math.max(1, Math.floor((width - scrollbar) / (columnWidth + gutter)));\n  }\n\n  const rowCount = Math.ceil(fileCount / columnCount);\n\n  return {\n    rowCount,\n    columnCount,\n    gutter,\n    rowHeight: viewConfig.entryHeight,\n    columnWidth,\n  };\n};\n\nexport const GridContainer: React.FC<FileListGridProps> = React.memo((props) => {\n  const { width, height } = props;\n\n  const viewConfig = useSelector(selectFileViewConfig) as FileViewConfigGrid;\n  const displayFileIds = useSelector(selectors.getDisplayFileIds);\n  const fileCount = useMemo(() => displayFileIds.length, [displayFileIds]);\n\n  const gridRef = useRef<VariableSizeGrid>();\n  const isMobileBreakpoint = useIsMobileBreakpoint();\n\n  // Whenever the grid config changes at runtime, we call a method on the\n  // `VariableSizeGrid` handle to reset column width/row height cache.\n  // !!! Note that we deliberately update the `gridRef` firsts and update the React\n  //     state AFTER that. This is needed to avoid file entries jumping up/down.\n  const [gridConfig, setGridConfig] = useState(getGridConfig(width, fileCount, viewConfig, isMobileBreakpoint));\n  const gridConfigRef = useRef(gridConfig);\n  useEffect(() => {\n    const oldConf = gridConfigRef.current;\n    const newConf = getGridConfig(width, fileCount, viewConfig, isMobileBreakpoint);\n\n    gridConfigRef.current = newConf;\n    if (gridRef.current) {\n      if (oldConf.rowCount !== newConf.rowCount) {\n        gridRef.current.resetAfterRowIndex(Math.min(oldConf.rowCount, newConf.rowCount) - 1);\n      }\n      if (oldConf.columnCount !== newConf.columnCount) {\n        gridRef.current.resetAfterColumnIndex(Math.min(oldConf.columnCount, newConf.rowCount) - 1);\n      }\n      if (oldConf.columnWidth !== newConf.columnWidth) {\n        gridRef.current.resetAfterIndices({ columnIndex: 0, rowIndex: 0 });\n      }\n    }\n\n    setGridConfig(newConf);\n  }, [setGridConfig, gridConfigRef, isMobileBreakpoint, width, viewConfig, fileCount]);\n\n  const sizers = useMemo(() => {\n    const gc = gridConfigRef;\n    return {\n      getColumnWidth: (index: number) =>\n        gc.current.columnWidth! + (index === gc.current.columnCount - 1 ? 0 : gc.current.gutter),\n      getRowHeight: (index: number) =>\n        gc.current.rowHeight + (index === gc.current.rowCount - 1 ? 0 : gc.current.gutter),\n    };\n  }, [gridConfigRef]);\n\n  const displayFileIdsRef = useInstanceVariable(useSelector(selectors.getDisplayFileIds));\n  const getItemKey = useCallback(\n    (data: { columnIndex: number; rowIndex: number; data: any }) => {\n      const index = data.rowIndex * gridConfigRef.current.columnCount + data.columnIndex;\n\n      return displayFileIdsRef.current[index] ?? `loading-file-${index}`;\n    },\n    [gridConfigRef, displayFileIdsRef],\n  );\n\n  const cellRenderer = useCallback(\n    (data: { rowIndex: number; columnIndex: number; style: CSSProperties }) => {\n      const gc = gridConfigRef;\n      const index = data.rowIndex * gc.current.columnCount + data.columnIndex;\n      const fileId = displayFileIds[index];\n      if (displayFileIds[index] === undefined) return null;\n\n      const styleWithGutter: CSSProperties = {\n        ...data.style,\n        paddingRight: data.columnIndex === gc.current.columnCount - 1 ? 0 : gc.current.gutter,\n        paddingBottom: data.rowIndex === gc.current.rowCount - 1 ? 0 : gc.current.gutter,\n        boxSizing: 'border-box',\n      };\n\n      return (\n        <div style={styleWithGutter}>\n          <SmartFileEntry fileId={fileId ?? null} displayIndex={index} fileViewMode={viewConfig.mode} />\n        </div>\n      );\n    },\n    [displayFileIds, viewConfig.mode],\n  );\n\n  const classes = useStyles();\n  const gridComponent = useMemo(() => {\n    return (\n      <VariableSizeGrid\n        ref={gridRef as any}\n        className={classes.gridContainer}\n        estimatedRowHeight={gridConfig.rowHeight + gridConfig.gutter}\n        rowHeight={sizers.getRowHeight}\n        estimatedColumnWidth={gridConfig.columnWidth + gridConfig.gutter}\n        columnWidth={sizers.getColumnWidth}\n        columnCount={gridConfig.columnCount}\n        height={height}\n        rowCount={gridConfig.rowCount}\n        width={width}\n        itemKey={getItemKey}\n      >\n        {cellRenderer}\n      </VariableSizeGrid>\n    );\n  }, [\n    classes.gridContainer,\n    gridConfig.rowHeight,\n    gridConfig.gutter,\n    gridConfig.columnWidth,\n    gridConfig.columnCount,\n    gridConfig.rowCount,\n    sizers.getRowHeight,\n    sizers.getColumnWidth,\n    height,\n    width,\n    getItemKey,\n    cellRenderer,\n  ]);\n\n  return gridComponent;\n});\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n  gridContainer: {},\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { CSSProperties, useCallback, useMemo, useRef } from 'react';\nimport { useSelector } from 'react-redux';\nimport { FixedSizeList } from 'react-window';\n\nimport { selectFileViewConfig, selectors } from '../../redux/selectors';\nimport { FileViewMode } from '../../types/file-view.types';\nimport { useInstanceVariable } from '../../util/hooks-helpers';\nimport { makeLocalChonkyStyles } from '../../util/styles';\nimport { SmartFileEntry } from './FileEntry';\n\nexport interface FileListListProps {\n  width: number;\n  height: number;\n}\n\nexport const ListContainer: React.FC<FileListListProps> = React.memo((props) => {\n  const { width, height } = props;\n\n  const viewConfig = useSelector(selectFileViewConfig);\n\n  const listRef = useRef<FixedSizeList>();\n\n  const displayFileIds = useSelector(selectors.getDisplayFileIds);\n  const displayFileIdsRef = useInstanceVariable(displayFileIds);\n  const getItemKey = useCallback(\n    (index: number) => displayFileIdsRef.current[index] ?? `loading-file-${index}`,\n    [displayFileIdsRef],\n  );\n\n  const classes = useStyles();\n  const listComponent = useMemo(() => {\n    // When entry size is null, we use List view\n    const rowRenderer = (data: { index: number; style: CSSProperties }) => {\n      return (\n        <div style={data.style}>\n          <SmartFileEntry\n            fileId={displayFileIds[data.index] ?? null}\n            displayIndex={data.index}\n            fileViewMode={FileViewMode.List}\n          />\n        </div>\n      );\n    };\n\n    return (\n      <FixedSizeList\n        ref={listRef as any}\n        className={classes.listContainer}\n        itemSize={viewConfig.entryHeight}\n        height={height}\n        itemCount={displayFileIds.length}\n        width={width}\n        itemKey={getItemKey}\n      >\n        {rowRenderer}\n      </FixedSizeList>\n    );\n  }, [classes.listContainer, viewConfig.entryHeight, height, displayFileIds, width, getItemKey]);\n\n  return listComponent;\n});\n\nconst useStyles = makeLocalChonkyStyles((theme) => ({\n  listContainer: {\n    borderTop: `solid 1px ${theme.palette.divider}`,\n  },\n}));\n","import React, { UIEvent, useCallback, useContext, useMemo } from 'react';\nimport { useSelector } from 'react-redux';\nimport AutoSizer from 'react-virtualized-auto-sizer';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { selectCurrentFolder, selectFileViewConfig, selectors } from '../../redux/selectors';\nimport { FileViewMode } from '../../types/file-view.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { useFileDrop } from '../../util/dnd';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, getStripeGradient, makeGlobalChonkyStyles, makeLocalChonkyStyles } from '../../util/styles';\nimport { FileListEmpty } from './FileListEmpty';\nimport { GridContainer } from './GridContainer';\nimport { ListContainer } from './ListContainer';\n\nexport interface FileListProps {\n  onScroll?: (e: UIEvent<HTMLDivElement>) => void;\n}\n\ninterface StyleState {\n  dndCanDrop: boolean;\n  dndIsOverCurrent: boolean;\n}\n\nexport const FileList: React.FC<FileListProps> = React.memo((props: FileListProps) => {\n  const displayFileIds = useSelector(selectors.getDisplayFileIds);\n  const viewConfig = useSelector(selectFileViewConfig);\n\n  const currentFolder = useSelector(selectCurrentFolder);\n  const { drop, dndCanDrop, dndIsOverCurrent } = useFileDrop({ file: currentFolder });\n  const styleState = useMemo<StyleState>(() => ({ dndCanDrop, dndIsOverCurrent }), [dndCanDrop, dndIsOverCurrent]);\n\n  const localClasses = useLocalStyles(styleState);\n  const classes = useStyles(viewConfig);\n  const { onScroll } = props;\n\n  // In Chonky v0.x, this field was user-configurable. In Chonky v1.x+, we hardcode\n  // this to `true` to simplify configuration. Users can just wrap Chonky in their\n  // own `div` if they want to have finer control over the height.\n  const fillParentContainer = true;\n\n  const listRenderer = useCallback(\n    ({ width, height }: { width: number; height: number }) => {\n      if (displayFileIds.length === 0) {\n        return <FileListEmpty width={width} height={viewConfig.entryHeight} />;\n      } else if (viewConfig.mode === FileViewMode.List) {\n        return <ListContainer width={width} height={height} />;\n      } else {\n        return <GridContainer width={width} height={height} />;\n      }\n    },\n    [displayFileIds, viewConfig],\n  );\n\n  const ChonkyIcon = useContext(ChonkyIconContext);\n  return (\n    <div\n      onScroll={onScroll}\n      ref={drop}\n      className={c([classes.fileListWrapper, localClasses.fileListWrapper])}\n      role=\"list\"\n    >\n      <div className={localClasses.dndDropZone}>\n        <div className={localClasses.dndDropZoneIcon}>\n          <ChonkyIcon icon={dndCanDrop ? ChonkyIconName.dndCanDrop : ChonkyIconName.dndCannotDrop} />\n        </div>\n      </div>\n      <AutoSizer disableHeight={!fillParentContainer}>{listRenderer}</AutoSizer>\n    </div>\n  );\n});\nFileList.displayName = 'FileList';\n\nconst useLocalStyles = makeLocalChonkyStyles((theme) => ({\n  fileListWrapper: {\n    minHeight: ChonkyActions.EnableGridView.fileViewConfig.entryHeight + 2,\n    background: (state: StyleState) =>\n      state.dndIsOverCurrent && state.dndCanDrop\n        ? state.dndCanDrop\n          ? getStripeGradient(theme.dnd.fileListCanDropMaskOne, theme.dnd.fileListCanDropMaskTwo)\n          : getStripeGradient(theme.dnd.fileListCannotDropMaskOne, theme.dnd.fileListCannotDropMaskTwo)\n        : 'none',\n  },\n  dndDropZone: {\n    display: (state: StyleState) =>\n      // When we cannot drop, we don't show an indicator at all\n      state.dndIsOverCurrent && state.dndCanDrop ? 'block' : 'none',\n    borderRadius: theme.gridFileEntry.borderRadius,\n    pointerEvents: 'none',\n    position: 'absolute',\n    height: '100%',\n    width: '100%',\n    zIndex: 2,\n  },\n  dndDropZoneIcon: {\n    backgroundColor: (state: StyleState) => (state.dndCanDrop ? theme.dnd.canDropMask : theme.dnd.cannotDropMask),\n    color: (state: StyleState) => (state.dndCanDrop ? theme.dnd.canDropColor : theme.dnd.cannotDropColor),\n    borderRadius: theme.gridFileEntry.borderRadius,\n    transform: 'translateX(-50%) translateY(-50%)',\n    position: 'absolute',\n    textAlign: 'center',\n    lineHeight: '60px',\n    fontSize: '2em',\n    left: '50%',\n    height: 60,\n    top: '50%',\n    width: 60,\n  },\n}));\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n  fileListWrapper: {\n    height: '100%',\n    maxHeight: '100%',\n  },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { ReactElement, useEffect, useMemo } from 'react';\nimport { useIntl } from 'react-intl';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport ListSubheader from '@mui/material/ListSubheader';\nimport Menu from '@mui/material/Menu';\n\nimport { reduxActions } from '../../redux/reducers';\nimport { selectContextMenuConfig, selectContextMenuItems } from '../../redux/selectors';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\nimport { useContextMenuDismisser } from './FileContextMenu-hooks';\nimport { SmartToolbarDropdownButton } from './ToolbarDropdownButton';\nimport { ChonkyDispatch } from '../../types/redux.types';\n\nexport interface FileContextMenuProps {}\n\nexport const FileContextMenu: React.FC<FileContextMenuProps> = React.memo(() => {\n  const dispatch: ChonkyDispatch = useDispatch();\n  useEffect(() => {\n    dispatch(reduxActions.setContextMenuMounted(true));\n    return () => {\n      dispatch(reduxActions.setContextMenuMounted(false));\n    };\n  }, [dispatch]);\n\n  const intl = useIntl();\n  const browserMenuShortcutString = intl.formatMessage(\n    {\n      id: getI18nId(I18nNamespace.FileContextMenu, 'browserMenuShortcut'),\n      defaultMessage: 'Browser menu: {shortcut}',\n    },\n    { shortcut: <strong>Alt + Right Click</strong> },\n  );\n\n  const contextMenuConfig = useSelector(selectContextMenuConfig);\n  const contextMenuItems = useSelector(selectContextMenuItems);\n\n  const hideContextMenu = useContextMenuDismisser();\n  const contextMenuItemComponents = useMemo(() => {\n    const components: ReactElement[] = [];\n    for (let i = 0; i < contextMenuItems.length; ++i) {\n      const item = contextMenuItems[i];\n\n      if (typeof item === 'string') {\n        components.push(\n          <SmartToolbarDropdownButton\n            key={`context-menu-item-${item}`}\n            fileActionId={item}\n            onClickFollowUp={hideContextMenu}\n          />,\n        );\n      } else {\n        item.fileActionIds.map((id) =>\n          components.push(\n            <SmartToolbarDropdownButton\n              key={`context-menu-item-${item.name}-${id}`}\n              fileActionId={id}\n              onClickFollowUp={hideContextMenu}\n            />,\n          ),\n        );\n      }\n    }\n    return components;\n  }, [contextMenuItems, hideContextMenu]);\n\n  const anchorPosition = useMemo(\n    () => (contextMenuConfig ? { top: contextMenuConfig.mouseY, left: contextMenuConfig.mouseX } : undefined),\n    [contextMenuConfig],\n  );\n\n  const classes = useStyles();\n  return (\n    <Menu\n      elevation={2}\n      disablePortal\n      onClose={hideContextMenu}\n      transitionDuration={150}\n      open={!!contextMenuConfig}\n      anchorPosition={anchorPosition}\n      anchorReference=\"anchorPosition\"\n      classes={{ list: classes.contextMenuList }}\n    >\n      {contextMenuItemComponents}\n      <ListSubheader component=\"div\" className={classes.browserMenuTooltip}>\n        {browserMenuShortcutString}\n      </ListSubheader>\n    </Menu>\n  );\n});\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n  contextMenuList: {\n    paddingBottom: important(0),\n    paddingTop: important(0),\n  },\n  browserMenuTooltip: {\n    lineHeight: important('30px'),\n    fontSize: important('0.7em'),\n  },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\n\nimport { FileBrowserHandle, FileBrowserProps } from '../../types/file-browser.types';\nimport { FileList } from '../file-list/FileList';\nimport { FileBrowser } from './FileBrowser';\nimport { FileContextMenu } from './FileContextMenu';\nimport { FileNavbar } from './FileNavbar';\nimport { FileToolbar } from './FileToolbar';\n\nexport const FullFileBrowser = React.memo(\n  React.forwardRef<FileBrowserHandle, FileBrowserProps>((props, ref) => {\n    const { onScroll } = props;\n    return (\n      <FileBrowser ref={ref} {...props}>\n        {props.folderChain?.length ? <FileNavbar /> : undefined}\n        <FileToolbar />\n        <FileList onScroll={onScroll} />\n        <FileContextMenu />\n      </FileBrowser>\n    );\n  }),\n);\nFullFileBrowser.displayName = 'FullFileBrowser';\n","/**\n *\n */\n\nimport { useCallback, useMemo, useState } from 'react';\n\nimport { ChonkyActions } from '../action-definitions';\nimport { FileActionData } from '../types/action-handler.types';\nimport { FileAction } from '../types/action.types';\nimport { FileArray, FileData } from '../types/file.types';\nimport { FileHelper } from '../util/file-helper';\n\nexport interface CustomFileData extends FileData {\n  parentId?: string;\n  childrenIds?: string[];\n}\nexport interface CustomFileMap<FT extends CustomFileData> {\n  [fileId: string]: FT;\n}\nexport interface FileMapParams<FT extends CustomFileData> {\n  baseFileMap: CustomFileMap<FT>;\n  initialFolderId: string;\n}\n\nexport const useFolderChain = <FT extends CustomFileData>(\n  fileMap: CustomFileMap<FT>,\n  currentFolderId: string,\n): FileArray<FT> => {\n  return useMemo(() => {\n    const currentFolder = fileMap[currentFolderId];\n\n    const folderChain = [currentFolder];\n\n    let parentId = currentFolder.parentId;\n    while (parentId) {\n      const parentFile = fileMap[parentId];\n      if (parentFile) {\n        folderChain.unshift(parentFile);\n        parentId = parentFile.parentId;\n      } else {\n        break;\n      }\n    }\n\n    return folderChain;\n  }, [currentFolderId, fileMap]);\n};\n\nexport const useFiles = <FT extends CustomFileData>(\n  fileMap: CustomFileMap<FT>,\n  currentFolderId: string,\n): FileArray<FT> => {\n  return useMemo(() => {\n    const currentFolder = fileMap[currentFolderId];\n    const childrenIds = currentFolder.childrenIds!;\n    const files = childrenIds.map((fileId: string) => fileMap[fileId]);\n    return files;\n  }, [currentFolderId, fileMap]);\n};\n\nexport const useFileMapMethods = <FT extends CustomFileData>(\n  baseFileMap: CustomFileMap<FT>,\n  initialFolderId: string,\n) => {\n  const [fileMap, setFileMap] = useState(baseFileMap);\n  const [currentFolderId, setCurrentFolderId] = useState(initialFolderId);\n  const resetFileMap = useCallback(() => {\n    setFileMap(baseFileMap);\n    setCurrentFolderId(initialFolderId);\n  }, [baseFileMap, initialFolderId]);\n  const moveFiles = useCallback(\n    (files: FT[], source: FT, destination: FT) =>\n      setFileMap((currentFileMap) => {\n        const newFileMap = { ...currentFileMap };\n        const moveFileIds = new Set(files.map((f) => f.id));\n\n        // Delete files from their source folder.\n        const newSourceChildrenIds = source.childrenIds!.filter((id) => !moveFileIds.has(id));\n        newFileMap[source.id] = {\n          ...source,\n          childrenIds: newSourceChildrenIds,\n          childrenCount: newSourceChildrenIds.length,\n        };\n\n        // Add the files to their destination folder.\n        const newDestinationChildrenIds = [...destination.childrenIds!, ...files.map((f) => f.id)];\n        newFileMap[destination.id] = {\n          ...destination,\n          childrenIds: newDestinationChildrenIds,\n          childrenCount: newDestinationChildrenIds.length,\n        };\n\n        // Finally, update the parent folder ID on the files from source folder\n        // ID to the destination folder ID.\n        files.forEach((file) => {\n          newFileMap[file.id] = {\n            ...file,\n            parentId: destination.id,\n          };\n        });\n\n        return newFileMap;\n      }),\n    [],\n  );\n\n  const methods = useMemo(\n    () => ({\n      setFileMap,\n      setCurrentFolderId,\n      resetFileMap,\n      moveFiles,\n    }),\n    [setFileMap, setCurrentFolderId, resetFileMap, moveFiles],\n  );\n  return {\n    fileMap,\n    currentFolderId,\n    methods,\n  };\n};\nexport type FileMethods = ReturnType<typeof useFileMapMethods>['methods'];\n\nexport const useFileActionHandler = (methods: FileMethods) => {\n  return useCallback(\n    (data: FileActionData<FileAction>) => {\n      if (data.id === ChonkyActions.OpenFiles.id) {\n        const { targetFile, files } = data.payload;\n        const fileToOpen = targetFile ?? files[0];\n        if (fileToOpen && FileHelper.isDirectory(fileToOpen)) {\n          methods.setCurrentFolderId(fileToOpen.id);\n        }\n      } else if (data.id === ChonkyActions.MoveFiles.id) {\n        methods.moveFiles(data.payload.files, data.payload.source!, data.payload.destination);\n      }\n    },\n    [methods],\n  );\n};\n\nexport const useFileMap = <FT extends CustomFileData = CustomFileData>({\n  baseFileMap,\n  initialFolderId,\n}: FileMapParams<FT>) => {\n  const { fileMap, currentFolderId, methods } = useFileMapMethods(baseFileMap, initialFolderId);\n  const folderChain = useFolderChain(fileMap, currentFolderId);\n  const files = useFiles(fileMap, currentFolderId);\n  const fileActionHandler = useFileActionHandler(methods as FileMethods);\n\n  const data = {\n    fileMap,\n    currentFolderId,\n    folderChain,\n    files,\n  };\n  return { data, methods, fileActionHandler };\n};\n"],"names":["useDebounce","value","delay","_useState","useState","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","UNINITIALIZED_SENTINEL","useStaticValue","factory","valueRef","useRef","current","useInstanceVariable","ref","Logger","error","_console","_len","arguments","length","args","Array","_key","console","apply","concat","warn","_console2","_len2","_key2","debug","_console3","_len3","_key3","formatBullets","bullets","join","FileHelper","isDirectory","file","isDir","isHidden","isSymlink","isEncrypted","isClickable","isOpenable","openable","isSelectable","selectable","isDraggable","draggable","isDroppable","droppable","isDndOpenable","dndOpenable","getModDate","modDate","undefined","parseDate","maybeDate","Date","err","message","isNaN","getTime","getChildrenCount","childrenCount","sanitizeInputArray","mode","rawArray","sanitizedFiles","errorMessages","isArray","push","nonObjectFileCount","missingFieldFileCount","seenIds","Set","duplicateIds","i","item","id","name","has","add","size","repeatedIdsString","from","errorMessageString","arrayString","itemString","sanitizedArray","OptionIds","ShowHiddenFiles","ShowFoldersFirst","DarkMode","SortOrder","selectInstanceId","state","instanceId","selectExternalFileActionHandler","externalFileActionHandler","selectFileActionMap","fileActionMap","selectFileActionIds","fileActionIds","selectFileActionData","fileActionId","selectToolbarItems","toolbarItems","selectContextMenuItems","contextMenuItems","selectFolderChain","folderChain","selectCurrentFolder","currentFolder","selectParentFolder","parentFolder","selectRawFiles","rawFiles","selectFileMap","fileMap","selectCleanFileIds","cleanFileIds","selectFileData","fileId","selectHiddenFileIdMap","hiddenFileIdMap","selectHiddenFileCount","Object","keys","selectFocusSearchInput","focusSearchInput","selectSearchString","searchString","selectSelectionMap","selectionMap","selectSelectedFileIds","selectSelectionSize","selectIsFileSelected","selectSelectedFiles","map","selectSelectedFilesForAction","action","requiresSelection","getSelectedFiles","fileFilter","selectSelectedFilesForActionCount","_getSelectedFilesForA","getSelectedFilesForAction","selectDisableSelection","disableSelection","selectForceEnableOpenParent","forceEnableOpenParent","selectHideToolbarInfo","hideToolbarInfo","selectFileViewConfig","fileViewConfig","selectSortActionId","sortActionId","selectSortOrder","sortOrder","selectOptionMap","optionMap","selectOptionValue","optionId","selectThumbnailGenerator","thumbnailGenerator","selectDoubleClickDelay","doubleClickDelay","selectIsDnDDisabled","disableDragAndDrop","selectClearSelectionOnOutsideClick","clearSelectionOnOutsideClick","selectContextMenuMounted","contextMenuMounted","selectContextMenuConfig","contextMenuConfig","selectContextMenuTriggerFile","_fileMap$config$trigg","config","triggerFileId","getFileActionMap","getOptionMap","getFileMap","getFileIds","fileIds","getCleanFileIds","getSortActionId","getSortOrder","getSearchString","_getLastClick","lastClick","makeGetAction","fileActionSelector","createSelector","makeGetOptionValue","defaultValue","makeGetFiles","fileIdsSelector","getSortedFileIds","files","sortAction","showFolderFirst","prepareSortKeySelector","selector","sortFunctions","desc","sortKeySelector","_sortFunctions$push","configKeyName","ASC","sortedFileIds","sort","by","getSearcher","cleanFiles","FuzzySearch","caseSensitive","getSearchFilteredFileIds","searcher","search","f","getHiddenFileIdMap","searchFilteredFileIds","showHiddenFiles","searchFilteredFileIdsSet","forEach","getDisplayFileIds","filter","getLastClickIndex","displayFileIds","index","selectors","getFileData","getIsFileSelected","selectedFiles","filters","filteredSelectedFiles","reduce","prevFiles","ChonkyIconName","mergeFileActionsArrays","_Array","seenActionIds","addToSeen","a","wasNotSeen","fileActionArrays","duplicateFreeArrays","arr","duplicateFreeArray","thunkUpdateRawFileActions","rawFileActions","disableDefaultFileActions","dispatch","_sanitizeInputArray","defaultActionsToAdd","disabledActionIds","DefaultFileActions","fileActions","EssentialFileActions","optionDefaults","option","reduxActions","setRawFileActions","setFileActionsErrorMessages","setFileActions","setOptionDefaults","thunkUpdateToolbarNContextMenuItems","excludedToolbarFileActionIds","ChonkyActions","OpenParentFolder","groupIcons","Actions","dropdown","Options","groupSortOrder","toolbarGroupItems","seenToolbarGroups","seenContextMenuGroups","getGroup","itemArray","seenMap","groupName","group","icon","_iterator","_createForOfIteratorHelperLoose","_step","done","button","toolbar","contextMenu","b","updateFileActionMenuItems","thunkUpdateDefaultFileViewActionId","getState","_getState","setFileViewConfig","thunkActivateSortAction","_getState2","oldActionId","oldOrder","order","DESC","setSort","actionId","thunkApplySelectionTransform","selectionTransform","prevSelection","hiddenFileIds","newSelection","clearSelection","selectFiles","reset","thunkDispatchFileAction","data","_dispatch","Promise","resolve","thunkRequestFileAction","payload","selectedFilesForAction","contextMenuTriggerFile","actionState","toggleOption","effect","maybeEffectPromise","reduxDispatch","getReduxState","then","effectResult","triggerDispatchAfterEffect","preventDispatch","FileViewMode","defineFileAction","__payloadType","hotkeys","errorMessage","Error","findElementAmongAncestors","maybeElement","predicate","parentElement","elementIsInsideButton","buttonCandidate","element","tagName","toLowerCase","getValueOrFallback","fallback","desiredType","reduxThunks","selectRange","params","fileIdsToSelect","slice","rangeStart","rangeEnd","EssentialActions","MouseClickFile","_ref","clickType","OpenFiles","targetFile","ctrlKey","toggleSelection","exclusive","setLastClickIndex","fileDisplayIndex","shiftKey","lastClickIndex","_ref2","KeyboardClickFile","_ref3","enterKey","spaceKey","StartDragNDrop","_ref4","draggedFile","EndDragNDrop","_ref5","destination","droppedFiles","MoveFiles","_extends","ChangeSelection","openParentFolder","iconOnly","_ref6","reduxState","OpenFileContextMenu","_ref7","triggerFile","fileSelected","showContextMenu","mouseX","clientX","mouseY","clientY","DefaultActions","OpenSelection","openFiles","SelectAllFiles","selectAllFiles","ClearSelection","EnableListView","List","entryHeight","list","EnableCompactView","Compact","entryWidth","compact","EnableGridView","Grid","smallThumbnail","SortFilesByName","SortFilesBySize","SortFilesByDate","ToggleHiddenFiles","ToggleShowFoldersFirst","FocusSearchInput","ToggleDarkMode","ExtraActions","CopyFiles","copy","CreateFolder","tooltip","folderCreate","UploadFiles","upload","DownloadFiles","download","DeleteFiles","trash","initialRootState","fileActionsErrorMessages","rawFolderChain","folderChainErrorMessages","filesErrorMessages","searchMode","reducers","setExternalFileActionHandler","_action$payload","_action$payload2","setRawFolderChain","setRawFiles","_sanitizeInputArray2","_i","_Object$keys","selectedFileId","setSortedFileIds","setHiddenFileIds","_i2","_Object$keys2","setFocusSearchInput","setSearchString","oldValue","setSelectionDisabled","_i3","_Object$keys3","setThumbnailGenerator","setDoubleClickDelay","setDisableDragAndDrop","setForceEnableOpenParent","setHideToolbarInfo","setClearSelectionOnOutsideClick","setContextMenuMounted","hideContextMenu","_createSlice","createSlice","initialState","actions","rootReducer","reducer","useStoreWatchers","store","selectionWatcher","watch","onSelectionChange","oldSelection","selectedFilesIds","selection","unsubscribeCallbacks","subscribe","_unsubscribeCallbacks","unsubscribe","useChonkyStore","chonkyInstanceId","preloadedState","configureStore","middleware","getDefaultMiddleware","serializableCheck","devTools","useParamSelector","parametrizedSelector","selectorParams","useCallback","useSelector","useDTE","actionCreator","useDispatch","usePropReduxUpdate","ChonkyIconPlaceholder","title","React","createElement","defaultConfig","onFileAction","disableDragAndDropProvider","defaultSortActionId","defaultFileViewActionId","iconComponent","darkMode","i18n","setChonkyDefaults","key","I18nNamespace","getI18nId","namespace","stringId","getActionI18nId","FileActions","useLocalizedFileActionGroup","intl","useIntl","useMemo","formatMessage","FileActionGroups","defaultMessage","useLocalizedFileActionStrings","_action$button","_action$button2","buttonName","buttonTooltip","_action$button3","useLocalizedFileEntryStrings","formatters","useContext","ChonkyFormattersContext","fileModDateString","formatFileModDate","fileSizeString","formatFileSize","defaultFormatters","safeModDate","formatDate","_intl","sizeData","filesize","bits","output","symbol","Math","round","createContext","ChonkyIconContext","VideoExtensions","ImageExtensions","AudioExtensions","ColorsLight","ColorsDark","getIconTrie","colourIndex","step","IconsToExtensions","license","model","database","text","archive","image","video","code","info","lock","music","terminal","users","linux","ubuntu","windows","rust","python","nodejs","php","git","pdf","excel","word","flash","exactTrie","ExactTrie","ignoreCase","_IconsToExtensions","pair","extensions","colorCode","iconData","put","iconTrie","useIconData","loading","folder","match","getWithCheckpoints","lightTheme","colors","debugRed","debugBlue","debugGreen","debugPurple","debugYellow","textActive","fontSizes","rootPrimary","margins","rootLayoutMargin","root","borderRadius","borderStyle","height","lineHeight","buttonPadding","fontSize","buttonRadius","dnd","canDropColor","cannotDropColor","canDropMask","cannotDropMask","fileListCanDropMaskOne","fileListCanDropMaskTwo","fileListCannotDropMaskOne","fileListCannotDropMaskTwo","dragLayer","border","padding","fileList","desktopGridGutter","mobileGridGutter","gridFileEntry","childrenCountSize","iconColorFocused","iconSize","iconColor","fileColorTint","folderBackColorTint","folderFrontColorTint","listFileEntry","propertyFontSize","iconFontSize","iconBorderRadius","darkThemeOverride","mobileThemeOverride","useIsMobileBreakpoint","useMediaQuery","getStripeGradient","colorOne","colorTwo","makeLocalChonkyStyles","styles","createUseStyles","makeGlobalChonkyStyles","makeStyles","selectorMapping","makeGlobalStyles","theme","localStyles","globalStyles","localSelectors","localSelector","globalSelector","jssSelector","useStyles","classes","important","c","classnames","useFileBrowserHandle","useStore","useImperativeHandle","getFileSelection","selectionSet","setFileSelection","requestFileAction","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","abrupt","stop","ChonkyBusinessLogicInner","memo","forwardRef","props","_props$files","displayName","ChonkyBusinessLogic","useDndContextAvailable","dndContext","DndContext","dragDropManager","useDragIfAvailable","dndContextAvailable","mockHook","useHook","useDrag","useDropIfAvailable","useDrop","findClosestChonkyFileId","fileEntryWrapperDiv","dataset","chonkyFileId","useContextMenuTrigger","contextMenuMountedRef","event","altKey","preventDefault","target","useContextMenuDismisser","ChonkyDndFileEntryType","layerStyles","position","pointerEvents","zIndex","left","top","width","getItemStyles","initialCursorOffset","initialFileOffset","currentFileOffset","display","x","y","transform","WebkitTransform","DnDFileListDragLayer","_useDragLayer","useDragLayer","monitor","getItem","itemType","getItemType","getInitialClientOffset","getInitialSourceClientOffset","getSourceClientOffset","isDragging","selectionSize","style","className","fileDragPreview","Fragment","boxShadow","palette","divider","backgroundColor","background","color","primary","HotkeyListener","fileAction","hotkeysStr","hotkeyCallback","unbind","ChonkyPresentationLayer","children","dndDisabled","handleClickAway","hotkeyListenerComponents","ClickAwayListener","onClickAway","Box","chonkyRoot","onContextMenu","paper","touchAction","fontFamily","flexDirection","boxSizing","textAlign","webkitTouchCallout","webkitUserSelect","mozUserSelect","msUserSelect","userSelect","FileBrowser","shortid","generate","isMobileBreakpoint","muiOptions","muiThemeOptions","merge","muiTheme","createTheme","combinedTheme","chonkyComps","IntlProvider","locale","defaultLocale","Provider","ReduxProvider","ThemeProvider","StyledEngineProvider","injectFirst","MuiThemeProvider","DndProvider","backend","HTML5Backend","useFolderChainItems","folderChainItems","items","_loop","disabled","onClick","useFileDrag","fileRef","getDndStartPayload","sourceInstanceId","source","canDrag","onDragStart","type","onDragEnd","dropResult","getDropResult","dropTarget","dropEffect","collect","_useDragIfAvailable","end","dndIsDragging","drag","preview","getEmptyImage","captureDraggingState","useFileDrop","forceDisableDrop","includeChildrenDrops","folderChainRef","onDrop","_item","canDrop","customDropResult","isOver","shallow","_item$payload","prohibitedFileIds","movedFiles","currFile","isOverCurrent","_useDropIfAvailable","accept","drop","_useDropIfAvailable$","dndIsOver","dndIsOverCurrent","dndCanDrop","useFileEntryDnD","_useFileDrag","_useFileDrop","dndState","useDndHoverOpen","currentFolderRef","_currentFolderRef$cur","timeout","getRandomInt","min","max","floor","random","TextPlaceholder","minLength","maxLength","placeholderLength","whitespace","repeat","textPlaceholder","dangerouslySetInnerHTML","__html","opacity","animationName","animationIterationCount","animationTimingFunction","animationDuration","whiteSpace","overflow","maxWidth","minWidth","useFileEntryHtmlProps","dataProps","role","useFileEntryState","selected","focused","_useThumbnailUrl","useThumbnailUrl","thumbnailUrl","thumbnailLoading","fileColor","iconSpin","useDndIcon","dndIconName","showDropIcon","dndCannotDrop","dndDragging","useModifierIconComponents","modifierIcons","hidden","symlink","ChonkyIcon","modifierIconComponents","_extname","fileName","parts","split","useFileNameComponent","extension","_file$ext","ext","substring","setThumbnailUrl","_useState2","setThumbnailLoading","loadingAttempts","loadingCancelled","useFileClickHandlers","displayIndex","onMouseClick","onKeyboardClick","onSingleClick","onDoubleClick","CustomVisibilityState","useFileActionTrigger","useFileActionProps","_action$option","optionValue","actionSelectionSize","actionSelectionEmpty","_action$button$icon","active","sortAsc","sortDesc","placeholder","toggleOn","toggleOff","isSortButtonAndCurrentSort","isFileViewButtonAndCurrentView","isOptionAndEnabled","customDisabled","customActive","customVisibility","Disabled","Active","ToolbarButton","_c","externalClassName","iconWithText","fallbackIcon","fixedWidth","baseButton","iconOnlyButton","activeButton","Button","iconDropdown","textTransform","letterSpacing","paddingBottom","paddingTop","paddingLeft","paddingRight","marginRight","marginLeft","marginTop","SmartToolbarButton","triggerAction","_useFileActionProps","_useLocalizedFileActi","Hidden","FolderChainButton","first","baseBreadcrumb","disabledBreadcrumb","currentBreadcrumb","folderChainIcon","buttonContainer","dndIndicator","textDecoration","FileNavbar","folderChainComponents","components","component","navbarWrapper","navbarContainer","Breadcrumbs","navbarBreadcrumbs","separator","upDirectoryButton","flexGrow","ToolbarDropdownButton","MenuItem","ListItemIcon","ListItemText","primaryTypographyProps","minHeight","SmartToolbarDropdownButton","onClickFollowUp","handleClick","ToolbarDropdown","_React$useState","anchor","setAnchor","currentTarget","handleClose","menuItemComponents","localizedName","toolbarButtonProps","Menu","autoFocus","keepMounted","elevation","anchorEl","onClose","open","Boolean","transitionDuration","dropdownList","ToolbarInfo","hiddenCount","fileCountString","Toolbar","fileCount","selectedString","hiddenString","infoContainer","Typography","infoText","variant","extraInfoSpan","selectionSizeText","hiddenCountText","ToolbarSearch","searchPlaceholderString","searchInputRef","reduxSearchString","localSearchString","setLocalSearchString","_useDebounce","debouncedLocalSearchString","showLoadingIndicator","setShowLoadingIndicator","focus","handleChange","handleKeyUp","blur","TextField","searchFieldContainer","onChange","inputRef","InputProps","onKeyUp","startAdornment","InputAdornment","searchIcon","spin","searchFieldInput","inputProps","searchFieldInputInner","margin","FileToolbar","toolbarItemComponents","toolbarWrapper","toolbarContainer","toolbarLeft","toolbarRight","flexWrap","toolbarLeftFiller","FileListEmpty","emptyString","FileList","fileListEmpty","fileListEmptyContent","folderOpen","useClickHandler","counter","clickCount","clickTimeout","mouseClickEvent","metaKey","useKeyDownHandler","keyboardClickEvent","nativeEvent","stopPropagation","ClickableWrapper","WrapperTag","wrapperTag","passthroughProps","setFocused","handleKeyDown","compProps","onFocus","onBlur","onKeyDown","tabIndex","mergedProps","FileEntryName","fileNameComponent","CompactEntry","entryState","_useLocalizedFileEntr","fileEntryHtmlProps","listFileEntryIcon","listFileEntryDescription","listFileEntryName","listFileEntryProperties","listFileEntryProperty","alignItems","DnDFileEntry","_useFileEntryDnD","fillParent","FileThumbnail","thumbnailStyle","backgroundImage","fileThumbnail","backgroundRepeat","backgroundPosition","backgroundSize","GridEntryDndIndicator","borderBottom","borderLeft","content","GridEntryPreviewFolder","folderClasses","useFolderStyles","fileClasses","useFileStyles","commonClasses","useCommonEntryStyles","previewFile","folderBackSideMid","folderBackSideTop","folderFrontSide","fileIcon","selectionIndicator","thumbnail","borderTopLeftRadius","borderTopRightRadius","right","borderRightColor","borderTopColor","borderBottomColor","borderLeftColor","borderWidth","bottom","shadows","GridEntryPreviewFile","_c2","focusIndicator","GridEntry","useFileEntryStyles","entryClassName","gridFileEntryPreview","gridFileEntryNameContainer","gridFileEntryName","wordBreak","ListEntry","styleState","listFileEntrySelection","textOverflow","flex","disabledDndState","SmartFileEntry","fileViewMode","fileClickHandlers","clickableWrapperProps","fileEntryClickableWrapper","fileEntryProps","EntryComponent","outline","isMobileDevice","window","orientation","navigator","userAgent","indexOf","getGridConfig","viewConfig","gutter","scrollbar","columnCount","columnWidth","rowCount","ceil","rowHeight","GridContainer","gridRef","gridConfig","setGridConfig","gridConfigRef","oldConf","newConf","resetAfterRowIndex","resetAfterColumnIndex","resetAfterIndices","columnIndex","rowIndex","sizers","gc","getColumnWidth","getRowHeight","displayFileIdsRef","getItemKey","_displayFileIdsRef$cu","cellRenderer","styleWithGutter","gridComponent","VariableSizeGrid","gridContainer","estimatedRowHeight","estimatedColumnWidth","itemKey","ListContainer","listRef","listComponent","rowRenderer","_displayFileIds$data$","FixedSizeList","listContainer","itemSize","itemCount","borderTop","localClasses","useLocalStyles","onScroll","fillParentContainer","listRenderer","fileListWrapper","dndDropZone","dndDropZoneIcon","AutoSizer","disableHeight","maxHeight","FileContextMenu","browserMenuShortcutString","shortcut","contextMenuItemComponents","anchorPosition","disablePortal","anchorReference","contextMenuList","ListSubheader","browserMenuTooltip","FullFileBrowser","_props$folderChain","useFolderChain","currentFolderId","parentId","parentFile","unshift","useFiles","childrenIds","useFileMapMethods","baseFileMap","initialFolderId","setFileMap","setCurrentFolderId","resetFileMap","moveFiles","currentFileMap","newFileMap","moveFileIds","newSourceChildrenIds","newDestinationChildrenIds","methods","useFileActionHandler","_data$payload","fileToOpen","useFileMap","_useFileMapMethods","fileActionHandler"],"mappings":"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ACL,MAAM,EACN,KAAK,EACL,MAAM,EACN,KAAK,EACL,MAAM,EACN,KAAK,EACL,KAAK,EACL,KAAK,EACL,IAAI,EACJ,KAAK,EACL,IAAI,EACJ,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,MAAM,EACN,MAAM,EACN,MAAM,EACN,MAAM,EACN,MAAM,EACN,MAAM,EACN,KAAK,EACL,KAAK,EACL,MAAM,EACN,IAAI,EACJ,KAAK,EACL,KAAK,EACL,KAAK,CACN,CAAA;AACM,IAAMC,eAAe,GAAa,CACvC,KAAK,EACL,MAAM,EACN,KAAK,EACL,KAAK,EACL,KAAK,EACL,MAAM,EACN,KAAK,EACL,KAAK,EACL,KAAK,EACL,MAAM,EACN,MAAM,EACN,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,IAAI,EACJ,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,MAAM,EACN,KAAK,EACL,KAAK,EACL,IAAI,EACJ,KAAK,EACL,MAAM,EACN,OAAO,EACP,MAAM,EACN,OAAO,EACP,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,MAAM,EACN,KAAK,EACL,KAAK,EACL,MAAM,EACN,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,MAAM,EACN,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,MAAM,EACN,KAAK,EACL,KAAK,EACL,MAAM,EACN,MAAM,EACN,KAAK,EACL,MAAM,EACN,KAAK,EACL,MAAM,EACN,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,CACN,CAAA;AACM,IAAMC,eAAe,GAAa,CACvC,MAAM,EACN,KAAK,EACL,KAAK,EACL,KAAK,EACL,MAAM,EACN,MAAM,EACN,IAAI,EACJ,KAAK,EACL,KAAK,EACL,KAAK,EACL,OAAO,EACP,WAAW,EACX,WAAW,EACX,WAAW,EACX,KAAK,EACL,MAAM,EACN,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,MAAM,EACN,KAAK,EACL,KAAK,EACL,MAAM,EACN,KAAK,EACL,KAAK,EACL,MAAM,EACN,MAAM,EACN,KAAK,EACL,KAAK,EACL,KAAK,EACL,IAAI,EACJ,IAAI,EACJ,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,MAAM,EACN,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,MAAM,EACN,KAAK,EACL,IAAI,CACL,CAAA;AACM,IAAMC,WAAW,GAAa,CACnC,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,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"}